(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-85b0d3ca"],{"32b6":function(t,e,a){},"4f66":function(t,e,a){"use strict";a.r(e);var r=a("5530"),n=(a("d3b7"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Drawer",{attrs:{width:"800",title:t.$t("proxyMark.ConditionSetting"),"mask-closable":!1},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[t.loading?a("Spin",{attrs:{fix:""}}):t._e(),a("Form",{ref:"form",attrs:{rules:t.rules,model:t.form}},[a("FormItem",{attrs:{"label-width":300,label:t.$t("proxyMark.formItem1"),prop:"dirSubUserCount"}},[a("InputNumber",{staticStyle:{width:"100px"},attrs:{min:1,precision:0,max:99999999},model:{value:t.form.dirSubUserCount,callback:function(e){t.$set(t.form,"dirSubUserCount",e)},expression:"form.dirSubUserCount"}}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t._f("lang")("proxyMark.and")))])],1),a("FormItem",{attrs:{"label-width":300,label:t.$t("proxyMark.formItem2"),prop:"rechargeAmount"}},[a("InputNumber",{staticStyle:{width:"100px"},attrs:{min:.01,max:99999999.99,precision:2,"active-change":!1},model:{value:t.form.rechargeAmount,callback:function(e){t.$set(t.form,"rechargeAmount",e)},expression:"form.rechargeAmount"}}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t._f("lang")("proxyMark.and")))])],1),a("FormItem",{attrs:{"label-width":300,label:t.$t("proxyMark.formItem3"),prop:"continueOrderDays"}},[a("InputNumber",{staticStyle:{width:"100px"},attrs:{min:1,max:7,precision:0},model:{value:t.form.continueOrderDays,callback:function(e){t.$set(t.form,"continueOrderDays",e)},expression:"form.continueOrderDays"}}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t._f("lang")("proxyMark.daygrab")))])],1),a("FormItem",{attrs:{"label-width":300,label:t.$t("proxyMark.formItem4")}},[a("upload",{ref:"upRef1",attrs:{list:t.upList},on:{"upload-remove":t.uploadRemove1,"upload-success":t.uploadSuccess1},model:{value:t.form.proxyFlagLogo,callback:function(e){t.$set(t.form,"proxyFlagLogo",e)},expression:"form.proxyFlagLogo"}})],1),a("FormItem",{attrs:{"label-width":300,label:t.$t("roomManage.state")}},[a("i-switch",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),a("div",{staticClass:"salarySetting"},[a("div",{staticClass:"salary_title"},[t._v(" "+t._s(t.$t("proxyMark.salarySetting"))+": "),a("Button",{attrs:{type:"primary",disabled:t.addDisabled},on:{click:t.addSalaryCondition}},[t._v(" "+t._s(t.$t("add"))+" ")])],1),t._l(t.form.salaryConditionList,(function(e,r){return a("Row",{key:e.key},[a("Col",{staticClass:"directUnderAmount",attrs:{span:"12"}},[a("FormItem",{attrs:{rules:t.salaryValidator(r,t.$t("proxyMark.directUnderAmountTip")),prop:"salaryConditionList."+r+".directUnderAmount"}},[t._v(" "+t._s(t.$t("proxyMark.directUnderAmount"))+" "),a("InputNumber",{attrs:{min:1},model:{value:e.directUnderAmount,callback:function(a){t.$set(e,"directUnderAmount",a)},expression:"item.directUnderAmount"}})],1)],1),a("Col",{attrs:{offset:"1",span:"11"}},[a("FormItem",{attrs:{rules:t.salaryValidator(r,t.$t("proxyMark.monthlySalaryTip")),prop:"salaryConditionList."+r+".monthlySalary"}},[t._v(" "+t._s(t.$t("proxyMark.monthlySalary"))+" "),a("InputNumber",{attrs:{min:1},model:{value:e.monthlySalary,callback:function(a){t.$set(e,"monthlySalary",a)},expression:"item.monthlySalary"}}),t.form.salaryConditionList.length>1?a("Button",{attrs:{type:"text"},on:{click:function(e){return t.deleteHandler(r)}}},[a("Icon",{attrs:{type:"md-close-circle",size:"20"}})],1):t._e()],1)],1)],1)}))],2),a("FormItem",{attrs:{"label-width":300}},[a("div",{staticClass:"button-box"},[a("Button",{attrs:{type:"primary"},on:{click:t.saveProxySet}},[t._v(t._s(t._f("lang")("confirm")))]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.$emit("input",!1)}}},[t._v(t._s(t._f("lang")("cancel")))])],1)])],1)],1)}),o=(a("25f0"),a("a434"),a("d81d"),a("a9e3"),a("4de4"),a("b680"),a("9dac")),i=function(){return{key:Math.random().toString(16),directUnderAmount:null,monthlySalary:null}},s={props:{value:{default:!1,type:Boolean}},components:{upload:o.a},data:function(){return{form:{dirSubUserCount:null,continueOrderDays:null,rechargeAmount:null,status:1,proxyFlagLogo:"",salaryConditionList:[]},rules:{dirSubUserCount:[{required:!0,trigger:"blur",type:"number",message:this.$t("comInputTip",{message:""})}],rechargeAmount:[{required:!0,trigger:"blur",type:"number",message:this.$t("comInputTip",{message:""})}],continueOrderDays:[{required:!0,trigger:"blur",type:"number",message:this.$t("comInputTip",{message:""})}]},loading:!1,maxLen:8}},methods:{salaryValidator:function(t,e){var a=this;return{validator:function(e,r,n){var o=a.form.salaryConditionList[t],i=o.directUnderAmount,s=o.monthlySalary,l=/^\d+$/;if((l.test(i)||l.test(s))&&!l.test(r))return n("");n()},message:e,trigger:"blur"}},deleteHandler:function(t){this.form.salaryConditionList.splice(t,1)},addSalaryCondition:function(){var t=this.form.salaryConditionList;this.addDisabled||t.push(i())},uploadRemove1:function(){this.form.proxyFlagLogo=""},uploadSuccess1:function(t){this.form.proxyFlagLogo=t.path},getProxySet:function(){var t=this;this.loading=!0,this.$get("/activity/proxyFlagConfig/tob/getConfig").then((function(e){var a=e||{},n=[];try{n=JSON.parse(a.salaryConditionJson).map((function(e){return Object(r.a)(Object(r.a)({},i()),{},{directUnderAmount:Number(e.directUnderAmount)||null,monthlySalary:Number(t.$utils.toYuan(e.monthlySalary))||null})}))}catch(t){}Object.assign(t.form,{dirSubUserCount:a.dirSubUserCount||1,continueOrderDays:a.continueOrderDays||1,rechargeAmount:+a.rechargeAmount/100||1,status:a.status||0,proxyFlagLogo:a.proxyFlagLogo,salaryConditionList:n})})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},saveProxySet:function(){var t=this;this.$refs.form.validate((function(e){if(e){t.loading=!0;var a=t.form,r=a.dirSubUserCount,n=a.continueOrderDays,o=a.rechargeAmount,i=a.status,s=a.proxyFlagLogo,l=a.salaryConditionList.filter((function(t){return t.directUnderAmount&&t.monthlySalary})).map((function(t){return{directUnderAmount:t.directUnderAmount,monthlySalary:(100*t.monthlySalary).toFixed()}})),u={dirSubUserCount:r,continueOrderDays:n,rechargeAmount:(100*o).toFixed(0),status:i,proxyFlagLogo:s,salaryConditionJson:JSON.stringify(l)};t.$post("/activity/proxyFlagConfig/tob/updateConfig",u).then((function(){t.$Message.success(t.$t("changeSuccess")),t.$emit("input",!1)})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))}}))}},computed:{addDisabled:function(){return this.form.salaryConditionList.length>=this.maxLen},upList:function(){return this.form.proxyFlagLogo?[{name:"pic",url:this.$formatImageUrl(this.form.proxyFlagLogo)}]:[]},value2:{get:function(){return this.value},set:function(){this.$emit("input",!1)}}},watch:{value:function(t){t&&(Object.assign(this.form,{dirSubUserCount:null,continueOrderDays:null,rechargeAmount:null,status:1,proxyFlagLogo:"",salaryConditionList:[]}),this.getProxySet())}}},l=s,u=(a("ba3e"),a("2877")),c={data:function(){return{loading:!1,showdeTail:!1,columns:[{title:this.$t("roomManage.memberAccount"),key:"username",align:"center"},{title:this.$t("status"),slot:"status",align:"center"},{title:this.$t("proxyMark.table1"),key:"qualifiedCount",align:"center"},{title:this.$t("proxyMark.table2"),key:"orderRechargeUnqualifiedCount",thslot:"table2",align:"center"},{key:"rechargeUnqualifiedCount",title:this.$t("proxyMark.table3"),align:"center"},{title:this.$t("proxyMark.table4"),key:"orderUnqualifiedCount",align:"center"},{title:this.$t("proxyMark.table5"),key:"lostFlagCount",thslot:"table5",align:"center"}],dataList:[],form:{username:"",status:"-1"},statusList:[this.$t("proxyMark.unqualified"),this.$t("proxyMark.pending"),this.$t("proxyMark.pendingAudit"),this.$t("proxyMark.normal"),this.$t("proxyMark.lost")],pageNo:1,pageSize:10,totalElements:0}},methods:{handleDetail:function(){this.showdeTail=!this.showdeTail},tfn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$t("activeConfiguration.".concat(t),e)},pageChange:function(t){this.pageNo=t,this.query()},pageSizeChange:function(t){this.pageSize=t,this.query(1)},query:function(t){var e=this;t&&(this.pageNo=t),this.loading=!0;var a=this.form,r=a.username,n=a.status,o={page:this.pageNo,size:this.pageSize};"-1"!==n&&(o.status=n),r&&(o.username=r),this.$get("/activity/proxyFlag/tob/page",o).then((function(t){var a=t.content,r=t.totalElements;e.dataList=a,e.totalElements=+r})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading=!1}))},clearDate:function(){this.form.username="",this.form.status="-1";var t=this.form;this.form=Object(r.a)({},t)}},components:{Drawer:Object(u.a)(l,n,[],!1,null,null,null).exports},mounted:function(){this.query()}},m=c,d=(a("8842"),Object(u.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"review__list"},[a("Form",{attrs:{model:t.form,inline:""}},[a("FormItem",{attrs:{prop:"userName"}},[a("span",[t._v(t._s(t.$t("roomManage.memberAccount"))+" ")]),a("Input",{staticStyle:{width:"150px"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),a("FormItem",{attrs:{prop:"userName"}},[a("span",[t._v(t._s(t.$t("status"))+" ")]),a("Select",{staticStyle:{width:"120px","margin-left":"6px"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("Option",{attrs:{value:"-1"}},[t._v(t._s(t.$t("all")))]),a("Option",{attrs:{value:"1"}},[t._v(t._s(this.$t("proxyMark.pending")))]),a("Option",{attrs:{value:"3"}},[t._v(t._s(this.$t("proxyMark.normal")))]),a("Option",{attrs:{value:"4"}},[t._v(t._s(this.$t("proxyMark.lost")))])],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary",icon:"md-search"},on:{click:function(e){return t.query(1)}}},[t._v(t._s(t._f("lang")("rebate.search")))])],1),a("FormItem",[a("Button",{on:{click:function(e){return t.clearDate()}}},[t._v(t._s(t.tfn("clear")))])],1),a("FormItem",{staticStyle:{float:"right"}},[a("Button",{attrs:{type:"primary"},on:{click:t.handleDetail}},[t._v(t._s(t._f("lang")("proxyMark.ConditionSetting")))])],1)],1),a("m-table",{attrs:{border:"",columns:t.columns,data:t.dataList,"no-data-text":t.$t("rebate.noData")},scopedSlots:t._u([{key:"status",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(t.statusList[r.status]))])]}},{key:"table2",fn:function(){return[a("Tooltip",{attrs:{content:t.$t("proxyMark.table2Tips"),"max-width":"200",placement:"top"}},[t._v(" "+t._s(t.$t("proxyMark.table2"))+" ")])]},proxy:!0},{key:"table5",fn:function(){return[a("Tooltip",{attrs:{content:t.$t("proxyMark.table5Tips"),"max-width":"200",placement:"top"}},[t._v(" "+t._s(t.$t("proxyMark.table5"))+" ")])]},proxy:!0}])}),a("m-page",{attrs:{total:t.totalElements,pageSize:t.pageSize,pageSizeOpts:[10,20,50,100]},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange},model:{value:t.pageNo,callback:function(e){t.pageNo=e},expression:"pageNo"}}),t.loading?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),a("Drawer",{model:{value:t.showdeTail,callback:function(e){t.showdeTail=e},expression:"showdeTail"}})],1)}),[],!1,null,null,null));e.default=d.exports},8842:function(t,e,a){"use strict";a("b407")},b407:function(t,e,a){},ba3e:function(t,e,a){"use strict";a("32b6")}}]);