(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f25edce4"],{"1d74":function(t,e,i){"use strict";i("de1e")},d1b5:function(t,e,i){"use strict";i.r(e);var a=i("5530"),n=(i("d3b7"),i("ac1f"),i("5319"),i("2f62")),s={name:"limitarea",data:function(){return{ip:"",state:"all",pageNum:1,pageSize:10,total:0,loading:!1,dataList:[],countryList:[],ipLimitList:{},showdrawer:!1,detail:null,loading2:!1,editObj:{startIp:"",endIp:"",remark:"",codeType:""},isWhite:!1}},methods:Object(a.a)(Object(a.a)({},Object(n.b)("site",["queryCountryData"])),{},{isWhitechange:function(t){var e=this;this.loading=!0,this.$post("/platform/site/tob/updateSiteWhite",{isWhite:t?"T":"F"}).then((function(){e.$Message.success(e.$t("changeSuccess"))})).catch((function(i){e.isWhite=!t,e.$Message.error(i.message)})).finally((function(){e.loading=!1}))},outDate:function(t){var e=t.replace(/-/g,"/");return new Date>new Date(e)},del:function(t){var e=this;this.loading2=!0,this.$post("/platform/siteIpLimit/tob/deleteIpLimit",{id:t}).then((function(){e.$Message.success(e.$t("deleteSuccess")),e.getData(!0)})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading2=!1}))},confirm:function(){var t=this;this.editObj.startIp&&this.editObj.endIp&&this.editObj.codeType?(this.loading2=!0,this.$post("/platform/siteIpLimit/tob/saveSiteIpLimit",{startIp:this.editObj.startIp,endIp:this.editObj.endIp,remark:this.editObj.remark,codeType:this.editObj.codeType,operator:3,id:this.detail?this.detail.id:""}).then((function(){t.$Message.success(t.$t("riskManagement.addedSuccessfully")),t.getData(!0),t.showdrawer=!1})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading2=!1}))):this.$Message.info(this.$t("riskManagement.pleaseConfirmThatTheInformationIsComplete"))},editnew:function(t){this.showdrawer=!0,t?(this.editObj.startIp=t.ipStart,this.editObj.endIp=t.ipEnd,this.editObj.codeType=t.limitTime,this.editObj.remark=t.remark,this.detail=t):(this.detail=null,this.editObj={startIp:"",endIp:"",codeType:"",remark:""})},pageChange:function(t){this.pageNum=t,this.getData()},pageSizeChange:function(t){this.pageSize=t,this.getData(!0)},getConfig:function(){var t=this;this.queryCountryData().then((function(e){t.countryList=e.countryList,t.ipLimitList=e.ipLimitList.reduce((function(t,e){return t[e.dictKey]=e.dictValue,t}),{})}))},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.pageNum=1),this.loading=!0,this.$get("/platform/siteIpLimit/tob/queryIpLimitListByPage",{operator:3,pageNum:this.pageNum,pageSize:this.pageSize,state:this.state,ip:this.ip}).then((function(e){t.dataList=e.ipLimitList.content,t.total=+e.ipLimitList.totalElements,t.isWhite=Boolean(e.isWhite)})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))}}),mounted:function(){this.getConfig(),this.getData()}},r=s,o=(i("1d74"),i("2877")),l=Object(o.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"limitarea"},[t.loading?i("Spin",{attrs:{fix:""}}):t._e(),i("div",{staticStyle:{margin:"10px 0"}},[t.pageauthoritys.switch?i("Checkbox",{on:{"on-change":t.isWhitechange},model:{value:t.isWhite,callback:function(e){t.isWhite=e},expression:"isWhite"}},[t._v(t._s(t._f("lang")("riskManagement.whetherToEnableTheBackendWhitelist")))]):t._e(),t.pageauthoritys.add?i("Button",{attrs:{icon:"md-add",type:"primary"},on:{click:function(e){return t.editnew()}}},[t._v(t._s(t._f("lang")("riskManagement.addNewLicense")))]):t._e(),i("Input",{staticStyle:{width:"200px",margin:"0 15px"},attrs:{placeholder:t.$t("riskManagement.ipAddress")},model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}}),i("Select",{staticStyle:{width:"100px",margin:"0 10px 0 0"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[i("Option",{attrs:{value:"all"}},[t._v(t._s(t._f("lang")("all")))]),i("Option",{attrs:{value:"off"}},[t._v(t._s(t._f("lang")("riskManagement.expired")))]),i("Option",{attrs:{value:"on"}},[t._v(t._s(t._f("lang")("riskManagement.using")))])],1),i("Button",{attrs:{icon:"md-add",type:"primary"},on:{click:function(e){return t.getData(!0)}}},[t._v(t._s(t._f("lang")("search")))])],1),i("table",{staticClass:"cmtable tdcenter"},[i("tr",[i("th",[t._v(t._s(t._f("lang")("riskManagement.startIpAddress")))]),i("th",[t._v(t._s(t._f("lang")("riskManagement.endIpAddress")))]),i("th",[t._v(t._s(t._f("lang")("riskManagement.limitTime")))]),i("th",[t._v(t._s(t._f("lang")("riskManagement.deadline")))]),i("th",[t._v(t._s(t._f("lang")("createTime")))]),i("th",[t._v(t._s(t._f("lang")("remark")))]),i("th",[t._v(t._s(t._f("lang")("status")))]),i("th",[t._v(t._s(t._f("lang")("operation")))])]),t._l(t.dataList,(function(e){return i("tr",{key:e.id},[i("td",[t._v(t._s(e.ipStart))]),i("td",[t._v(t._s(e.ipEnd))]),i("td",[t._v(t._s(t._f("lang")("riskManagement."+e.limitTime)))]),i("td",[t._v(t._s(e.finalTime))]),i("td",[t._v(t._s(e.createTime))]),i("td",[t._v(t._s(e.remark))]),i("td",{style:{background:t.outDate(e.finalTime)?"#FF4948":"#ADD597",color:"#fff"}},[t._v(t._s(t.outDate(e.finalTime)?t.$t("riskManagement.expired"):t.$t("riskManagement.using")))]),i("td",[t.pageauthoritys.update?i("Button",{attrs:{icon:"ios-cog"},on:{click:function(i){return t.editnew(e)}}}):t._e(),t.pageauthoritys.delete?i("Button",{attrs:{icon:"md-trash"},on:{click:function(i){return t.del(e.id)}}}):t._e()],1)])}))],2),i("div",{staticClass:"tablebottom"},[i("div",{staticClass:"static"},[t._v(t._s(t._f("lang")("pageDate",{total:t.total,page:t.pageNum,allpage:Math.ceil(t.total/t.pageSize)})))]),i("Page",{staticStyle:{float:"right"},attrs:{current:t.pageNum,total:t.total,"show-sizer":"","show-elevator":"","page-size-opts":[10,20,50,100]},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1),i("Drawer",{staticClass:"noctxpad",attrs:{title:t.detail?t.$t("riskManagement.editIpAllowedOnTheBackend"):t.$t("riskManagement.addNewIpAllowedOnTheBackend"),width:"700"},model:{value:t.showdrawer,callback:function(e){t.showdrawer=e},expression:"showdrawer"}},[t.loading2?i("Spin",{attrs:{fix:""}}):t._e(),i("div",{staticStyle:{padding:"20px"}},[i("Form",{attrs:{"label-width":100}},[i("FormItem",{attrs:{label:t.$t("riskManagement.startIp")}},[i("Input",{staticStyle:{width:"400px"},model:{value:t.editObj.startIp,callback:function(e){t.$set(t.editObj,"startIp",e)},expression:"editObj.startIp"}})],1),i("FormItem",{attrs:{label:t.$t("riskManagement.endIp")}},[i("Input",{staticStyle:{width:"400px"},model:{value:t.editObj.endIp,callback:function(e){t.$set(t.editObj,"endIp",e)},expression:"editObj.endIp"}})],1),i("FormItem",{attrs:{label:t.$t("riskManagement.limitTime")}},[i("Select",{staticStyle:{width:"220px"},model:{value:t.editObj.codeType,callback:function(e){t.$set(t.editObj,"codeType",e)},expression:"editObj.codeType"}},t._l(t.ipLimitList,(function(e,a){return i("Option",{key:a,attrs:{value:a}},[t._v(t._s(t._f("lang")("riskManagement."+a)))])})),1)],1),i("FormItem",{attrs:{label:t.$t("remark")}},[i("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea"},model:{value:t.editObj.remark,callback:function(e){t.$set(t.editObj,"remark",e)},expression:"editObj.remark"}})],1),i("FormItem",[i("div",{staticStyle:{color:"red","font-size":"12px"}},[t._v(" "+t._s(t._f("lang")("riskManagement.onlyIpHint"))+" ")])])],1)],1),i("div",{staticClass:"drawerbottom"},[i("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){t.showdrawer=!1}}},[t._v(t._s(t._f("lang")("cancel")))]),i("Button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t._f("lang")("confirm")))])],1)],1)],1)}),[],!1,null,null,null);e.default=l.exports},de1e:function(t,e,i){}}]);