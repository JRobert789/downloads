(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8c16360c"],{"7ea7":function(t,i,s){"use strict";s.r(i);var e=(s("a9e3"),s("b680"),s("d3b7"),s("ac1f"),s("1276"),s("99af"),{data:function(){return{isProbabilityGrab:!1,grabSuccessRate:80,startTime:"00:00",endTime:"02:00",loading:!1}},methods:{onBlurHandler:function(){null===this.grabSuccessRate&&(this.grabSuccessRate=80)},formatNumber:function(t){return Math.max(Math.min(100,Number(t.toFixed(1))),0)},resetHandler:function(){this.grabSuccessRate=80,this.startTime="00:00",this.endTime="02:00"},getConfig:function(){var t=this;this.loading=!0,this.$get("/platform/siteSetting/tob/getSiteSetting").then((function(i){var s=i||{},e=s.isProbabilityGrab,a=s.controlTimeRange,r=s.grabSuccessRate,n=void 0===r?null:r;if((n||0===Number(n))&&(t.grabSuccessRate=Number((Number(n)/100).toFixed(2))),t.isProbabilityGrab=1===Number(e),a){var c=a.split("-");t.startTime=c[0],t.endTime=c[1]}})).finally((function(){t.loading=!1}))},setConfig:function(){var t=this;if(!this.loading){if(this.isProbabilityGrab||this.startTime||this.endTime){if(!this.startTime)return this.$Message.error("开始时间不能为空");if(!this.endTime)return this.$Message.error("结束时间不能为空")}this.startTime||this.endTime||(this.startTime="00:00",this.endTime="02:00"),null===this.grabSuccessRate&&(this.grabSuccessRate=80);var i=100*this.grabSuccessRate,s="".concat(this.startTime,"-").concat(this.endTime);this.loading=!0,this.$post("/platform/siteSetting/tob/saveGrabControl",{grabSuccessRate:i,controlTimeRange:s,isProbabilityGrab:Number(this.isProbabilityGrab)}).then((function(){t.$Message.success("设置成功")})).catch((function(i){return t.$Message.error(i.message)})).finally((function(){t.loading=!1}))}}},mounted:function(){this.getConfig()}}),a=e,r=(s("b144"),s("2877")),n=Object(r.a)(a,(function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"probability_container"},[t.loading?s("Spin",{attrs:{fix:""}}):t._e(),s("div",{staticClass:"m-b-30"},[s("span",{staticClass:"m-r-10"},[t._v("抢单概率控制")]),s("i-switch",{model:{value:t.isProbabilityGrab,callback:function(i){t.isProbabilityGrab=i},expression:"isProbabilityGrab"}})],1),s("div",{staticClass:"m-b-30"},[s("span",{staticClass:"m-r-10"},[t._v("抢单成功率")]),s("InputNumber",{staticClass:"m-l-10",attrs:{formatter:t.formatNumber},on:{"on-blur":t.onBlurHandler},model:{value:t.grabSuccessRate,callback:function(i){t.grabSuccessRate=i},expression:"grabSuccessRate"}}),t._v("% ")],1),s("div",{staticClass:"m-b-30"},[s("span",{staticClass:"m-r-10"},[t._v("控制时间段")]),s("span",{staticClass:"m-r-10 m-l-10"},[t._v("开始时间")]),s("TimePicker",{staticStyle:{width:"120px"},attrs:{type:"time",format:"HH:mm",clearable:!1},model:{value:t.startTime,callback:function(i){t.startTime=i},expression:"startTime"}}),s("span",{staticClass:"m-r-10 m-l-10"},[t._v("结束时间")]),s("TimePicker",{staticStyle:{width:"120px"},attrs:{type:"time",format:"HH:mm",clearable:!1},model:{value:t.endTime,callback:function(i){t.endTime=i},expression:"endTime"}}),s("span",{staticClass:"m-l-10"},[t._v("(UTC-5)")])],1),s("div",{staticClass:"m-b-30"},[s("Button",{staticClass:"m-r-10",attrs:{type:"primary",loading:t.loading},on:{click:t.setConfig}},[t._v("确定")]),s("Button",{on:{click:function(i){return t.resetHandler()}}},[t._v("重置")])],1)],1)}),[],!1,null,"3bc8ef89",null);i.default=n.exports},b144:function(t,i,s){"use strict";s("ccbf")},ccbf:function(t,i,s){}}]);