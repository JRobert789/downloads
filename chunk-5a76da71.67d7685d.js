(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5a76da71"],{"9ac7":function(t,e,a){},ac7c:function(t,e,a){"use strict";a.r(e);var r=a("5530"),s=(a("ac1f"),a("5319"),a("d3b7"),a("99af"),{name:"bankinfo",data:function(){return{form:{realName:"",email:"",phone:"",cardType:"1",chanName:"ERC20",account:"",ifscCode:"",bankCity:"",usdtAddress:"",bankName:"",isEnable:0},rule:{account:[{required:!0,message:this.$t("proxy.cardTip"),trigger:"blur",pattern:/^[A-Za-z0-9]{1,50}$/}],bankCity:[{required:!1,message:this.$t("proxy.addressError"),trigger:"blur",pattern:/(^.{0,200}$)/}],bankName:[{required:!0,message:this.$t("proxy.rightTips")+this.$t("proxy.addBankForm9"),trigger:"blur"}],usdtAddress:[{required:!0,message:this.$t("proxy.cardTip"),trigger:"blur",pattern:/^[A-Za-z0-9]{1,50}$/}],phone:[{message:this.$t("proxy.rightTips")+this.$t("proxy.addBankForm8"),trigger:"blur",pattern:/^[0-9]{1,30}$/}],email:[{required:!0,message:this.$t("proxy.rightTips")+this.$t("proxy.addBankForm3"),trigger:"blur",pattern:/^[A-Za-z0-9_.-\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/}],realName:[{required:!0,message:this.$t("proxy.rightTips")+this.$t("proxy.addBankForm2"),trigger:"blur"}],ifscCode:[{required:!1,message:this.$t("fundManager.rule5Msg"),trigger:"blur",pattern:/^[A-Za-z0-9]{8,11}$/}]},dataList:[],open:!1,pageConfig:null,cityList:[],editObj:{},loading2:!1}},computed:{userName:function(){return this.pageConfig&&this.pageConfig.userName},isTest:function(){return this.$route.query.isTest},disabledByProxyUser:function(){var t=this.buttonMap["/proxyuser"];return!(!this.$route.query.userid||!t||t.update)}},methods:{getStatus:function(t){var e={0:this.$t("proxy.Locked"),1:this.$t("proxy.Notlocked"),default:this.$t("proxy.Disabled")};return e[t.isEnable]||e.default},edit:function(t){this.form=JSON.parse(JSON.stringify(t)),this.form.cardType=t.cardType+"",this.form.isEnable=this.form.isEnable||0,this.form.chanName||(this.form.chanName="ERC20"),this.editObj=JSON.parse(JSON.stringify(t)),this.open=!0},getPageConfig:function(){var t=this;this.$post("/user/tob/initUpdateApi",{userId:this.$route.query.userid}).then((function(e){t.pageConfig=e}))},getCityConfig:function(){var t=this;this.$post("/platform/bank/tob/findBankList").then((function(e){t.cityList=e})).catch((function(){t.$Message.error(t.$t("proxy.getBankRegioTip"))}))},getBankList:function(){var t=this;this.$post("/user/tob/getUserBankApi",{userId:this.$route.query.userid}).then((function(e){t.dataList=e})).catch((function(){t.$Message.error(t.$t("proxy.getBankListTip"))}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t&&e.addbankcard()}))},addbankcard:function(){var t=this;this.loading2=!0,"1"!==this.form.cardType?(this.form.bankName="",this.form.account="",this.form.ifscCode=""):(this.form.chanName="",this.form.usdtAddress="");var e=Object(r.a)(Object(r.a)({},this.form),{},{userId:this.$route.query.userid});["usdtAddress","account"].forEach((function(t){e[t]=e[t].replace(/[\s|\b]/g,"")}));var a=this.editObj.id?"/user/tob/updateUserBankApi":"/user/tob/saveUserBankApi";this.$post(a,e).then((function(){var e=t.editObj.id?t.$t("changeSuccess"):t.$t("opSuccess");t.$Message.success(e),t.getBankList(),t.open=!1,t.onclose()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading2=!1}))},updateBankStatus:function(t,e){var a=this;this.$Modal.confirm({title:"".concat(this.$t("proxy.Areyousure")).concat("2"===e?this.$t("proxy.Using"):this.$t("proxy.Disable")),onOk:function(){a.$post("/user/tob/updateUserBankApi",{id:t,isEnable:2==+e?1:2}).then((function(){a.$Message.success(a.$t("changeSuccess")),a.getBankList()})).catch((function(t){a.$Message.error(t.message)}))}})},deletebank:function(t){var e=this;this.$post("/user/tob/updateUserBankApi",{id:t,isDel:1}).then((function(){e.$Message.success(e.$t("opSuccess")),e.getBankList()})).catch((function(t){e.$Message.error(t.message)}))},onclose:function(){this.form={realName:"",email:"",phone:"",cardType:"1",chanName:"ERC20",account:"",ifscCode:"",bankCity:"",usdtAddress:"",bankName:""},this.editObj={}}},mounted:function(){this.getPageConfig(),this.getCityConfig(),this.getBankList()}}),o=s,n=(a("e90b"),a("2877")),i=Object(n.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bankinfo"},[a("div",[t._v(t._s(t.$t("proxy.bankuserName"))+": "+t._s(t.userName))]),a("div",{staticStyle:{margin:"20px 0"}},[t.pageauthoritys.add?a("Button",{attrs:{type:"primary",icon:"ios-add",disabled:t.disabledByProxyUser},on:{click:function(e){t.open=!0}}},[t._v(t._s(t.$t("proxy.AddBankCard")))]):t._e()],1),a("table",{staticClass:"cmtable tdcenter"},[a("tr",[a("th",[t._v(t._s(t.$t("proxy.addBankForm2")))]),a("th",[t._v(t._s(t.$t("proxy.addBankForm1")))]),a("th",[t._v(t._s(t.$t("proxy.addBankForm6")))]),a("th",[t._v(t._s(t.$t("proxy.addBankForm7")))]),a("th",[t._v(t._s(t.$t("proxy.addBankForm8")))]),a("th",[t._v(t._s(t.$t("proxy.addBankForm11")))]),a("th",[t._v(t._s(t.$t("proxy.addBankForm3")))]),a("th",[t._v("SWFITCode")]),a("th",[t._v(t._s(t.$t("proxy.addBankForm5")))]),a("th",[t._v(t._s(t.$t("proxy.addBankForm12")))])]),t._l(t.dataList,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.realName))]),a("td",[t._v(t._s(1===e.cardType?t.$t("proxy.BankCard"):"USTD"))]),a("td",[t._v(t._s(1===e.cardType?e.bankName:"USTD-"+e.chanName))]),a("td",[t._v(t._s(1===e.cardType?e.account:e.usdtAddress))]),a("td",[t._v(t._s(e.phone))]),a("td",[t._v(t._s(e.bankCity))]),a("td",[t._v(t._s(e.email))]),a("td",[t._v(t._s(e.ifscCode))]),a("td",[t._v(t._s(t.getStatus(e)))]),a("td",[t.pageauthoritys.changeStatus?a("Button",{attrs:{disabled:t.disabledByProxyUser},on:{click:function(a){return t.updateBankStatus(e.id,e.isEnable)}}},[t._v(t._s(2!=+e.isEnable?t.$t("proxy.Disable"):t.$t("proxy.Using")))]):t._e(),t._v("   "),t.pageauthoritys.update?a("Button",{attrs:{disabled:t.disabledByProxyUser},on:{click:function(a){return t.edit(e)}}},[t._v(t._s(t.$t("proxy.Change")))]):t._e(),t._v("  "),t.pageauthoritys.delete?[0!=+e.isEnable?a("Poptip",{attrs:{transfer:"",confirm:"",title:t.$t("proxy.deleBankCard")},on:{"on-ok":function(a){return t.deletebank(e.id)}}},[a("Button",{attrs:{disabled:t.disabledByProxyUser}},[t._v(t._s(t.$t("proxy.Delete")))])],1):t._e()]:t._e()],2)])})),t.dataList.length?t._e():a("tr",[a("td",{attrs:{colspan:"10"}},[t._v(t._s(t.$t("Nodata")))])])],2),a("Drawer",{staticClass:"noctxpad",attrs:{"mask-closable":!1,width:"600",closable:"",title:this.editObj.id?t.$t("proxy.changeBankCard"):t.$t("proxy.AddBankCard")},on:{"on-close":function(e){return t.onclose()}},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[t.loading2?a("Spin",{attrs:{fix:""}}):t._e(),a("div",{staticClass:"bankform"},[a("Form",{ref:"form",attrs:{rules:t.rule,model:t.form}},[a("FormItem",{attrs:{label:t.$t("proxy.addBankForm1")}},[a("Select",{model:{value:t.form.cardType,callback:function(e){t.$set(t.form,"cardType",e)},expression:"form.cardType"}},[a("Option",{attrs:{value:"1"}},[t._v("Bank card")]),a("Option",{attrs:{value:"2"}},[t._v("USDT")])],1)],1),a("FormItem",{attrs:{label:t.$t("proxy.addBankForm2"),prop:"realName"}},[a("Input",{model:{value:t.form.realName,callback:function(e){t.$set(t.form,"realName",e)},expression:"form.realName"}})],1),a("FormItem",{attrs:{label:t.$t("proxy.addBankForm3"),prop:"email"}},[a("Input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("FormItem",{attrs:{label:t.$t("proxy.addBankForm8"),prop:"phone"}},[a("Input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),1==+t.form.cardType?[a("FormItem",{attrs:{label:t.$t("proxy.addBankForm9"),prop:"bankName"}},[a("Select",{model:{value:t.form.bankName,callback:function(e){t.$set(t.form,"bankName",e)},expression:"form.bankName"}},t._l(t.cityList,(function(e){return a("Option",{key:e.bankName,attrs:{value:e.bankName}},[t._v(t._s(e.bankName))])})),1)],1),a("FormItem",{attrs:{label:t.$t("proxy.addBankForm10"),prop:"account"}},[a("Input",{model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("FormItem",{attrs:{label:t.$t("proxy.addBankForm11"),prop:"bankCity"}},[a("Input",{model:{value:t.form.bankCity,callback:function(e){t.$set(t.form,"bankCity",e)},expression:"form.bankCity"}})],1),a("FormItem",{attrs:{label:"SWFITCODE",prop:"ifscCode"}},[a("Input",{model:{value:t.form.ifscCode,callback:function(e){t.$set(t.form,"ifscCode",e)},expression:"form.ifscCode"}})],1)]:[a("FormItem",{attrs:{label:t.$t("proxy.addBankForm4")}},[a("Select",{model:{value:t.form.chanName,callback:function(e){t.$set(t.form,"chanName",e)},expression:"form.chanName"}},[a("Option",{attrs:{value:"ERC20"}},[t._v("ERC20")]),a("Option",{attrs:{value:"TRC20"}},[t._v("TRC20")]),a("Option",{attrs:{value:"BEP20"}},[t._v("BEP20")])],1)],1),a("FormItem",{attrs:{label:"USDT-"+t.form.chanName,prop:"usdtAddress"}},[a("Input",{model:{value:t.form.usdtAddress,callback:function(e){t.$set(t.form,"usdtAddress",e)},expression:"form.usdtAddress"}})],1),a("FormItem",{attrs:{label:t.$t("proxy.addBankForm11"),prop:"bankCity"}},[a("Input",{model:{value:t.form.bankCity,callback:function(e){t.$set(t.form,"bankCity",e)},expression:"form.bankCity"}})],1)],a("FormItem",{attrs:{label:t.$t("proxy.addBankForm5")}},[a("Select",{model:{value:t.form.isEnable,callback:function(e){t.$set(t.form,"isEnable",e)},expression:"form.isEnable"}},[a("Option",{attrs:{value:1}},[t._v(t._s(t.$t("proxy.Notlocked")))]),a("Option",{attrs:{value:0}},[t._v(t._s(t.$t("proxy.Locked")))])],1)],1)],2)],1),a("div",{staticClass:"drawerbottom"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(t._s(t.$t("confirm")))])],1)],1)],1)}),[],!1,null,null,null);e.default=i.exports},e90b:function(t,e,a){"use strict";a("9ac7")}}]);