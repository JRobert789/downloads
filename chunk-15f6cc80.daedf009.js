(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-15f6cc80"],{"3ef3":function(t,e,a){"use strict";a("e17a")},a897:function(t,e,a){"use strict";var i=(a("ac1f"),a("5319"),a("d3b7"),a("25f0"),{name:"ckeditor4",props:["value","handleShowChange"],mounted:function(){var t=this;t.ckeditor=window.CKEDITOR.replace(t.id),t.ckeditor.setData(t.value),t.ckeditor.config.language=this.$i18n.locale.toLowerCase(),t.ckeditor.config.filebrowserImageUploadUrl="/api/watermelon/commonUpload/tob/upload",t.ckeditor.config.image_previewText=" ",t.ckeditor.on("change",(function(){t.$emit("input",t.ckeditor.getData())})),t.ckeditor.on("blur",(function(e){t.$emit("on-blur",e)})),t.ckeditor.on("fileUploadResponse",(function(t){t.stop();var e=t.data,a=e.fileLoader.xhr,i=JSON.parse(a.responseText);e.url=i.data.url}))},data:function(){return{id:parseInt(1e4*Math.random()).toString(),ckeditor:null}},watch:{value:function(){this.value!==this.ckeditor.getData()&&this.ckeditor.setData(this.value)},handleShowChange:function(){this.ckeditor.setReadOnly(this.handleShowChange)}},beforeDestroy:function(){this.ckeditor.destroy()}}),s=i,o=a("2877"),n=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("textarea",{attrs:{id:t.id,disabled:t.handleShowChange}})])}),[],!1,null,null,null);e.a=n.exports},e17a:function(t,e,a){},f3a6:function(t,e,a){"use strict";a.r(e);var i=a("5530"),s=(a("159b"),a("a434"),a("d3b7"),a("d81d"),a("b680"),a("2b0e")),o=a("a897"),n=a("9dac"),r={data:function(){return{modalVisible:!1,loading:!1,handleShowChange:!1,upList:[],refreshKey:Math.random(),statusList:[{value:"0",label:this.$t("siteConfig.all")},{value:"1",label:this.$t("siteConfig.open")},{value:"2",label:this.$t("siteConfig.close")}],aboardFm:{},aboardRule:[],columns:[{type:"index",title:this.$t("siteConfig.index"),align:"center"},{title:this.$t("siteConfig.customServicesName"),key:"name"},{title:this.$t("siteConfig.status"),slot:"status"},{title:this.$t("siteConfig.sort"),key:"sortNum"},{title:this.$t("siteConfig.operate"),key:"operation",slot:"action"}],dataList:[],officeList:[{id:"",content:""},{id:"",content:""},{id:"",content:""},{id:"",content:""}],errorList:[]}},computed:{itemtitle:function(){return function(t){switch(t){case"公司介绍":return this.$t("siteConfig.companyIntro");case"推广奖励介绍":return this.$t("siteConfig.priceIntro");case"新手引导":return this.$t("siteConfig.newIntro");case"充值帮助":return this.$t("siteConfig.depositHelp");case"团队佣金":return this.$t("siteConfig.teamCommission")}}},rule:function(){var t=this;return{name:[{type:"string",required:!0,message:this.$t("siteConfig.validator1"),trigger:"blur"}],urlList:[{type:"string",required:!0,validator:function(e,a,i){if(t.errorList=[],a.length){var s=/^(https?|ftp|file):\/\/.+$/;a.forEach((function(e,a){e.url&&s.test(e.url)||t.errorList.push(a)})),i()}else t.$Message.error(t.$t("siteConfig.errorMsg1"))},trigger:"blur"}],sortNum:[{required:!0,type:"number",message:this.$t("siteConfig.validator2"),trigger:"blur"},{pattern:/(^\d{1,3}$)/,message:this.$t("siteConfig.validator3"),trigger:"blur"}]}}},methods:{mChange:function(){this.errorList=[]},delItem:function(t){this.aboardFm.urlList.splice(t,1)},addInput:function(){this.aboardFm.urlList.length>10?this.$Message.error(this.$t("siteConfig.errorMsg2")):this.aboardFm.urlList.push({url:""})},uploadRemove:function(){this.aboardFm.img=""},uploadSuccess:function(t){this.aboardFm.img=t.url},handleBeforeChange:function(){var t=this;return new Promise((function(e){t.$Modal.confirm({title:t.$t("siteConfig.toggleConfirmTitle"),content:t.$t("siteConfig.toggleConfirmContent"),onOk:function(){e()}})}))},handleChangeStatus:function(t){var e=this;this.loading=!0,this.$post("/platform/customerService/tob/updateStatus",{id:t.id,status:t.status},{formatway:"repeat"}).then((function(){e.$Message.success(e.$t("operateSuccess")),e.query()})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading=!1}))},query:function(){var t=this;this.loading=!0,this.$get("/platform/office/tob/queryOverseasOffice").then((function(e){t.officeList=e.agreement,t.dataList=e.customerService.data,t.$nextTick((function(){t.refreshKey=Math.random()}))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},handleSave:function(){var t=this,e=[];this.officeList.map((function(a,i){e.push({id:t.officeList[i].id,content:a.content})})),this.loading=!0,this.$post("/platform/office/tob/saveOverseasOffice",{officeList:JSON.stringify(e)},{formatway:"repeat"}).then((function(){t.$Message.success(t.$t("changeSuccess"))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},handleConfirm:function(){var t=this;this.$refs.aboardFm.validate((function(e){if(e){if(t.errorList.length)return void t.$Message.error(t.$t("siteConfig.urlTips"));t.loading=!0;var a=t.aboardFm.urlList,o=Object(i.a)({},t.aboardFm);delete o.urlList,a.forEach((function(t,e){s.default.set(o,"urlList["+e+"].url",t.url)})),t.$post("/platform/customerService/tob/update",o).then((function(){t.$Message.success(t.$t("changeSuccess")),t.modalVisible=!1,t.query()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.errorList=[],t.loading=!1}))}}))},handleEdit:function(t){var e=this;this.loading||(this.loading=!0,this.$get("/platform/customerService/tob/info",{id:t.id}).then((function(t){e.aboardFm=JSON.parse(JSON.stringify(t)),e.aboardFm.url_list,e.aboardFm.url_list<1&&e.addInput(),e.modalVisible=!0,e.upList.length=0,e.aboardFm.img?e.upList.push({name:"pic",url:e.aboardFm.img}):e.$refs.upRef.handleRemove()})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading=!1})))}},mounted:function(){this.query()},components:{Editor:o.a,upload:n.a},filters:{tofixed:function(t){return(t/100).toFixed(1)}}},l=r,c=(a("3ef3"),a("2877")),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loading?a("Spin",{attrs:{fix:""}}):t._e(),a("div",{key:t.refreshKey},t._l(t.officeList,(function(e,i){return a("Row",{key:i,staticClass:"m-b-20",attrs:{type:"flex",justify:"center"}},[a("Col",{attrs:{span:"2"}},[t._v(t._s(t.itemtitle(e.title))+":")]),a("Col",{attrs:{span:"22"}},[a("Editor",{staticStyle:{width:"800px"},attrs:{handleShowChange:t.handleShowChange},model:{value:e.content,callback:function(a){t.$set(e,"content",a)},expression:"item.content"}})],1)],1)})),1),a("Row",{staticClass:"m-b-20",attrs:{type:"flex",justify:"center"}},[a("Col",{attrs:{span:"2"}},[t._v(t._s(t._f("lang")("siteConfig.customServicesSet"))+":")]),a("Col",{attrs:{span:"22"}},[a("Table",{attrs:{border:"",columns:t.columns,data:t.dataList},scopedSlots:t._u([{key:"status",fn:function(e){var i=e.row;return[a("div",{staticClass:"td-cell"},[a("i-switch",{attrs:{disabled:!t.pageauthoritys.update,"before-change":t.handleBeforeChange,"true-value":1,"false-value":0,size:"large"},on:{"on-change":function(e){return t.handleChangeStatus(i)}},model:{value:i.status,callback:function(e){t.$set(i,"status",e)},expression:"row.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t._f("lang")("siteConfig.enable")))]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t._f("lang")("siteConfig.disable")))])])],1)]}},{key:"action",fn:function(e){var i=e.row;return[a("div",{staticClass:"td-cell"},[t.pageauthoritys.update?a("span",{on:{click:function(e){return t.handleEdit(i)}}},[t._v(t._s(t._f("lang")("siteConfig.update")))]):t._e()])]}}])})],1)],1),a("Row",{staticClass:"m-b-20",attrs:{type:"flex",justify:"center"}},[a("Col",{attrs:{span:"2"}}),a("Col",{attrs:{span:"22"}},[a("Button",{attrs:{type:"primary",disabled:!t.pageauthoritys.save},on:{click:t.handleSave}},[t._v(t._s(t._f("lang")("siteConfig.save")))])],1)],1),a("Modal",{attrs:{width:"750",title:t.$t("siteConfig.update")},on:{"on-visible-change":t.mChange},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[a("Form",{ref:"aboardFm",attrs:{model:t.aboardFm,rules:t.rule,"label-width":100,"label-colon":""}},[a("FormItem",{attrs:{label:t.$t("siteConfig.name"),prop:"name"}},[a("Input",{staticClass:"width-200",attrs:{clearable:"",placeholder:"",maxlength:"30"},model:{value:t.aboardFm.name,callback:function(e){t.$set(t.aboardFm,"name","string"==typeof e?e.trim():e)},expression:"aboardFm.name"}})],1),a("FormItem",{attrs:{label:t.$t("siteConfig.url"),prop:"urlList"}},[t._l(t.aboardFm.urlList,(function(e,i){return a("p",{key:i,staticClass:"url_list"},[a("Input",{staticClass:"width-500",class:{inputerror:-1!==t.errorList.indexOf(i)},attrs:{clearable:"",placeholder:"",maxlength:"200"},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"item.url"}}),i>0?a("Icon",{staticClass:"url_list__icon",attrs:{type:"md-trash"},on:{click:function(e){return t.delItem(i)}}}):t._e()],1)})),a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.addInput}},[t._v(t._s(t._f("lang")("siteConfig.add")))]),t.errorList.length?a("p",{staticStyle:{color:"red"}},[t._v(t._s(t._f("lang")("siteConfig.urlTips")))]):t._e()],2),a("FormItem",{attrs:{label:t.$t("siteConfig.pic"),prop:"img"}},[a("upload",{ref:"upRef",attrs:{list:t.upList},on:{"upload-remove":t.uploadRemove,"upload-success":t.uploadSuccess},model:{value:t.aboardFm.img,callback:function(e){t.$set(t.aboardFm,"img",e)},expression:"aboardFm.img"}})],1),a("FormItem",{attrs:{label:t.$t("siteConfig.sort"),prop:"sortNum"}},[a("InputNumber",{staticClass:"width-200",attrs:{max:999,clearable:"",placeholder:""},model:{value:t.aboardFm.sortNum,callback:function(e){t.$set(t.aboardFm,"sortNum",e)},expression:"aboardFm.sortNum"}})],1),a("FormItem",{attrs:{label:t.$t("siteConfig.status"),prop:"status"}},[a("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.aboardFm.status,callback:function(e){t.$set(t.aboardFm,"status",e)},expression:"aboardFm.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t._f("lang")("siteConfig.enable")))]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t._f("lang")("siteConfig.disable")))])])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){t.modalVisible=!1}}},[t._v(t._s(t._f("lang")("cancel")))]),a("Button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v(t._s(t._f("lang")("confirm")))])],1)],1)],1)}),[],!1,null,null,null);e.default=u.exports}}]);