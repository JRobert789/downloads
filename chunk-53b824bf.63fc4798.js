(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-53b824bf"],{2269:function(s,t,e){"use strict";e.r(t);var r=e("5530"),a=(e("d3b7"),e("2f62")),o={data:function(){var s=this;return{updateform:{oldPassword:"",newPassword:"",surePassword:""},rules:{oldPassword:[{required:!0,validator:function(t,e,r){!e&&s.validate&&r();""!==e&&/^[a-zA-Z](?=.*\d)(?=.*[0-9a-zA-Z])(.{7,11})$/.test(e)&&/^[^<>]+$/.test(e)&&!/(\w)\1{2,}/.test(e)?r():r(new Error(s.$t("systemManager.passwordTip")))}}],newPassword:[{required:!0,validator:function(t,e,r){!e&&s.validate&&r();""!==e&&/^[a-zA-Z](?=.*\d)(?=.*[0-9a-zA-Z])(.{7,11})$/.test(e)&&/^[^<>]+$/.test(e)&&!/(\w)\1{2,}/.test(e)?(""!==s.updateform.surePassword&&s.$refs.updateform.validateField("surePassword"),r()):r(new Error(s.$t("systemManager.passwordTip")))}}],surePassword:[{required:!0,validator:function(t,e,r){!e&&s.validate&&r(),e?e!==s.updateform.newPassword?r(new Error(s.$t("userInfo.twoPasswordsAreInconsistent"))):r():r(new Error(s.$t("userInfo.enterPasswordAgain")))}}]},validate:!0}},methods:Object(r.a)(Object(r.a)({},Object(a.b)("user",["getPublicKey","logout"])),{},{update:function(){var s=this;this.validate=!1,this.$refs.updateform.validate((function(t){t&&s.getPublicKey().then((function(t){return s.$post("/sys/sysUser/tob/updateSysUserPwd",{oldPwd:t(s.updateform.oldPassword),newPwd:t(s.updateform.newPassword)})})).then((function(){s.$Message.success(s.$t("changeSuccess")),s.logout().then((function(){s.$router.push("/login")}))})).catch((function(t){s.$Message.error(t.message)})).finally((function(){}))}))},clear:function(){this.updateform={oldPassword:"",newPassword:"",surePassword:""}}})},n=o,d=(e("bc70"),e("2877")),u=Object(d.a)(n,(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("Form",{ref:"updateform",staticClass:"initUpdatePwd",attrs:{model:s.updateform,"label-position":"right",rules:s.rules,"label-width":120}},[e("FormItem",{attrs:{label:s.$t("userInfo.originalPassword"),prop:"oldPassword"}},[e("Input",{attrs:{type:"password"},model:{value:s.updateform.oldPassword,callback:function(t){s.$set(s.updateform,"oldPassword",t)},expression:"updateform.oldPassword"}}),e("span",[s._v(s._s(s.$t("userInfo.inputOriginalpasswordTip")))])],1),e("FormItem",{attrs:{label:s.$t("userInfo.newPassword"),prop:"newPassword"}},[e("Input",{attrs:{type:"password"},model:{value:s.updateform.newPassword,callback:function(t){s.$set(s.updateform,"newPassword",t)},expression:"updateform.newPassword"}}),e("span",[s._v(s._s(s.$t("userInfo.passwordTip")))])],1),e("FormItem",{attrs:{label:s.$t("userInfo.confirmPassword"),prop:"surePassword"}},[e("Input",{attrs:{type:"password"},model:{value:s.updateform.surePassword,callback:function(t){s.$set(s.updateform,"surePassword",t)},expression:"updateform.surePassword"}}),e("span",[s._v(s._s(s.$t("userInfo.inputConfirmPassword")))])],1),e("FormItem",{attrs:{label:""}},[e("div",{staticClass:"operation-btn-group"},[s.buttonMap["sys/sysUser"]&&s.buttonMap["sys/sysUser"].updateSysUserPwd?e("Button",{attrs:{type:"primary"},on:{click:s.update}},[s._v(s._s(s._f("lang")("confirm")))]):s._e(),e("Button",{on:{click:function(t){return s.clear()}}},[s._v(s._s(s._f("lang")("cancel")))])],1)])],1)}),[],!1,null,null,null);t.default=u.exports},"311f":function(s,t,e){},bc70:function(s,t,e){"use strict";e("311f")}}]);