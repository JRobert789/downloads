(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2cb47bf5"],{"0a97":function(t,e,n){"use strict";n("d01f")},7492:function(t,e,n){"use strict";n.r(e);var a=(n("d3b7"),n("caad"),n("b680"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:"批量名单确认",width:"800","mask-closable":!1},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("Input",{attrs:{type:"textarea",placeholder:"批量操作再次输入用户账户,请以英文逗号隔开, 或者空格分隔账号(最多可以输入1000个账号)"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),n("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("已检测到的用户数: "+t._s(t.users.length)+"/1000")]),n("div",{staticStyle:{color:"#333",background:"#f5f5f5",padding:"10px",border:"1px solid #ccc","border-radius":"8px"}},[t._v(" 温馨提示 "),n("br"),t._v(" 1、系统会自动删除超过1000名的用户账号；"),n("br"),t._v(" 2、无效名单包括测试账号、错误和异常账号，无效账号将会自动被移除；"),n("br"),t._v(" 3、新增/修改名单，需要点击[储存名单]提交资料。 ")]),n("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.ok}},[t._v(" 储存名单 ")]),n("Button",{on:{click:function(e){t.text=""}}},[t._v("清空")]),n("Button",{on:{click:function(e){t.show=!1}}},[t._v("关闭")])],1)],1)}),o=(n("4de4"),n("ac1f"),n("1276"),{name:"batchupdate",props:["value"],data:function(){return{show:!1,list:[],text:"",loading:!1}},methods:{ok:function(){var t=this;this.text?(this.loading=!0,this.$post("/pay/lotPayManualBatUser/addRecordBat",{userNames:this.text}).then((function(e){t.$emit("batchInfo",e),t.show=!1})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))):this.$Message.error("请先输入用户名")}},computed:{users:function(){return this.text.split(/[,\s]/).filter((function(t){return t}))}},watch:{value:function(){this.value?this.show=!0:this.show=!1},show:function(){this.show||this.$emit("input",!1)}}}),i=o,s=n("2877"),l=Object(s.a)(i,a,[],!1,null,null,null).exports,r={name:"remarkmaneger",props:["dataList","value"],data:function(){return{show:!1,show2:!1,editId:"",loading:!1,title11:"",content11:""}},computed:{title:function(){return this.editId?"编辑备注":"新增备注"}},methods:{ok:function(){var t=this;if(this.title11&&this.content11){var e={id:this.editId,title:this.title11,content:this.content11,type:"MANUAL"},n=this.editId?"/pay/lotPayManual/updateRemark":"/pay/lotPayManual/addRemark";this.loading=!0,this.$post(n,e).then((function(){t.$Message.success(t.$t("opSuccess")),t.show2=!1,t.show=!1,t.$emit("refresh")})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))}else this.$Message.info("请确认信息填写完整")},del:function(t){var e=this;this.$post("/pay/lotPayManual/deleteRemark",{id:t.id,type:t.type}).then((function(){e.$Message.success("删除成功"),e.show=!1,e.$emit("refresh")})).catch((function(t){e.$Message.error(t.message)}))}},watch:{show:function(){this.show||this.$emit("input",!1)},value:function(){this.value?this.show=!0:this.show=!1}}},c=Object(s.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Drawer",{attrs:{width:"800",title:"备注管理"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("table",{staticClass:"cmtable"},[n("tr",[n("th",[t._v("标题")]),n("th",[t._v("内容")]),n("th",[t._v("操作")])]),t._l(t.dataList,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.title))]),n("td",[t._v(t._s(e.content))]),n("td",[n("Button",{on:{click:function(n){t.editId=e.id,t.show2=!0,t.title11=e.title,t.content11=e.content}}},[t._v("修改")]),n("Button",{on:{click:function(n){return t.del(e)}}},[t._v("删除")])],1)])}))],2),n("Button",{staticStyle:{"margin-top":"10px"},attrs:{long:""},on:{click:function(e){t.title11="",t.content11="",t.editId="",t.show2=!0}}},[t._v("添加")]),n("Modal",{attrs:{title:t.title},model:{value:t.show2,callback:function(e){t.show2=e},expression:"show2"}},[n("Form",{attrs:{"label-width":60}},[n("FormItem",{attrs:{label:"标题"}},[n("Input",{attrs:{maxlength:"10"},model:{value:t.title11,callback:function(e){t.title11=e},expression:"title11"}})],1),n("FormItem",{attrs:{label:"内容"}},[n("Input",{attrs:{maxlength:"50"},model:{value:t.content11,callback:function(e){t.content11=e},expression:"content11"}})],1),n("div",{staticStyle:{color:"red"}},[t._v(" 字数限制: 标题10个字符以内, 不可与其他备注标题重复; 内容50个字符以内 ")])],1),n("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.ok}},[t._v(" 确定 ")]),n("Button",{on:{click:function(e){t.show2=!1}}},[t._v("关闭")])],1)],1)],1)}),[],!1,null,null,null),u=c.exports,h=(n("159b"),n("a15b"),n("d81d"),{props:["value","id"],data:function(){return{show:!1,loading:!1,reason:"all",pageNo:1,pageSize:10,total:0,dataList:[]}},computed:{selectAll:{get:function(){return this.dataList.every((function(t){return t.selected}))},set:function(){this.selectAll?this.dataList.forEach((function(t){return t.selected=!1})):this.dataList.forEach((function(t){return t.selected=!0}))}}},methods:{download:function(){var t=this,e=this.dataList.filter((function(t){return t.selected})).map((function(t){return t.id})).join(",");e?this.$download("/pay/lotPayManualBatUser/exportFailList",{ids:e}).catch((function(e){t.$Message.error(e.message)})):this.$Message.info("请先选中账号")},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.pageNo=1),this.loading=!0,this.$get("/pay/lotPayManualBatUser/queryFilterPage",{pageNo:this.pageNo,pageSize:this.pageSize,invalidReason:"all"==this.reason?"":this.reason,batchRecordId:this.id}).then((function(e){t.dataList=(e.content||[]).map((function(t){return t.selected=!1,t})),t.total=+e.totalElements})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},pageChange:function(t){this.pageNo=t,this.getData()},pageSizeChange:function(t){this.pageSize=t,this.getData(!0)}},watch:{value:function(){this.value?(this.show=!0,this.getData(!0)):this.show=!1},show:function(){this.show||this.$emit("input","")}}}),d=h,p=Object(s.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Drawer",{attrs:{width:"800",title:"过滤用户名单"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.loading?n("Spin",{attrs:{fix:""}}):t._e(),n("div",{staticStyle:{"margin-bottom":"10px"}},[t._v(" 屏蔽原因 "),n("Select",{staticStyle:{width:"200px"},on:{"on-change":function(e){return t.getData(!0)}},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}},[n("Option",{attrs:{value:"all"}},[t._v("所有")]),n("Option",{attrs:{value:"100"}},[t._v("名单超长")]),n("Option",{attrs:{value:"11"}},[t._v("异常账号")]),n("Option",{attrs:{value:"-1"}},[t._v("错误账号")]),n("Option",{attrs:{value:"2"}},[t._v("测试账号")]),n("Option",{attrs:{value:"1"}},[t._v("试玩账号")])],1),n("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.download}},[t._v("导出选中账号")])],1),n("table",{staticClass:"cmtable"},[n("tr",[n("th",[n("Checkbox",{model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}},[t._v("全选")])],1),n("th",[t._v("账号")]),n("th",[t._v("余额")]),n("th",[t._v("账号类型")]),n("th",[t._v("账号状态")]),n("th",[t._v("过滤原因")])]),t._l(t.dataList,(function(e){return n("tr",{key:e.id},[n("td",[n("Checkbox",{model:{value:e.selected,callback:function(n){t.$set(e,"selected",n)},expression:"item.selected"}})],1),n("td",[t._v(t._s(e.userName))]),n("td"),n("td"),n("td"),n("td",[t._v(t._s(e.invalidReasonStr))])])}))],2),n("div",{staticClass:"tablebottom"},[n("div",{staticClass:"static"},[t._v("共 "+t._s(t.total)+" 条记录, 当前第 "+t._s(t.pageNo)+" 页, 共 "+t._s(t._f("ceil")(t.total/t.pageSize))+" 页")]),n("Page",{staticStyle:{float:"right"},attrs:{current:t.pageNo,total:t.total,"show-sizer":"","show-elevator":"","page-size-opts":[10,20,30,50]},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1)],1)}),[],!1,null,null,null),m=p.exports,f=(n("b0c0"),{props:{value:{default:!1,type:Boolean}},data:function(){return{type:1,batchSubManualTypeList:{102:this.tFn("manualDeposit"),104:this.tFn("negativeAmountReturnToZero"),105:this.tFn("cancelWithdrawal"),116:this.tFn("activityCash"),106:this.tFn("other")},template:{1:this.tFn("manuallyDepositTemplate"),3:this.tFn("negativeAmountZeroingTemplate"),4:this.tFn("cancelPaymentTemplate"),5:this.tFn("otherTemplates")},formModal:{batchSubManualType:102,dictCode:null},file:{},downloadIng:!1,showSpin:!1}},methods:{tFn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$t("fundManager.".concat(t),e)},close:function(){this.$emit("input",!1),this.$refs.upload.value=""},download:function(){var t=this;this.downloadIng=!0,this.$download("/deposit/order/tob/downloadManualTemplate").then((function(){t.$Message.success(t.tFn("downloadSuccessful"))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.downloadIng=!1}))},change:function(t){this.file=t.target.files[0]},upload:function(){var t=this;if(this.file.name){this.showSpin=!0;var e=new FormData;e.append("excelFile",this.file),e.append("subTradeType",this.formModal.batchSubManualType),this.$post("/deposit/order/tob/batchManualDeposit",e,{"Content-type":"multipart/form-data"}).then((function(e){t.$Message.success(e),t.file={}})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.$refs.upload.value="",t.showSpin=!1,t.formModal.dictCode=null,t.$emit("input",!1)}))}else this.$Message.error(this.tFn("pleaseSelectUploadFile"))}},watch:{value:function(){this.value||(this.file={},this.formModal.dictCode=null)}},computed:{value2:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}}),v=f,y=(n("ce69"),Object(s.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{staticClass:"bulkdeposit",attrs:{title:t.tFn("bulkDeposit"),width:500},on:{"on-cancel":t.close},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[n("Form",{ref:"formModal",attrs:{model:t.formModal,"label-width":92}},[n("FormItem",{attrs:{label:t.tFn("depositType"),prop:"groupId"}},[n("Select",{staticClass:"game-select",attrs:{filterable:""},model:{value:t.formModal.batchSubManualType,callback:function(e){t.$set(t.formModal,"batchSubManualType",e)},expression:"formModal.batchSubManualType"}},t._l(t.batchSubManualTypeList,(function(e,a){return n("Option",{key:+a,attrs:{value:+a}},[t._v(t._s(e))])})),1)],1),n("FormItem",{attrs:{label:t.tFn("importingFiles"),prop:"roleId"}},[n("Button",{staticStyle:{float:"right"},attrs:{loading:t.downloadIng},on:{click:function(e){return t.download()}}},[t._v(t._s(t.tFn("downloadTemplate")))]),n("input",{ref:"upload",staticStyle:{display:"none"},attrs:{id:"upload",type:"file",accept:".xls,.xlsx"},on:{change:t.change}}),n("label",{staticClass:"ivu-btn ivu-btn-default",attrs:{for:"upload"}},[n("Icon",{attrs:{type:"ios-cloud-upload-outline",size:"19"}}),n("span",[t._v(t._s(t.tFn("uploadFiles")))])],1),n("p",[t._v(t._s(t.file.name))])],1)],1),n("div",{staticClass:"operation-btn-group",attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:t.close}},[t._v(t._s(t._f("lang")("cancel")))]),n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.upload()}}},[t._v(t._s(t._f("lang")("confirm")))])],1),t.showSpin?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)}),[],!1,null,null,null)),g={name:"onlinein",components:{batchupdate:l,remarkmanager:u,invalidList:m,bulkDeposit:y.exports},data:function(){return{statusList:{11:this.$t("disabled"),41:this.$t("block"),31:this.$t("freeze"),10:this.$t("enabled"),21:"禁止抢单"},userType:{0:this.$t("official"),2:this.$t("test")},loading:!0,loadingBtn:!1,showBulkDeposit:!1,queryloading:!1,showbatchupdate:!1,showremarkmanager:!1,showinvalidlist:!1,userName:"",userSearched:null,batchInfo:null,remarkList:[],remark:"",depositType:"102",inMoney:0,othermoney:{normalMoney:0,otherDiscount:0,discountMoney:0,checkCount:0},othermoneystatus:{normalMoney:!0,otherDiscount:!1,discountMoney:!1,checkCount:!0},ca:!1,cb:!1,loading2:!1}},watch:{inMoney:function(t){111==+this.depositType&&(this.othermoney.checkCount=t)}},methods:{tFn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$t("fundManager.".concat(t),e)},moneyChange:function(t){111==+t&&(this.othermoney.checkCount=this.inMoney)},batchInfoUpdate:function(t){this.batchInfo=t,this.userSearched=null},queryUserName:function(){var t=this;this.loadingBtn||(this.loadingBtn=!0,this.userName?(this.queryloading=!0,this.$post("/user/tob/getUserDetailByName",{userName:this.userName}).then((function(e){t.userSearched=e,t.batchInfo=null})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.queryloading=!1,setTimeout((function(){t.loadingBtn=!1}),1e3)}))):this.$Message.error(this.tFn("queryNameTip")))},checkmoney:function(){var t=this;this.batchInfo?this.loading=!1:(this.ca=!0,this.inMoney&&this.userSearched?+this.inMoney>2e6?this.$Message.error(this.tFn("maximumDepositLimitTip")):this.$post("/pay/lotPayManual/checkMoney",{userId:this.userSearched.userId,money:this.inMoney}).then((function(e){e.checkCount=0,t.othermoney.normalMoney=e.normalMoney,t.othermoney.otherDiscount=e.otherDiscount,t.othermoney.discountMoney=e.discountMoney,t.othermoney.modeId=e.modeId,["105","110","112"].includes(t.depositType)&&(t.othermoney.checkCount=e.betMoney||0),t.loading=!1,t.cb&&(t.ca=!1,t.confirm())})).catch((function(e){t.$Message.error(e.message),t.loading=!0})).finally((function(){t.ca=!1,t.cb=!1})):this.userSearched||(this.$Message.error(this.tFn("queryNameTip")),this.$nextTick((function(){t.inMoney=0}))))},getConfig:function(){},confirm:function(){var t=this;if(!this.loading2)if(this.inMoney<=0)this.$Message.error(this.tFn("amountTip"));else{var e={userId:this.userSearched.id,depositMoney:(100*this.inMoney).toFixed(),remark:this.remark,subTradeType:this.depositType},n="";if(this.userSearched)n="/deposit/order/tob/submitManualDepositOrder";else{if(!this.batchInfo)return void this.$Message.error(this.tFn("checkInputTip"));if(this.batchInfo.validNum<=0)return void this.$Message.info(this.tFn("depositNumberTip"));n="/pay/lotPayManualBatUser/addManualIncome",e.recordId=this.batchInfo.id,e.userStatusFlag="F",e.modeId="",e.userId="",e.userName=""}var a=this.tFn("confirmManualDepositTip",{m:this.inMoney,u:this.userName});this.batchInfo&&(a=this.tFn("confirmManualDepositTip",{m:this.inMoney,u:this.batchInfo.validNum})),n&&(this.loading2=!0,setTimeout((function(){var o=function a(o){var i="Escape",s=o&&o.key;if(!s||["Enter",i].includes(s)){if(document.removeEventListener("keydown",a),t.$Modal.remove(),i!==s)return setTimeout((function(){t.loading2=!1}),300),t.$post(n,e,{"Content-type":"application/json"}).then((function(){t.$Message.success(t.$t("opSuccess")),t.clear()})).catch((function(e){t.$Message.error(e.message)}));t.loading2=!1}};document.addEventListener("keydown",o),t.$Modal.confirm({title:t.tFn("manualDeposit"),content:a,onOk:function(){document.removeEventListener("keydown",o),o()},onCancel:function(){document.removeEventListener("keydown",o),t.loading2=!1}})}),300))}},clear:function(){this.userSearched=null,this.batchInfo=null,this.userName="",this.inMoney=0,this.othermoney={normalMoney:0,otherDiscount:0,discountMoney:0,checkCount:0},this.othermoneystatus={normalMoney:!1,otherDiscount:!1,discountMoney:!1,checkCount:!1},111!=+this.depositType&&110!=+this.depositType||(this.othermoneystatus.checkCount=!0),this.remark=""}},mounted:function(){this.$route.query.username&&(this.userName=this.$route.query.username)}},b=g,_=(n("0a97"),Object(s.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"onlinein"},[n("Form",{attrs:{"label-width":200}},[n("FormItem",{attrs:{label:t.tFn("accountName")}},[n("Input",{staticStyle:{width:"200px"},attrs:{loading:t.queryloading},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.queryUserName.apply(null,arguments)}},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),n("Button",{staticStyle:{margin:"0 10px"},attrs:{type:"primary",loading:t.loadingBtn},on:{click:t.queryUserName}},[t._v(t._s(t._f("lang")("query")))]),n("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(e){t.showBulkDeposit=!0}}},[t._v(t._s(t.tFn("bulkDeposit")))])],1),t.userSearched?[n("FormItem",{class:{"text-red":0!=+t.userSearched.isDemo},attrs:{label:t.tFn("accountType")}},[t._v(t._s(t.userType[t.userSearched.isDemo]))]),n("FormItem",{attrs:{label:t.tFn("hierarchicalPath")}},[t._v(t._s(t.userSearched.path))]),n("FormItem",{attrs:{label:t.tFn("userStatus")}},[t._v(t._s(t.statusList[t.userSearched.status]))]),n("FormItem",{attrs:{label:t.tFn("accountBalance")}},[t._v(t._s(t._f("to100fix")(t.userSearched.totalAmount)))]),n("FormItem",{attrs:{label:t.$t("remark")}},[t._v(t._s(t.userSearched.remark))])]:t._e(),t.batchInfo?[n("FormItem",{attrs:{label:t.tFn("operationType")}},[t._v(t._s(t.tFn("batchListDeposit")))]),n("FormItem",{attrs:{label:t.tFn("numberOfDeposits")}},[t._v(t._s(t.batchInfo.validNum))]),n("FormItem",{attrs:{label:t.tFn("filterUsers")}},[n("Button",{attrs:{type:"text"},on:{click:function(e){t.showinvalidlist=!0}}},[t._v(t._s(t.batchInfo.filterNum))])],1)]:t._e(),n("FormItem",{attrs:{label:t.tFn("depositType")}},[n("Select",{staticStyle:{width:"200px"},on:{"on-change":t.moneyChange},model:{value:t.depositType,callback:function(e){t.depositType=e},expression:"depositType"}},[n("Option",{attrs:{value:"102"}},[t._v(t._s(t.tFn("manualDeposit")))]),n("Option",{attrs:{value:"104"}},[t._v(t._s(t.tFn("negativeAmountReturnToZero")))]),n("Option",{attrs:{value:"105"}},[t._v(t._s(t.tFn("cancelWithdrawal")))]),n("Option",{attrs:{value:"116"}},[t._v(t._s(t.tFn("activityCash")))]),n("Option",{attrs:{value:"106"}},[t._v(t._s(t.tFn("other")))])],1)],1),n("FormItem",{attrs:{label:t.tFn("depositAmountUSD")}},[n("InputNumber",{staticStyle:{width:"302px"},attrs:{min:0,precision:2,"active-change":!1},model:{value:t.inMoney,callback:function(e){t.inMoney=e},expression:"inMoney"}}),n("span",{staticClass:"nibefaft"},[t._v("USD")])],1),n("FormItem",{attrs:{label:t.$t("remark")}},[n("Input",{staticStyle:{width:"338px"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.confirm.apply(null,arguments)}},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1),t.pageauthoritys.addManualIncome?n("FormItem",[n("Button",{attrs:{disabled:t.queryloading,type:"primary"},on:{click:t.confirm}},[t._v(t._s(t._f("lang")("confirm")))])],1):t._e()],2),n("div",{staticClass:"color_red"},[n("p",[t._v(t._s(t.tFn("includeInTheReportTip")))]),n("p",[t._v(t._s(t.tFn("depositManualDepositTip")))]),n("p",[t._v(t._s(t.tFn("notCountedTip")))]),n("p",[t._v(t._s(t.tFn("activityCashTip")))])]),n("batchupdate",{on:{batchInfo:t.batchInfoUpdate},model:{value:t.showbatchupdate,callback:function(e){t.showbatchupdate=e},expression:"showbatchupdate"}}),n("remarkmanager",{attrs:{dataList:t.remarkList},on:{refresh:function(e){return t.getConfig()}},model:{value:t.showremarkmanager,callback:function(e){t.showremarkmanager=e},expression:"showremarkmanager"}}),n("invalidList",{attrs:{id:t.batchInfo?t.batchInfo.id:""},model:{value:t.showinvalidlist,callback:function(e){t.showinvalidlist=e},expression:"showinvalidlist"}}),n("bulk-deposit",{model:{value:t.showBulkDeposit,callback:function(e){t.showBulkDeposit=e},expression:"showBulkDeposit"}})],1)}),[],!1,null,null,null));e.default=_.exports},cc35:function(t,e,n){},ce69:function(t,e,n){"use strict";n("cc35")},d01f:function(t,e,n){}}]);