(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1f0283b6"],{"0192":function(t,e,r){"use strict";r.r(e);var a=r("5530"),n=(r("d3b7"),r("25f0"),r("d81d"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{attrs:{title:t.title},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[r("Form",{ref:"formModal",attrs:{model:t.form,rules:t.rule,"label-width":60}},[r("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:t.$t("userScore.score")}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0,max:1e7,precision:0},model:{value:t.form.scoreVal,callback:function(e){t.$set(t.form,"scoreVal",e)},expression:"form.scoreVal"}}),r("p",[t._v(t._s(t._f("lang")("userScore.scoreTips")))])],1),r("FormItem",{attrs:{label:t.$t("remark"),prop:"remark"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:10}},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(e){return t.$emit("input",!1)}}},[t._v(t._s(t._f("lang")("cancel")))]),r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v(t._s(t._f("lang")("confirm")))])],1)],1)}),o={props:{value:{default:!1,type:Boolean},detail:{default:null,type:Object}},computed:{title:function(){return this.detail.type?this.$t("userScore.takeOutPointsTip",{name:this.detail.userName}):this.$t("userScore.depositPointsTip",{name:this.detail.userName})},value2:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},data:function(){return{form:{scoreVal:"",remark:""}}},methods:{save:function(){var t=this;this.$refs.formModal.validate((function(e){if(e){if(!t.form.scoreVal)return void t.$Message.error(t.$t("comInputTip",{message:t.$t("userScore.score")}));t.$post("/user/score/tob/manualUpdate",Object(a.a)({userId:t.detail.userId,type:t.detail.type},t.form)).then((function(){t.$Message.success(t.$t("success")),t.$emit("save")})).catch((function(e){t.$Message.error(e.message)}))}}))}},watch:{value:function(){this.value||(this.form.scoreVal="",this.$refs.formModal.resetFields())}}},s=o,i=r("2877"),c=Object(i.a)(s,n,[],!1,null,null,null).exports,l=(r("ac1f"),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=");var u=function(t){return function(t){var e,r,a,n,o,s;for(e="",a=t.length,r=0;r<a;)switch(n=t.charCodeAt(r++),n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=t.charAt(r-1);break;case 12:case 13:o=t.charCodeAt(r++),e+=String.fromCharCode((31&n)<<6|63&o);break;case 14:o=t.charCodeAt(r++),s=t.charCodeAt(r++),e+=String.fromCharCode((15&n)<<12|(63&o)<<6|(63&s)<<0)}return e}(function(t){var e,r,a,n,o="",s="",i="",c=0;if(t.length%4!=0)return"";if(/[^A-Za-z0-9\+\/\=]/g.exec(t))return"";do{e=l.indexOf(t.charAt(c++))<<2|(a=l.indexOf(t.charAt(c++)))>>4,r=(15&a)<<4|(n=l.indexOf(t.charAt(c++)))>>2,s=(3&n)<<6|(i=l.indexOf(t.charAt(c++))),o+=String.fromCharCode(e),64!=n&&(o+=String.fromCharCode(r)),64!=i&&(o+=String.fromCharCode(s)),e=r=s="",a=n=i=""}while(c<t.length);return o}(t))},m={data:function(){var t=this;return{form:{userName:"",scoreStart:"",scoreEnd:""},columns:[{title:this.tFn("userAccount"),slot:"userName"},{title:this.tFn("realName"),key:"realName"},{title:this.$t("status"),key:"status",count:function(e){return t.$utils.formatAccountStatus(e)}},{title:this.tFn("subordinate"),key:"subLevelCount"},{title:this.tFn("directAgent"),key:"highLevelAccount",count:function(e){return"default"===e?t.tFn("owner"):e}},{title:this.tFn("level"),key:"level"},{title:this.tFn("rank"),key:"rankLevel"},{title:this.tFn("gradeTitle"),key:"rankName"},{title:this.tFn("score"),key:"score"},{title:this.$t("operation"),key:"operation",slot:"operation"}],dataList:[],totalElements:0,pageNum:1,pageSize:10,showSpin:!1,showModal:!1,detail:{userName:"",type:0},level:[]}},methods:{tFn:function(t,e){return this.$t("userScore.".concat(t),e)},goback:function(t){this.query(1,t)},flow:function(t){this.$router.push({path:"pointsflow/"+t.userName})},search:function(){this.pageNum=1,this.query()},pageSizeChange:function(t){this.pageSize=t,this.query(1)},query:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.form,o=n.scoreStart,s=n.scoreEnd;if(o.toString()&&s.toString()&&+o>+s)this.$Message.error(this.tFn("inputScoreErrorTip"));else{this.showSpin=!0;var i=Object.assign({},this.form);this.$get("/user/score/tob/queryUserScore",Object(a.a)(Object(a.a)({},i),{},{limit:this.pageSize,page:e,highLevelAccount:r})).then((function(e){var r=e.resultPage,a=e.levelPathMap;if(r){var n=r.content;n.map((function(t){t.realName=t.realName?u(t.realName):""})),t.dataList=n,t.totalElements=+r.totalElements||0}t.level=a?"default"===a[0].userName?[]:a:[]})).catch((function(e){t.dataList=[],t.totalElements=0,t.pageNum=1,t.$Message.error(e.message)})).finally((function(){t.showSpin=!1}))}},add:function(t){this.showModal=!0,t.type=0,this.detail=t},edit:function(t){this.showModal=!0,t.type=1,this.detail=t},save:function(){this.showModal=!1,this.query(this.pageNum)},join:function(t){this.form.userName="",this.pageNum=1,this.query(1,t.userName)},clear:function(){this.form={userName:"",scoreStart:"",scoreEnd:""}}},components:{modal:c},mounted:function(){this.query()}},f=m,p=(r("3c2a"),Object(i.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"userpoints"},[r("Form",{attrs:{model:t.form,inline:""}},[r("FormItem",{attrs:{label:t.tFn("userAccount"),"label-width":100}},[r("Input",{attrs:{type:"text"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1),r("div",{staticClass:"source"},[r("span",[t._v(t._s(t.tFn("score")))]),r("FormItem",[r("InputNumber",{staticStyle:{width:"120px"},attrs:{min:0,max:1e7,precision:0},model:{value:t.form.scoreStart,callback:function(e){t.$set(t.form,"scoreStart",e)},expression:"form.scoreStart"}})],1),r("span",[t._v("~")]),r("FormItem",[r("InputNumber",{staticStyle:{width:"120px"},attrs:{min:0,max:1e7,precision:0},model:{value:t.form.scoreEnd,callback:function(e){t.$set(t.form,"scoreEnd",e)},expression:"form.scoreEnd"}})],1)],1),r("FormItem",[r("Button",{attrs:{type:"primary",icon:"md-search"},on:{click:function(e){return t.search()}}},[t._v(t._s(t._f("lang")("search")))])],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.clear()}}},[t._v(t._s(t._f("lang")("clearSearch")))])],1)],1),r("div",{staticClass:"level"},[r("span",[t._v(t._s(t.tFn("levelPath"))+"ï¼š")]),r("span",[r("a",{on:{click:function(e){return t.goback("default")}}},[t._v(t._s(t.tFn("owner")))])]),t._l(t.level,(function(e,a){return r("span",{key:a},[r("a",{on:{click:function(r){return t.goback(e.userName)}}},[t._v(t._s(e.userName))])])}))],2),r("m-table",{attrs:{size:"small",columns:t.columns,data:t.dataList},scopedSlots:t._u([{key:"userName",fn:function(e){var a=e.row;return[r("span",[t._v(" "+t._s(a.userName)+" ")])]}},{key:"remake",fn:function(e){var a=e.row;return[r("Poptip",{attrs:{content:a.remake,title:t.$t("remarks"),placement:"right"}},[r("Icon",{staticClass:"department-remark",attrs:{type:"ios-information-circle"}})],1)]}},{key:"operation",fn:function(e){var a=e.row;return[r("div",{staticClass:"operation-btn-group"},[t.pageauthoritys.depositScore?r("Tooltip",{attrs:{content:t.tFn("depositPoints"),placement:"top"}},[r("Button",{attrs:{size:"small",icon:"md-exit"},on:{click:function(e){return t.add(a)}}})],1):t._e(),t.pageauthoritys.takeOutScore?r("Tooltip",{attrs:{content:t.tFn("takeOutPoints"),placement:"top"}},[r("Button",{attrs:{size:"small",icon:"md-share-alt"},on:{click:function(e){return t.edit(a)}}})],1):t._e(),t.pageauthoritys.scoreStream?r("Tooltip",{attrs:{content:t.tFn("integralFlow"),placement:"top"}},[r("Button",{attrs:{size:"small",icon:"md-paper"},on:{click:function(e){return t.flow(a)}}})],1):t._e(),t.pageauthoritys.lowUser?r("Tooltip",{attrs:{content:t.tFn("subordinate"),placement:"top"}},[r("Button",{attrs:{size:"small",icon:"md-people"},on:{click:function(e){return t.join(a)}}})],1):t._e()],1)]}}])}),r("m-page",{attrs:{total:t.totalElements,pageSize:t.pageSize},on:{"on-change":t.query,"on-page-size-change":t.pageSizeChange},model:{value:t.pageNum,callback:function(e){t.pageNum=e},expression:"pageNum"}}),t.showSpin?r("Spin",{attrs:{size:"large",fix:""}}):t._e(),r("modal",{attrs:{detail:t.detail},on:{save:function(e){return t.save()}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}})],1)}),[],!1,null,null,null));e.default=p.exports},3526:function(t,e,r){},"3c2a":function(t,e,r){"use strict";r("3526")}}]);