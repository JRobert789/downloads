(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ce68a5e2"],{"1b36":function(t,e,i){},"1c93":function(t,e,i){"use strict";i.r(e);var n=i("5530"),r={name:"turntableSet",components:{editor:(i("d3b7"),i("a897")).a},data:function(){return{id:"",ruleInline:{title:[{required:!0,message:this.$t("inviteTurntable.ActivityEmpty"),trigger:"blur",type:"string"}],withdrawalConditions:[{required:!0,message:this.$t("inviteTurntable.RewardAmountEmpty"),trigger:"blur",type:"number"}],inviteTitle:[{required:!0,message:this.$t("inviteTurntable.InvitationCopyEmpty"),trigger:"blur"}],invitePhone:[{required:!0,message:this.$t("inviteTurntable.PhoneInformationEmpty"),trigger:"blur"},{pattern:/^(\d+,){0,499}\d+$/,message:this.$t("inviteTurntable.wrongFormat"),trigger:"blur"}],inviteUrl:[{required:!0,message:this.$t("inviteTurntable.inviteUrl1"),trigger:"blur"},{pattern:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\*\+,;=.]+$/,message:this.$t("inviteTurntable.inviteUrl2"),trigger:"blur"}]},loading:!1,showSpin:!1,handleShowChange:!1,formItem:{title:"",withdrawalConditions:0,inviteTitle:"",invitePhone:"",remark:"",inviteUrl:"",createTime:""}}},methods:{radioChange:function(t){this.initQuery(t)},tFn:function(t,e){return this.$t("room.".concat(t),e)},initQuery:function(t){var e=this;this.$get("/pddRoulette/tob/getRouletteConfig",Object(n.a)({},{siteId:0})).then((function(t){"{}"!==JSON.stringify(t)?(e.formItem=t,e.formItem.withdrawalConditions=t.withdrawalConditions/100,e.formItem.createTime=t.createTime||e.$utils.formatDate(new Date,"YYYY-MM-DD hh:mm:ss"),e.id=t.id):(e.formItem={title:"",withdrawalConditions:0,inviteTitle:"",invitePhone:"",remark:"",inviteUrl:""},e.id="")})).catch((function(t){e.formItem={title:"",withdrawalConditions:0,inviteTitle:"",invitePhone:"",remark:"",inviteUrl:""},e.id="",e.$Message.error(t.message)}))},handleSave:function(){var t=this;this.$refs.formItem.validate((function(e){if(e){var i=t.formItem;i.remark=t.$utils.utf16ToEntities(t.formItem.remark),i.withdrawalConditions=100*t.formItem.withdrawalConditions,i.url="",t.id&&(i.id=t.id),i.remark||t.$Message.error(t.$t("inviteTurntable.ActivityRulesEmpty")),i.siteId=0,t.$post("/pddRoulette/tob/saveOrUpdateRouletteConfig",i,{"Content-type":"application/json;charset=UTF-8"}).then((function(e){t.initQuery(e),t.$Message.success(t.$t("success"))})).catch((function(e){t.$Message.error(e.message),t.formItem.withdrawalConditions=t.formItem.withdrawalConditions/100})).finally((function(){t.showSpin=!1}))}}))}},mounted:function(){this.initQuery(1)}},a=r,o=(i("827a"),i("2877")),l=Object(o.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"turntableSet"},[t.loading?i("Spin",{attrs:{fix:""}}):t._e(),i("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":100,rules:t.ruleInline}},[i("FormItem",{attrs:{label:t.$t("inviteTurntable.eventName"),prop:"title"}},[i("Input",{staticStyle:{width:"300px"},attrs:{"active-change":!1},model:{value:t.formItem.title,callback:function(e){t.$set(t.formItem,"title",e)},expression:"formItem.title"}})],1),i("FormItem",{attrs:{label:t.$t("inviteTurntable.RewardAmount"),prop:"withdrawalConditions"}},[i("InputNumber",{staticStyle:{width:"300px"},attrs:{"active-change":!1,max:99999999999,min:0},model:{value:t.formItem.withdrawalConditions,callback:function(e){t.$set(t.formItem,"withdrawalConditions",e)},expression:"formItem.withdrawalConditions"}})],1),i("FormItem",{attrs:{label:t.$t("inviteTurntable.invitationCopy"),prop:"inviteTitle"}},[i("Input",{staticStyle:{width:"300px"},attrs:{"active-change":!1},model:{value:t.formItem.inviteTitle,callback:function(e){t.$set(t.formItem,"inviteTitle",e)},expression:"formItem.inviteTitle"}})],1),i("FormItem",{attrs:{label:t.$t("inviteTurntable.inviteUrl"),prop:"inviteUrl"}},[i("Input",{staticStyle:{width:"300px"},attrs:{"active-change":!1},model:{value:t.formItem.inviteUrl,callback:function(e){t.$set(t.formItem,"inviteUrl",e)},expression:"formItem.inviteUrl"}})],1),i("FormItem",{staticClass:"virtualWinningTextarea",attrs:{label:t.$t("inviteTurntable.PhoneInformation"),prop:"invitePhone"}},[i("Input",{staticStyle:{width:"600px"},attrs:{type:"textarea",rows:25},model:{value:t.formItem.invitePhone,callback:function(e){t.$set(t.formItem,"invitePhone",e)},expression:"formItem.invitePhone"}}),i("span",[t._v(t._s(t.$t("inviteTurntable.illustrate")))]),i("p",[t._v(t._s(t.$t("inviteTurntable.example"))+":")]),i("span",[t._v("886123456,8869423141,......")])],1),i("FormItem",{attrs:{label:t.$t("inviteTurntable.ActivityRules")}},[i("editor",{staticStyle:{width:"600px"},attrs:{handleShowChange:t.handleShowChange},model:{value:t.formItem.remark,callback:function(e){t.$set(t.formItem,"remark",e)},expression:"formItem.remark"}})],1),i("FormItem",[i("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handleSave("formItem")}}},[t.loading?i("span"):i("span",[t._v(t._s(t.$t("save")))])])],1)],1),t.showSpin?i("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)}),[],!1,null,null,null);e.default=l.exports},"827a":function(t,e,i){"use strict";i("1b36")},a897:function(t,e,i){"use strict";var n=(i("ac1f"),i("5319"),i("d3b7"),i("25f0"),{name:"ckeditor4",props:["value","handleShowChange"],mounted:function(){var t=this;t.ckeditor=window.CKEDITOR.replace(t.id),t.ckeditor.setData(t.value),t.ckeditor.config.language=this.$i18n.locale.toLowerCase(),t.ckeditor.config.filebrowserImageUploadUrl="/api/watermelon/commonUpload/tob/upload",t.ckeditor.config.image_previewText=" ",t.ckeditor.on("change",(function(){t.$emit("input",t.ckeditor.getData())})),t.ckeditor.on("blur",(function(e){t.$emit("on-blur",e)})),t.ckeditor.on("fileUploadResponse",(function(t){t.stop();var e=t.data,i=e.fileLoader.xhr,n=JSON.parse(i.responseText);e.url=n.data.url}))},data:function(){return{id:parseInt(1e4*Math.random()).toString(),ckeditor:null}},watch:{value:function(){this.value!==this.ckeditor.getData()&&this.ckeditor.setData(this.value)},handleShowChange:function(){this.ckeditor.setReadOnly(this.handleShowChange)}},beforeDestroy:function(){this.ckeditor.destroy()}}),r=n,a=i("2877"),o=Object(a.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("textarea",{attrs:{id:t.id,disabled:t.handleShowChange}})])}),[],!1,null,null,null);e.a=o.exports}}]);