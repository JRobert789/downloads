(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3eb8aaba"],{5241:function(t,e,n){},"593e":function(t,e,n){"use strict";n.r(e);var a=(n("99af"),n("b680"),n("d3b7"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Drawer",{attrs:{title:t.drawerTitle,width:"750","mask-closable":!1},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[n("Form",{ref:"form",attrs:{model:t.form,rules:t.rule,"label-width":220}},[n("FormItem",{attrs:{label:t.tfn("teamMemberCount"),prop:"teamMemberCount"}},[n("InputNumber",{staticClass:"rl_input",attrs:{min:1,max:99999999,precision:0},model:{value:t.form.teamMemberCount,callback:function(e){t.$set(t.form,"teamMemberCount",e)},expression:"form.teamMemberCount"}}),t._v(" "+t._s(t._f("lang")("accountReport.people"))+" ")],1),n("FormItem",{attrs:{label:t.tfn("rewardAmount"),prop:"awardMoney"}},[n("Input",{staticStyle:{width:"150px"},attrs:{type:"number"},on:{"on-blur":function(e){t.form.awardMoney=t.zzNumber(t.form.awardMoney)}},model:{value:t.form.awardMoney,callback:function(e){t.$set(t.form,"awardMoney",e)},expression:"form.awardMoney"}})],1),n("FormItem",{attrs:{label:t.$t("status")}},[n("i-switch",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v(t._s(t._f("lang")("confirm")))]),n("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.close()}}},[t._v(t._s(t._f("lang")("cancel")))])],1)],1),t.loading?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)}),r=(n("ac1f"),n("466d"),n("5319"),n("a9e3"),{props:{value:{default:!1,type:Boolean},detail:{default:null,type:Object}},data:function(){return{drawerTitle:"",loading:!1,form:{teamMemberCount:null,awardMoney:null,status:!1},showSpin:!1,rule:{teamMemberCount:[{type:"number",required:!0,message:this.tfn("pleaseEnterTheNo"),trigger:"blur"}],awardMoney:[{type:"number",min:.01,max:99999999.99,required:!0,message:this.tfn("pleaseEnterTheAmount2"),trigger:"blur"}]}}},methods:{tfn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$t("depositReward.".concat(t),e)},zzNumber:function(t){if(t){var e=(t=String(t)).match(/^\d*(\.?\d{0,2})/g)[0];return"."===e.charAt(0)?e.replace(/./,""):"0"===e.charAt(0)&&"."!==e.charAt(1)&&e.length>=2?parseFloat(e):Number(e)}},init:function(){if(this.form={teamMemberCount:null,awardMoney:null,status:!1},this.$refs.form.resetFields(),this.detail){var t=this.detail,e=t.teamMemberCount,n=t.awardMoney,a=t.status;this.form={teamMemberCount:e,awardMoney:+(n/100).toFixed(2),status:!!a}}var r=Boolean(this.detail);this.drawerTitle=r?this.tfn("edit"):this.tfn("new")},close:function(){this.clear(),this.$emit("input",!1)},clear:function(){this.form={teamMemberCount:null,awardMoney:null,status:!1}},save:function(){var t=this;this.$refs.form.validate((function(e){if(e){if(t.loading)return;t.loading=!0;var n=Boolean(t.detail),a=n?"/activity/growReward/tob/update":"/activity/growReward/tob/save",r=t.form,i=r.teamMemberCount,s=r.awardMoney,o=r.status,u={};u.teamMemberCount=i,u.awardMoney=(100*s).toFixed(),u.status=o?"1":"0",n&&(u.id=t.detail.id),t.$post(a,u).then((function(){t.$Message.success(n?t.$t("rebate.editSucceeded"):t.$t("rebate.addSucceeded")),t.$emit("save"),t.$emit("input",!1)})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))}}))}},computed:{value2:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{value:function(t){t?this.init():this.clear()}}}),i=r,s=(n("c45c"),n("2877")),o={name:"teamRewardSettings",data:function(){return{detail:null,showDrawer:!1,columns:[{title:this.tfn("serialNumber"),slot:"key",width:80,align:"center"},{title:"".concat(this.tfn("teamMemberCount"),"(").concat(this.$t("accountReport.people"),")"),key:"teamMemberCount",width:250,align:"center"},{title:this.tfn("rewardAmount"),key:"awardMoney",count:function(t){return(t/100).toFixed(2)},align:"center"},{title:this.tfn("createTime"),key:"createTime",align:"center"},{title:this.$t("status"),slot:"status",align:"center"},{title:this.$t("operation"),slot:"operation",align:"center"}],dataList:[],showSpin:!1}},components:{drawer:Object(s.a)(i,a,[],!1,null,"3976d90e",null).exports},methods:{cancel:function(){},tfn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$t("depositReward.".concat(t),e)},edit:function(t){this.detail=t,this.showDrawer=!0},save:function(){this.query()},query:function(){var t=this;this.showSpin=!0,this.$get("/activity/growReward/tob/list").then((function(e){t.dataList=e||[],t.dataList.forEach((function(t){t.status=!!t.status}))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.showSpin=!1}))},statusChange:function(t){var e=this;if(!this.showSpin){this.showSpin=!0;var n={status:t.status?"1":"0",id:t.id};this.$post("/activity/growReward/tob/update",n).then((function(){e.$Message.success(e.$t("opSuccess"))})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.showSpin=!1,e.query()}))}},del:function(t){var e=this;this.showSpin=!0,this.$post("/activity/growReward/tob/delete",{id:t}).then((function(){e.$Message.success(e.$t("deleteSuccess"))})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.showSpin=!1,e.query()}))}},watch:{showDrawer:function(t){t||(this.detail=null)}},mounted:function(){this.query()}},u=o,c=(n("ee18"),Object(s.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reward__settings"},[n("Form",{staticClass:"rs_form",attrs:{inline:""}},[n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(e){t.showDrawer=!t.showDrawer}}},[t._v(t._s(t.tfn("addedFirstDepositSettings")))])],1)],1),n("m-table",{ref:"selection",attrs:{border:"",columns:t.columns,data:t.dataList,"no-data-text":t.$t("rebate.noData")},scopedSlots:t._u([{key:"key",fn:function(e){var a=e.index;return[n("span",[t._v(t._s(a+1))])]}},{key:"status",fn:function(e){var a=e.row;return[n("i-switch",{on:{"on-change":function(e){return t.statusChange(a)}},model:{value:a.status,callback:function(e){t.$set(a,"status",e)},expression:"row.status"}})]}},{key:"operation",fn:function(e){var a=e.row;return[n("Button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"md-create"},on:{click:function(e){return t.edit(a)}}}),n("Poptip",{attrs:{transfer:"",confirm:"",title:t.$t("deleteTip")},on:{"on-ok":function(e){return t.del(a.id)},"on-cancel":t.cancel}},[n("Button",{attrs:{icon:"ios-trash"}})],1)]}}])}),t.showSpin?n("Spin",{attrs:{size:"large",fix:""}}):t._e(),n("drawer",{attrs:{detail:t.detail},on:{save:function(e){return t.save()}},model:{value:t.showDrawer,callback:function(e){t.showDrawer=e},expression:"showDrawer"}})],1)}),[],!1,null,"1150ba31",null));e.default=c.exports},c45c:function(t,e,n){"use strict";n("e537")},e537:function(t,e,n){},ee18:function(t,e,n){"use strict";n("5241")}}]);