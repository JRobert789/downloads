(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d2b7d1e8"],{"29f36":function(t,e,a){"use strict";a("6032")},"486d":function(t,e,a){"use strict";a.r(e);var n=a("5530"),o=(a("ac1f"),a("841c"),a("d3b7"),a("159b"),a("a9e3"),a("d81d"),a("b680"),{name:"memberDetail",data:function(){var t=this;return{exlModal:!1,userName:"",timeArr:this.getToday(),columns:[{title:this.tFn("date"),key:"lotteryDate"},{title:this.tFn("username"),key:"userName"},{title:this.$t("inviteTurntable.LotteryType"),key:"type"},{title:this.$t("inviteTurntable.WinningAmount"),key:"money"}],dataList:[],columns2:[{title:this.$t("documentclassify.time"),key:"lotteryDate"},{title:this.tFn("cname"),key:"prizeName"},{title:this.tFn("camount"),key:"prizeValue",count:function(t){return t/100}},{title:this.tFn("ctype"),slot:"prizeType"}],dataList2:[],loading:!1,pageSize:10,pageNum:1,totalElements:null,showModal:!1,dateOption:{disabledDate:function(e){var a=new Date(e),n=t.$utils.$changeTime();return a>n||a<n-2592e6}}}},computed:{},methods:{tFn:function(t,e){return this.$t("room.".concat(t),e)},pageSizeChange:function(t){this.pageSize=t,this.search(1)},showGoodType:function(t){return 1==t?this.tFn("redenvelope"):0==t?this.tFn("property"):"-"},showRecord:function(t){this.showModal=!0,this.queryRecord(t)},queryRecord:function(t){var e=this;this.loading=!0,this.$post("/pddRoulette/tob/queryLotteryRecord",{userId:t.userId,lotteryDate:t.lotteryDate,siteId:0}).then((function(t){e.dataList2=t,e.dataList2.forEach((function(t){2===Number(t.prizeType)&&(t.prizeName=e.tFn("sorryLosing"))}))})).catch((function(t){e.dataList2=[],e.$Message.error(t.message)})).finally((function(){e.loading=!1}))},search:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0;var a={startTime:this.$utils.formatDate(this.timeArr[0],"YYYY-MM-DD")+" 00:00:00",endTime:this.$utils.formatDate(this.timeArr[1],"YYYY-MM-DD")+" 23:59:59",userName:this.userName,siteId:0};this.$post("/pddRoulette/tob/queryLotteryRecord",Object(n.a)(Object(n.a)({},a),{},{pageSize:this.pageSize,pageNo:e||this.pageNum}),{"Content-type":"application/json;charset=UTF-8"}).then((function(e){var a=e.content;a&&a.map((function(e){e.money=e.amount?Number(e.amount/100).toFixed(2):"-",0==e.type?e.type=t.$t("inviteTurntable.LotteryBonus"):1==e.type?e.type=t.$t("inviteTurntable.FirstTimeCollection"):2==e.type?e.type=t.$t("inviteTurntable.InviteSignupBonus"):3==e.type&&(e.type=t.$t("inviteTurntable.WithdrawBonus"))})),t.dataList=a||[],t.totalElements=+e.totalElements||0})).catch((function(e){t.dataList=[],t.totalElements=0,t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},handledoExcel:function(){this.$router.push("/exportRecord")},handleExport:function(){var t=this,e={startTime:this.$utils.formatDate(this.timeArr[0],"YYYY-MM-DD")+" 00:00:00",endTime:this.$utils.formatDate(this.timeArr[1],"YYYY-MM-DD")+" 23:59:59",userName:this.userName,siteId:0,pageSize:this.pageSize,pageNo:this.pageNum};this.$download("/pddRoulette/tob/exportLotteryRecord",e,{"Content-type":"application/json;"},"post").then((function(){t.exlModal=!0})).catch((function(e){t.$Message.error(e.message)})).finally((function(){}))},getToday:function(){var t=this.$utils.formatDate(this.$utils.$changeTime().getTime(),"YYYY/MM/DD");return[new Date("".concat(t," 00:00:00")),new Date("".concat(t," 23:59:59"))]}},components:{},mounted:function(){this.search(1)}}),i=o,r=(a("29f36"),a("2877")),s=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"memberDetail"},[t.loading?a("Spin",{attrs:{fix:""}}):t._e(),a("Form",{attrs:{inline:""}},[a("FormItem",{attrs:{label:t.tFn("date"),"label-width":60}},[a("DatePicker",{staticStyle:{width:"220px"},attrs:{type:"daterange",options:t.dateOption,clearable:!1,format:"yyyy-MM-dd"},model:{value:t.timeArr,callback:function(e){t.timeArr=e},expression:"timeArr"}})],1),a("FormItem",{attrs:{label:t.tFn("username"),"label-width":100}},[a("Input",{attrs:{type:"text",maxlength:"30"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary",icon:"md-search"},on:{click:function(e){return t.search()}}},[t._v(t._s(t._f("lang")("search")))])],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleExport()}}},[t._v(t._s(t._f("lang")("exportExcel")))])],1)],1),a("m-table",{attrs:{size:"small",columns:t.columns,data:t.dataList},scopedSlots:t._u([{key:"operation",fn:function(e){var n=e.row;return[a("Button",{attrs:{size:"small"},on:{click:function(e){return t.showRecord(n)}}},[t._v(t._s(t.tFn("record")))])]}}])}),a("Modal",{attrs:{title:t.tFn("record"),"footer-hide":"",width:"700"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("m-table",{attrs:{size:"small",columns:t.columns2,data:t.dataList2},scopedSlots:t._u([{key:"prizeType",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.showGoodType(a.prizeType))+" ")]}}])})],1),a("m-page",{attrs:{total:t.totalElements,pageSize:t.pageSize},on:{"on-change":t.search,"on-page-size-change":t.pageSizeChange},model:{value:t.pageNum,callback:function(e){t.pageNum=e},expression:"pageNum"}}),a("Modal",{attrs:{title:t.$t("proxy.warnTips"),"ok-text":t.$t("proxy.goNow"),"cancel-text":t.$t("proxy.stayPage")},on:{"on-ok":t.handledoExcel},model:{value:t.exlModal,callback:function(e){t.exlModal=e},expression:"exlModal"}},[a("p",[t._v(t._s(t._f("lang")("proxy.exportingTip")))])])],1)}),[],!1,null,null,null);e.default=s.exports},6032:function(t,e,a){}}]);