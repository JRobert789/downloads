(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b64c39e0"],{"2ba8":function(t,e,n){},"7fd0":function(t,e,n){"use strict";n("2ba8")},"9f80":function(t,e,n){"use strict";n.r(e);var s=(n("d3b7"),n("159b"),n("3ca3"),n("ddb0"),{data:function(){return{status:!1,statusId:"",levelList:[],loading:!1,userRankMax:15}},methods:{addlevelList:function(){this.levelList.length>=+this.userRankMax-1?this.$Message.error(this.$t("demotion.maxLevel")):this.levelList.push({minInviteCount:1,downgradeToRank:1})},getStatus:function(){var t=this;return this.$get("/user/rank/tob/getDowngradeSwitch").then((function(e){t.statusId=e.id,t.status=!!e.isEnable})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},getUserRank:function(){var t=this;return this.$get("/user/rank/tob/getUserRankMax").then((function(e){t.userRankMax=e}))},changestatus:function(){var t=this;this.loading=!0,this.$post("/user/rank/tob/updateDowngradeSwitch",{id:this.statusId,isEnable:this.status?1:0}).then((function(){t.$Message.success(t.$t("changeSuccess"))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},getDemotionSetList:function(){var t=this;return this.levelList=[],this.$get("/user/rank/tob/getUserDowngradeRanks").then((function(e){e.forEach((function(e){t.levelList.push({minInviteCount:e.minInviteCount||1,downgradeToRank:e.downgradeToRank||1})}))}))},saveDemotionSet:function(){var t=this;this.loading=!0,this.$post("/user/rank/tob/updateUserDowngradeRanks",this.levelList,{"Content-type":"application/json;charset=UTF-8"}).then((function(){t.getDemotionSetList(),t.$Message.success(t.$t("changeSuccess"))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))}},mounted:function(){var t=this;this.loading=!0,Promise.all([this.getStatus(),this.getUserRank(),this.getDemotionSetList()]).finally((function(){t.loading=!1}))}}),i=s,a=(n("7fd0"),n("2877")),o=Object(a.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.pageauthoritys.demotionStatus?n("Form",{attrs:{inline:""}},[n("FormItem",{attrs:{label:t.$t("demotion.demotionSwitch"),"label-width":90}},[n("i-switch",{attrs:{size:"large"},on:{"on-change":function(e){return t.changestatus()}},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}}),n("span",{staticStyle:{"margin-left":"20px"}},[t._v(t._s(t._f("lang")("demotion.demotionTips")))])],1)],1):t._e(),n("div",{staticStyle:{"margin-left":"20px"}},[t._l(t.levelList,(function(e,s){return n("div",{key:s,staticStyle:{"margin-bottom":"10px"}},[t._v(" "+t._s(t._f("lang")("demotion.demotionLevel",{level:s+2}))+" "),n("InputNumber",{attrs:{min:1},model:{value:e.minInviteCount,callback:function(n){t.$set(e,"minInviteCount",n)},expression:"i.minInviteCount"}}),t._v(" "+t._s(t._f("lang")("demotion.demotionLevel2"))+" "),n("InputNumber",{attrs:{min:1,max:t.userRankMax},model:{value:e.downgradeToRank,callback:function(n){t.$set(e,"downgradeToRank",n)},expression:"i.downgradeToRank"}}),n("span",[s===t.levelList.length-1?n("Button",{staticStyle:{margin:"0 10px"},attrs:{type:"primary"},on:{click:t.addlevelList}},[n("Icon",{attrs:{type:"md-add"}})],1):t._e(),0!==s&&s===t.levelList.length-1?n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.levelList.pop()}}},[n("Icon",{attrs:{type:"md-trash"}})],1):t._e()],1)],1)})),n("Button",{staticStyle:{padding:"0 20px"},attrs:{type:"primary"},on:{click:t.saveDemotionSet}},[t._v(t._s(t._f("lang")("save")))]),n("p",{staticClass:"demotionTips"},[t._v(t._s(t._f("lang")("demotion.demotionSetUserTips")))])],2),t.loading?n("Spin",{attrs:{fix:""}}):t._e()],1)}),[],!1,null,"59db41a9",null);e.default=o.exports}}]);