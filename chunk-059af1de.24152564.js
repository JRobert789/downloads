(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-059af1de"],{"0dce":function(t,e,a){"use strict";a.r(e);var n=(a("d3b7"),{data:function(){return{loading:!1,value2:!1,formValue:{},form:{},pageNum:1,pageSize:20,totalElements:0,pageSizeArray:[20,30,50],columns:[{title:"银行名称",key:"bankName"},{title:"代码",key:"bankCode"},{title:"状态",slot:"isEnable"},{title:"操作",key:"operation",slot:"operation",width:220}],dataList:[],editType:""}},computed:{},methods:{pageSizeChange:function(t){this.pageSize=t,this.query()},reset:function(){this.formValue={}},add:function(){this.value2=!0,this.editType="add",this.form={bankName:"",bankCode:"",isEnable:0}},handleConfirm:function(){var t=this;"add"==this.editType?(this.loading=!0,this.$post("/platform/bank/tob/saveBank",this.form).then((function(){t.$Message.success(t.$t("addSucceeded")),t.value2=!1,t.query()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))):(this.loading=!0,this.$post("/platform/bank/tob/updateBank",this.form).then((function(){t.$Message.success(t.$t("changeSuccess")),t.value2=!1,t.query()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1})))},handleEdit:function(t){this.value2=!0,this.editType="edit",this.form=JSON.parse(JSON.stringify(t))},handleDel:function(t){var e=this;return new Promise((function(a){e.$Modal.confirm({title:"确认删除",content:"您确认删除这个银行吗？",onOk:function(){e.loading=!0,e.$delete("/platform/bank/tob/deleteBank",{id:t.id},{formatway:"repeat"}).then((function(){e.$Message.success(e.$t("opSuccess"))})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.query(),e.loading=!1}))}})}))},handleSwitch:function(t,e){var a=this,n="",o="";return 0==e?(n="确认禁用",o="您确认禁用这个银行吗？"):(n="确认启用",o="您确认启用这个银行吗？"),new Promise((function(i){a.$Modal.confirm({title:n,content:o,onOk:function(){a.loading=!0,a.$post("/platform/bank/tob/updateBank",{id:t.id,bankName:t.bankName,bankCode:t.bankCode,isEnable:e},{formatway:"repeat"}).then((function(){a.$Message.success(a.$t("opSuccess"))})).catch((function(t){a.$Message.error(t.message)})).finally((function(){a.query(),a.loading=!1}))}})}))},query:function(){var t=this;this.$post("/platform/bank/tob/findBankByPage",this.formValue).then((function(e){t.dataList=e.content,t.totalElements=+e.totalElements})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))}},components:{},mounted:function(){this.query()}}),o=n,i=(a("c5ac"),a("2877")),s=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bankTable-configuration"},[t.loading?a("Spin",{attrs:{fix:""}}):t._e(),a("div",{staticClass:"option-menu"},[a("Form",{attrs:{model:t.formValue,inline:""}},[a("FormItem",[a("Input",{staticStyle:{width:"240px"},model:{value:t.formValue.bankName,callback:function(e){t.$set(t.formValue,"bankName",e)},expression:"formValue.bankName"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("银行名称")])])],1),a("FormItem",[a("Select",{attrs:{placeholder:"状态"},model:{value:t.formValue.isEnable,callback:function(e){t.$set(t.formValue,"isEnable",e)},expression:"formValue.isEnable"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),a("Option",{attrs:{value:"1"}},[t._v("启用")]),a("Option",{attrs:{value:"0"}},[t._v("禁用")])],1)],1),a("Button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")]),a("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.reset}},[t._v("重置")]),a("Button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"md-add",type:"success"},on:{click:t.add}},[t._v("新增")])],1)],1),a("Table",{attrs:{border:"",columns:t.columns,data:t.dataList},scopedSlots:t._u([{key:"isEnable",fn:function(e){var a=e.row;return e.index,[t._v(" "+t._s(1==a.isEnable?"启用":"禁用")+" ")]}},{key:"operation",fn:function(e){var n=e.row;return e.index,[a("div",{staticClass:"operation-btn-group"},[a("Button",{attrs:{size:"small"},on:{click:function(e){return t.handleEdit(n)}}},[t._v("编辑")]),a("Button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"warning"},on:{click:function(e){return t.handleDel(n)}}},[t._v("删除")]),1==n.isEnable?a("Button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"warning"},on:{click:function(e){return t.handleSwitch(n,0)}}},[t._v("禁用")]):t._e(),0==n.isEnable?a("Button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"warning"},on:{click:function(e){return t.handleSwitch(n,1)}}},[t._v("启用")]):t._e()],1)]}}])}),a("m-page",{attrs:{total:+t.totalElements,pageSizeOpts:t.pageSizeArray,pageSize:+t.pageSize},on:{"on-page-size-change":t.pageSizeChange},model:{value:t.pageNum,callback:function(e){t.pageNum=e},expression:"pageNum"}}),a("Modal",{attrs:{title:"新增\\编辑银行"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[[a("Form",{ref:"form",attrs:{"label-width":100,model:t.form}},[a("FormItem",{attrs:{label:"银行名称："}},[a("Input",{staticStyle:{width:"240px"},model:{value:t.form.bankName,callback:function(e){t.$set(t.form,"bankName",e)},expression:"form.bankName"}})],1),a("FormItem",{attrs:{label:"代码："}},[a("Input",{staticStyle:{width:"240px"},model:{value:t.form.bankCode,callback:function(e){t.$set(t.form,"bankCode",e)},expression:"form.bankCode"}})],1),a("FormItem",{attrs:{label:"状态："}},[a("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.form.isEnable,callback:function(e){t.$set(t.form,"isEnable",e)},expression:"form.isEnable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1)],a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(e){t.value2=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("确定")])],1)],2)],1)}),[],!1,null,null,null);e.default=s.exports},"55d6":function(t,e,a){},c5ac:function(t,e,a){"use strict";a("55d6")}}]);