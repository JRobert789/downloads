(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-091a6d46"],{2502:function(t,e,r){},"82f7":function(t,e,r){},c80d:function(t,e,r){"use strict";r.r(e);var a=r("5530"),n=(r("d3b7"),r("d81d"),r("4de4"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Drawer",{attrs:{closable:!1,width:"900","mask-closable":!1},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[r("div",{staticClass:"out-header",attrs:{slot:"header"},slot:"header"},[t._v(" "+t._s(t.title)+" ")]),t.loading?r("Spin",{attrs:{fix:""}}):t._e(),r("div",{staticClass:"offline-pay-drawer"},[r("Form",{ref:"drawerform",attrs:{model:t.drawerform,rules:t.ruleValidate,"label-width":200}},[r("FormItem",{staticStyle:{"margin-bottom":"34px"},attrs:{label:t.tFn("cname"),prop:"name"}},[r("Input",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:t.tFn("max30"),maxlength:"30"},model:{value:t.drawerform.name,callback:function(e){t.$set(t.drawerform,"name",e)},expression:"drawerform.name"}})],1),r("FormItem",{attrs:{label:t.tFn("curl"),prop:"url"}},[r("upload",{ref:"upRef",attrs:{list:t.upList},on:{"upload-remove":t.uploadRemove,"upload-success":t.uploadSuccess},model:{value:t.drawerform.url,callback:function(e){t.$set(t.drawerform,"url",e)},expression:"drawerform.url"}})],1),r("FormItem",{attrs:{label:t.tFn("ctype"),prop:"type"}},[r("RadioGroup",{model:{value:t.drawerform.type,callback:function(e){t.$set(t.drawerform,"type",e)},expression:"drawerform.type"}},[r("Radio",{attrs:{label:0}},[t._v(t._s(t.tFn("property")))]),r("Radio",{attrs:{label:1}},[t._v(t._s(t.tFn("redenvelope")))]),r("Radio",{attrs:{label:2}},[t._v(t._s(t.tFn("score")))])],1)],1),r("FormItem",{staticStyle:{"margin-bottom":"34px"},attrs:{label:t.tFn("camount"),prop:"money"}},[r("InputNumber",{staticStyle:{width:"100px"},model:{value:t.drawerform.money,callback:function(e){t.$set(t.drawerform,"money",e)},expression:"drawerform.money"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v(t._s(t._f("lang")("confirm")))]),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.$emit("input",!1)}}},[t._v(t._s(t._f("lang")("cancel")))])],1)],1)],1)],1)}),i=(r("caad"),r("2532"),r("b0c0"),r("b680"),r("2f62")),o=r("9dac"),s={props:{value:{default:!1,type:Boolean}},data:function(){return{drawerform:{name:"",money:null,url:"",type:0,id:""},ruleValidate:{name:[{required:!0,message:this.tFn("ruleValidateMsg1"),trigger:"blur"}],money:[{required:!0,type:"number",message:this.tFn("ruleValidateMsg3"),trigger:"blur"}],url:[{required:!0,type:"string",message:this.tFn("ruleValidateMsg2"),trigger:"change"}]},upList:[],loading:!1}},methods:{tFn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.includes("roulette.")||(t="roulette.".concat(t)),this.$t(t,e)},uploadSuccess:function(t){this.$set(this.drawerform,"url",t.path)},uploadRemove:function(){this.drawerform.url=""},add:function(){var t=this;this.loading||this.$refs.drawerform.validate((function(e){if(e){var r=t.drawerform,a=r.name,n=r.money,i=r.url,o=r.type,s=r.id,l={name:a,money:(100*n).toFixed(),url:i,type:o};s&&(l.id=s),t.loading=!0,t.$post("/activity/roulette/tob/saveOrUpdateCommodity",l).then((function(){t.$Message.success(t.$t("success")),t.$emit("refresh"),t.isShow=!1})).catch((function(e){t.$Message.error(e.message||e)})).finally((function(){t.loading=!1}))}}))}},computed:Object(a.a)(Object(a.a)({},Object(i.c)("site",["imgServer"])),{},{editId:function(){return this.value&&this.value.id},title:function(){return this.editId?this.$t("edit"):this.$t("add")},isShow:{get:function(){return!!this.value},set:function(){this.$emit("input",null)}}}),watch:{isShow:function(t){if(t&&(this.drawerform={name:"",money:null,url:"",type:0,id:""},this.$refs.upRef.handleRemove(),this.upList.length=0,this.$refs.drawerform.resetFields(),this.editId)){var e=this.value,r=e.imgUrl,a=e.name,n=e.formatMoney,i=e.url,o=e.type,s=e.id;Object.assign(this.drawerform,{name:a,money:+n,url:i,type:o,id:s}),r&&this.upList.push({name:"pic",url:r})}}},components:{upload:o.a},mounted:function(){}},l=s,u=(r("c88e"),r("2877")),c=Object(u.a)(l,n,[],!1,null,null,null).exports,d={data:function(){return{columns:[{title:"ID",slot:"id"},{title:this.tFn("cname"),key:"name"},{title:this.tFn("curl"),slot:"url"},{title:this.tFn("camount"),key:"formatMoney"},{title:this.tFn("ctype"),key:"formatType"},{title:this.$t("operation"),slot:"operation"}],dataList:[],loading:!1,detail:null,typeMap:{2:this.tFn("score"),1:this.tFn("redenvelope"),0:this.tFn("property")}}},computed:Object(a.a)({},Object(i.c)("site",["imgServer"])),methods:{tFn:function(t,e){return this.$t("roulette.".concat(t),e)},query:function(){var t=this;this.loading=!0,this.$get("/activity/roulette/tob/getCommodityList").then((function(e){t.dataList=(e||[]).map((function(e){return Object(a.a)(Object(a.a)({},e),{},{imgUrl:t.$formatImageUrl(e.url),formatType:t.typeMap[e.type],formatMoney:t.$utils.toYuan(e.money)})}))})).catch((function(e){t.dataList=[],t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},editHandler:function(t){this.detail=JSON.parse(JSON.stringify(t))},deleteHandler:function(t){var e=this;if(!this.loading){this.loading=!0;var r=t.id;this.$post("/activity/roulette/tob/removeCommodity",{id:r}).then((function(){e.$Message.success(e.$t("deleteSucceeded")),e.dataList=e.dataList.filter((function(t){return t.id!==r}))})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading=!1}))}}},components:{drawer:c},mounted:function(){this.query()}},m=d,f=(r("f324"),Object(u.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"commodity"},[r("Form",{attrs:{inline:""}},[t.pageauthoritys.add?r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.editHandler({})}}},[t._v(t._s(t._f("lang")("add")))])],1):t._e()],1),r("m-table",{attrs:{size:"small",columns:t.columns,data:t.dataList},scopedSlots:t._u([{key:"id",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.id)+"   "),r("Button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.$utils.copy(a.id)}}},[t._v(t._s(t._f("lang")("copy")))])]}},{key:"url",fn:function(t){var e=t.row;return[r("div",{staticClass:"image"},[r("img",{attrs:{src:e.imgUrl}})])]}},{key:"operation",fn:function(e){var a=e.row;return[r("div",{staticClass:"operation-btn-group"},[t.pageauthoritys.edit?r("Tooltip",{attrs:{content:t.$t("fund.modify"),placement:"top"}},[r("Button",{attrs:{size:"small",icon:"md-create"},on:{click:function(e){return t.editHandler(a)}}})],1):t._e()],1)]}}])}),t.loading?r("Spin",{attrs:{size:"large",fix:""}}):t._e(),r("drawer",{on:{refresh:t.query},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}})],1)}),[],!1,null,null,null));e.default=f.exports},c88e:function(t,e,r){"use strict";r("82f7")},f324:function(t,e,r){"use strict";r("2502")}}]);