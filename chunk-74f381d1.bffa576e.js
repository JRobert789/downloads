(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-74f381d1"],{"42e5a":function(t,e,a){"use strict";a("62cb")},"5e93":function(t,e,a){"use strict";a.r(e);var i=a("5530"),n=(a("ac1f"),a("5319"),a("d3b7"),a("2f62")),s={name:"limitarea",data:function(){return{ip:"",state:"all",pageNum:1,pageSize:10,total:0,loading:!1,dataList:[],countryList:[],ipLimitList:{},showdrawer:!1,detail:null,loading2:!1,editObj:{startIp:"",endIp:"",remark:"",codeType:""}}},methods:Object(i.a)(Object(i.a)({},Object(n.b)("site",["queryCountryData"])),{},{outDate:function(t){var e=t.replace(/-/g,"/");return new Date>new Date(e)},del:function(t){var e=this;this.loading2=!0,this.$post("/platform/siteIpLimit/tob/deleteIpLimit",{id:t}).then((function(){e.$Message.success(e.$t("changeSuccess")),e.getData(!0)})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading2=!1}))},confirm:function(){var t=this;this.editObj.startIp&&this.editObj.endIp&&this.editObj.codeType?(this.loading2=!0,this.$post("/platform/siteIpLimit/tob/saveSiteIpLimit",{startIp:this.editObj.startIp,endIp:this.editObj.endIp,remark:this.editObj.remark,codeType:this.editObj.codeType,operator:1,id:this.detail?this.detail.id:""}).then((function(){t.$Message.success(t.$t("riskManagement.addedSuccessfully")),t.getData(!0),t.showdrawer=!1})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading2=!1}))):this.$Message.info(this.$t("riskManagement.pleaseConfirmThatTheInformationIsComplete"))},editnew:function(t){this.showdrawer=!0,t?(this.editObj.startIp=t.ipStart,this.editObj.endIp=t.ipEnd,this.editObj.codeType=t.limitTime,this.editObj.remark=t.remark,this.detail=t):(this.detail=null,this.editObj={startIp:"",endIp:"",codeType:"",remark:""})},pageChange:function(t){this.pageNum=t,this.getData()},pageSizeChange:function(t){this.pageSize=t,this.getData(!0)},getConfig:function(){var t=this;this.queryCountryData().then((function(e){t.countryList=e.countryList,t.ipLimitList=e.ipLimitList.reduce((function(t,e){return t[e.dictKey]=e.dictValue,t}),{})}))},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.pageNum=1),this.loading=!0,this.$get("/platform/siteIpLimit/tob/queryIpLimitListByPage",{operator:1,pageNum:this.pageNum,pageSize:this.pageSize,state:this.state,ip:this.ip}).then((function(e){t.dataList=e.ipLimitList.content,t.total=+e.ipLimitList.totalElements})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))}}),mounted:function(){this.getConfig(),this.getData()}},r=s,o=(a("42e5a"),a("2877")),l=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"limitarea"},[t.loading?a("Spin",{attrs:{fix:""}}):t._e(),a("div",{staticStyle:{margin:"10px 0"}},[t.pageauthoritys.add?a("Button",{attrs:{icon:"md-add",type:"primary"},on:{click:function(e){return t.editnew()}}},[t._v(t._s(t._f("lang")("riskManagement.addNewRestriction")))]):t._e(),a("Input",{staticStyle:{width:"200px",margin:"0 15px"},attrs:{placeholder:t.$t("riskManagement.ipAddress")},model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}}),a("Select",{staticStyle:{width:"100px",margin:"0 10px 0 0"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[a("Option",{attrs:{value:"all"}},[t._v(t._s(t._f("lang")("all")))]),a("Option",{attrs:{value:"off"}},[t._v(t._s(t._f("lang")("riskManagement.expired")))]),a("Option",{attrs:{value:"on"}},[t._v(t._s(t._f("lang")("riskManagement.using")))])],1),a("Button",{attrs:{icon:"md-add",type:"primary"},on:{click:function(e){return t.getData(!0)}}},[t._v(t._s(t._f("lang")("search")))])],1),a("table",{staticClass:"cmtable tdcenter"},[a("tr",[a("th",[t._v(t._s(t._f("lang")("riskManagement.startIpAddress")))]),a("th",[t._v(t._s(t._f("lang")("riskManagement.endIpAddress")))]),a("th",[t._v(t._s(t._f("lang")("riskManagement.limitTime")))]),a("th",[t._v(t._s(t._f("lang")("riskManagement.deadline")))]),a("th",[t._v(t._s(t._f("lang")("createTime")))]),a("th",[t._v(t._s(t._f("lang")("remark")))]),a("th",[t._v(t._s(t._f("lang")("status")))]),a("th",[t._v(t._s(t._f("lang")("operation")))])]),t._l(t.dataList,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.ipStart))]),a("td",[t._v(t._s(e.ipEnd))]),a("td",[t._v(t._s(t._f("lang")("riskManagement."+e.limitTime)))]),a("td",[t._v(t._s(e.finalTime))]),a("td",[t._v(t._s(e.createTime))]),a("td",[t._v(t._s(e.remark))]),a("td",{style:{background:t.outDate(e.finalTime)?"#FF4948":"#ADD597",color:"#fff"}},[t._v(t._s(t.outDate(e.finalTime)?t.$t("riskManagement.expired"):t.$t("riskManagement.using")))]),a("td",[t.pageauthoritys.update?a("Button",{attrs:{icon:"ios-cog"},on:{click:function(a){return t.editnew(e)}}}):t._e(),t.pageauthoritys.delete?a("Button",{attrs:{icon:"md-trash"},on:{click:function(a){return t.del(e.id)}}}):t._e()],1)])}))],2),a("div",{staticClass:"tablebottom"},[a("div",{staticClass:"static"},[t._v(t._s(t._f("lang")("pageDate",{total:t.total,page:t.pageNum,allpage:Math.ceil(t.total/t.pageSize)})))]),a("Page",{staticStyle:{float:"right"},attrs:{current:t.pageNum,total:t.total,"show-sizer":"","show-elevator":"","page-size-opts":[10,20,50,100]},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1),a("Drawer",{staticClass:"noctxpad",attrs:{title:t.detail?t.$t("riskManagement.editFrontEndRestriction"):t.$t("riskManagement.addNewFrontEndRestriction"),width:"700"},model:{value:t.showdrawer,callback:function(e){t.showdrawer=e},expression:"showdrawer"}},[t.loading2?a("Spin",{attrs:{fix:""}}):t._e(),a("div",{staticStyle:{padding:"20px"}},[a("Form",{attrs:{"label-width":80}},[a("FormItem",{attrs:{label:t.$t("riskManagement.startIp")}},[a("Input",{staticStyle:{width:"400px"},model:{value:t.editObj.startIp,callback:function(e){t.$set(t.editObj,"startIp",e)},expression:"editObj.startIp"}})],1),a("FormItem",{attrs:{label:t.$t("riskManagement.endIp")}},[a("Input",{staticStyle:{width:"400px"},model:{value:t.editObj.endIp,callback:function(e){t.$set(t.editObj,"endIp",e)},expression:"editObj.endIp"}})],1),a("FormItem",{attrs:{label:t.$t("riskManagement.limitTime")}},[a("Select",{staticStyle:{width:"220px"},model:{value:t.editObj.codeType,callback:function(e){t.$set(t.editObj,"codeType",e)},expression:"editObj.codeType"}},t._l(t.ipLimitList,(function(e,i){return a("Option",{key:i,attrs:{value:i}},[t._v(t._s(t._f("lang")("riskManagement."+i)))])})),1)],1),a("FormItem",{attrs:{label:t.$t("remark")}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea"},model:{value:t.editObj.remark,callback:function(e){t.$set(t.editObj,"remark",e)},expression:"editObj.remark"}})],1),a("FormItem",[a("div",{staticStyle:{color:"red","font-size":"12px"}},[t._v(" "+t._s(t._f("lang")("riskManagement.onlyIpHint4"))+" ")])])],1)],1),a("div",{staticClass:"drawerbottom"},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){t.showdrawer=!1}}},[t._v(t._s(t._f("lang")("cancel")))]),a("Button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t._f("lang")("confirm")))])],1)],1)],1)}),[],!1,null,null,null);e.default=l.exports},"62cb":function(t,e,a){}}]);