(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-81cce834"],{"01f0":function(t,e,i){},"0b92":function(t,e,i){"use strict";e.a={password:{reg:/^[A-Za-z0-9]{6,20}$/},username:{reg:/^(?!_)(?!.*?_$)(?!.*(_).*\1)[A-Za-z0-9_]{6,20}$/,isNumber:/^\d+$/g},No2:{pattern:/^(([1-9]{1}\d{0,9})|(0{1}))(\.\d{0,2})?$/,message:"请填写正确的金额"},email:{pattern:/^[A-Za-z0-9\u4e00-\u9fa5-_.]+@[a-zA-Z0-9_-]+(\.[a-zA-Z_-]+)+$/},hostName:{pattern:/^[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}$/}}},1457:function(t,e,i){},"30d6":function(t,e,i){"use strict";var s=i("5530"),a=(i("a9e3"),i("4d63"),i("ac1f"),i("25f0"),i("b680"),i("d3b7"),{props:{value:{default:!1,type:Boolean},check:{default:!1,type:Boolean},status:{default:1,type:Number},defRemark:{default:"",type:String},id:{default:"",type:String},moneyinfo:{default:function(){},type:Object}},data:function(){return{showSpin:!1,moneyForm:{depositMoney:null,remark:null,sendMessage:!1},moneyFormRule:{depositMoney:[{type:"string",required:!0,message:this.$t("fund.offlineVadidate1"),trigger:"blur"},{pattern:new RegExp(/^(([0-9]|([1-9][0-9]{0,9}))((\.[0-9]{1,2})?))$/,"g"),message:this.$t("fund.offlineVadidate2"),trigger:"blur"}],remark:[{required:!1,min:0,max:150,message:this.$t("fund.offlineVadidate3"),trigger:"blur"}]},moneyFormRule2:{remark:[{required:!1,min:0,max:150,message:this.$t("fund.offlineVadidate3"),trigger:"blur"}]}}},methods:{keydown:function(t){13!==t.keyCode||t.shiftKey||window.hasEnterEvent||this.save()},save:function(){var t=this;if(this.check)this.$emit("input",!1);else if(!this.showSpin){this.showSpin=!0;var e="/deposit/order/tob/updateOrderStatus",i={id:this.id,status:this.status,remark:this.moneyForm.remark};2===this.status?this.$refs.moneyForm.validate((function(a){a?(i=Object(s.a)(Object(s.a)({},i),{},{depositMoney:Number((100*+t.moneyForm.depositMoney).toFixed(2))}),t.$post(e,i,{"Content-type":"application/json"}).then((function(){t.$Message.success(t.$t("operateSuccess")),t.$emit("save"),t.$emit("input",!1)})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.showSpin=!1}))):t.showSpin=!1})):(i.sendMessage=this.moneyForm.sendMessage?"1":"0",this.$refs.moneyForm.validate((function(s){s?t.$post(e,i,{"Content-type":"application/json"}).then((function(){t.$Message.success(t.$t("operateSuccess")),t.$emit("save"),t.$emit("input",!1)})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.showSpin=!1})):t.showSpin=!1})))}}},computed:{title:function(){return{1:this.$t("cancel"),0:this.$t("fund.recovery"),2:this.$t("fund.handle")}[this.status]},value2:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{value:function(t){if(t?(this.moneyForm.remark=this.defRemark,document.addEventListener("keydown",this.keydown)):(this.moneyForm.remark="",this.moneyForm.sendMessage=!1,document.removeEventListener("keydown",this.keydown)),this.moneyinfo&&2===this.status){var e=this.moneyinfo.depositMoney;this.moneyForm.depositMoney=((+e||0)/100).toFixed(2)}}}}),n=a,r=(i("de28"),i("2877")),o=Object(r.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{title:t.check?t.$t("systemManager.checkTheDetails"):t.$t("fund.onlineTitle",{title:t.title})},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[2===t.status?[i("Form",{ref:"moneyForm",attrs:{"label-width":100,rules:t.moneyFormRule,model:t.moneyForm}},[i("FormItem",{attrs:{label:t.$t("fund.userAccountName")}},[i("span",[t._v(t._s(t.moneyinfo.userAccountName))])]),i("FormItem",{attrs:{label:t.$t("fund.applyInMoney")}},[i("span",{staticClass:"M__money-red"},[t._v(t._s(((t.moneyinfo.depositMoney||0)/100).toFixed(2)))])]),i("FormItem",{attrs:{label:t.$t("fund.depositMoney"),prop:"depositMoney"}},[i("Input",{attrs:{type:"text",disabled:t.check,placeholder:t.$t("fund.required")},model:{value:t.moneyForm.depositMoney,callback:function(e){t.$set(t.moneyForm,"depositMoney",e)},expression:"moneyForm.depositMoney"}}),i("span",{staticClass:"M__money-hint"},[t._v(t._s(t._f("lang")("fund.offlineHint")))])],1),i("FormItem",{attrs:{label:t.$t("fund.remark"),prop:"remark"}},[i("div",{staticClass:"ivu-input-wrapper ivu-input-wrapper-default ivu-input-type-textarea"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.moneyForm.remark,expression:"moneyForm.remark"}],staticClass:"ivu-input",attrs:{rows:"5",disabled:t.check},domProps:{value:t.moneyForm.remark},on:{input:function(e){e.target.composing||t.$set(t.moneyForm,"remark",e.target.value)}}})])])],1)]:[i("Form",{ref:"moneyForm",attrs:{"label-width":100,rules:t.moneyFormRule2,model:t.moneyForm}},[i("FormItem",{attrs:{label:t.$t("fund.remark"),prop:"remark"}},[i("div",{staticClass:"ivu-input-wrapper ivu-input-wrapper-default ivu-input-type-textarea"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.moneyForm.remark,expression:"moneyForm.remark"}],staticClass:"ivu-input",attrs:{rows:"5"},domProps:{value:t.moneyForm.remark},on:{input:function(e){e.target.composing||t.$set(t.moneyForm,"remark",e.target.value)}}})])]),i("FormItem",[i("Checkbox",{model:{value:t.moneyForm.sendMessage,callback:function(e){t.$set(t.moneyForm,"sendMessage",e)},expression:"moneyForm.sendMessage"}},[t._v(" "+t._s(t._f("lang")("fund.sendMessage")))])],1)],1)],i("div",{staticStyle:{"margin-left":"40px","font-size":"12px",color:"#a3a3a3"}},[t._v(t._s(t._f("lang")("fund.offlineHint2")))]),t.showSpin?i("Spin",{attrs:{size:"large",fix:""}}):t._e(),i("div",{attrs:{slot:"footer"},slot:"footer"},[t.check?t._e():i("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(e){return t.$emit("input",!1)}}},[t._v(t._s(t._f("lang")("cancel")))]),i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v(t._s(t._f("lang")("confirm")))])],1)],2)}),[],!1,null,null,null);e.a=o.exports},"3b64":function(t,e,i){"use strict";i.r(e);var s=i("1da1"),a=i("5530"),n=i("ade3"),r=(i("96cf"),i("4de4"),i("b64b"),i("7db0"),i("d3b7"),i("a9e3"),i("d81d"),i("ac1f"),i("1276"),i("fb6a"),i("25f0"),i("a15b"),i("07ac"),i("30d6")),o=(i("159b"),i("99af"),i("3ca3"),i("ddb0"),i("0b92")),l={name:"Test-inbox",props:{value:{type:Object,default:function(){return{}}}},data:function(){return{config:{inbox:""},loading:!1,rules:[{required:!0,message:this.$t("sysrelation.emailErrorTip"),trigger:"blur",pattern:o.a.email.pattern}]}},methods:{submitHandler:function(){var t=this;return Object(s.a)(regeneratorRuntime.mark((function e(){var i,s,a,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loading){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$refs.inbox.validate();case 4:e.sent&&(t.loading=!0,i=t.value,s=i.emailAddress,a=i.password,n=i.emailPlatform,r=i.serverAddress,o=i.smtpPort,t.$post("/platform/emailCode/tob/sendMsg",{email:s,password:a,toEmail:t.config.inbox,type:n,hostName:r,smtpPort:o}).then((function(){t.isShow=!1,t.$Message.success(t.$t("success"))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1,t.isShow=!1,t.$emit("getEmailList")})));case 6:case"end":return e.stop()}}),e)})))()}},computed:{title:function(){var t=this.value||{};return"".concat(this.$t("sysrelation.emailTest"),"(").concat(t.emailAddress,")")},isShow:{get:function(){return!!this.value},set:function(){this.$emit("input",null)}}},watch:{isShow:function(t){this.$refs.inbox.resetFields(),t&&(this.config.inbox="")}}},m=l,c=i("2877"),d=Object(c.a)(m,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{title:t.title,closable:!1,"mask-closable":!1},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[i("Form",{ref:"inbox",staticClass:"form",staticStyle:{"margin-left":"80px"},attrs:{model:t.config}},[i("Row",[i("Col",{attrs:{span:"4"}},[i("span",{staticStyle:{"line-height":"34px"}},[t._v(t._s(t.$t("sysrelation.inbox")))])]),i("Col",{attrs:{span:"18"}},[i("FormItem",{attrs:{rules:t.rules,prop:"inbox"}},[i("Input",{attrs:{placeholder:t.$t("sysrelation.emailAddress")},model:{value:t.config.inbox,callback:function(e){t.$set(t.config,"inbox","string"==typeof e?e.trim():e)},expression:"config.inbox"}})],1)],1)],1)],1),i("div",{staticClass:"btns",attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.submitHandler}},[t._v(t._s(t.$t("confirm")))]),i("Button",{attrs:{loading:t.loading},on:{click:function(e){t.isShow=!1}}},[t._v(t._s(t.$t("cancel")))])],1)],1)}),[],!1,null,null,null),u=d.exports,p={name:"Email-list",props:{value:Boolean,emailLoading:Boolean},data:function(){return{form:{emailList:[],addEmail:{smtpPort:null,maxSendLimit:null},selectedEmailList:[]},columns:[{type:"selection",width:60,align:"center"},{title:this.$t("sysrelation.emailAddress"),slot:"emailAddress",key:"emailAddress"},{title:this.$t("home.password"),slot:"password",key:"password",width:180},{title:this.$t("sysrelation.emailPlatform"),slot:"emailPlatform",key:"emailPlatform",width:180},{title:this.$t("sysrelation.hostName"),slot:"serverAddress",key:"serverAddress",width:200},{title:this.$t("sysrelation.smtpPort"),slot:"smtpPort",key:"smtpPort",width:110},{title:this.$t("sysrelation.sendMaxQuantity"),slot:"maxSendLimit",key:"maxSendLimit",width:130},{title:this.$t("sysrelation.currentSendingQuantity"),key:"currentSendLimit",width:130},{title:this.$t("operation"),key:"operation",slot:"operation"}],loading:!1,testItem:null,showAddModel:!1,emailAddressText:"",page:1,size:20,totalElements:0}},components:{TestInbox:u},methods:{getEmailList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,1==e&&(this.page=1),this.$get("/platform/emailconfig/tob/queryByPage",{emailAddress:this.emailAddressText?this.emailAddressText:"",page:e,limit:this.size}).then((function(e){t.form.emailList=e.content||[],t.form.emailList.forEach((function(t){return t._disabled=Boolean(!t.isDisabled)})),t.totalElements=+e.totalElements})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},addHandler:function(){var t=this;return Object(s.a)(regeneratorRuntime.mark((function e(){var i,s,a,n,r,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.addEmailRef.validate();case 2:e.sent&&(t.loading=!0,i=t.form.addEmail,s=i.emailAddress,a=i.password,n=i.emailPlatform,r=i.serverAddress,o=i.smtpPort,l=i.maxSendLimit,t.$post("/platform/emailconfig/tob/add",{emailAddress:s,password:a,emailPlatform:n,serverAddress:r,smtpPort:o,maxSendLimit:l,currentSendLimit:0,isDisabled:1},{"Content-type":"application/json;charset=UTF-8"}).then((function(){t.closeAddEmailModel(),t.$Message.success(t.$t("addSucceeded")),t.getEmailList()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1})));case 4:case"end":return e.stop()}}),e)})))()},deleteHandler:function(t){var e=this;this.loading=!0;var i=t.emailAddress,s=t.password,a=t.emailPlatform,n=t.serverAddress,r=t.smtpPort,o=t.maxSendLimit,l=t.currentSendLimit,m=t.id;this.$post("/platform/emailconfig/tob/delete",{emailAddress:i,password:s,emailPlatform:a,serverAddress:n,smtpPort:r,maxSendLimit:o,currentSendLimit:l,id:m},{"Content-type":"application/json;charset=UTF-8"}).then((function(){e.$Message.success(e.$t("deleteSuccess")),1===e.form.emailList.length&&e.page>1&&(e.page=e.page-1),e.getEmailList(e.page)})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading=!1}))},updateBatchEmailList:function(){var t=this;return Object(s.a)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.emails.validate();case 2:e.sent&&(t.loading=!0,(i=JSON.parse(JSON.stringify(t.form.emailList))).forEach((function(t){return delete t._disabled})),t.$post("/platform/emailconfig/tob/updateBatch",i,{"Content-type":"application/json;charset=UTF-8"}).then((function(){t.$Message.success(t.$t("success")),t.getEmailList(t.page)})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1})));case 4:case"end":return e.stop()}}),e)})))()},resetBatchEmailList:function(t,e){var i=this;if(0!=t||0!==this.form.selectedEmailList.length){var s=t?[e]:this.form.selectedEmailList;this.loading=!0,this.$post("/platform/emailconfig/tob/resetBatch",s,{"Content-type":"application/json;charset=UTF-8"}).then((function(){i.$Message.success(i.$t("success")),i.form.selectedEmailList=[],i.getEmailList(i.page)})).catch((function(t){i.$Message.error(t.message)})).finally((function(){i.loading=!1}))}else this.$Message.error(this.$t("grabSet.checkOptionTips"))},search:function(){this.page=1,this.getEmailList()},pageSizeChange:function(t){this.size=t,this.getEmailList()},closeAddEmailModel:function(){this.$refs.addEmailRef.resetFields(),this.form.addEmail=this.$options.data.call(this).form.addEmail,this.showAddModel=!1},isSetting:function(t){var e=t.emailAddress,i=t.password,s=t.emailPlatform,a=t.serverAddress,n=t.smtpPort,r=t.maxSendLimit;return!!(e||i||s||a||n||r)},changeDisabled:function(t){t.isDisabled=0==t.isDisabled?1:0,t._disabled=Boolean(!t.isDisabled)},checkTestDisabled:function(t){var e=t||{},i=e.emailAddress,s=e.password;return!i||!s},selectionChange:function(t){var e=[];t.forEach((function(t){return e.push(t.id)})),this.form.selectedEmailList=e},emailAddressValidator:function(t){var e=this;return{validator:function(i,s,a){if("number"==typeof t){var n=e.form.emailList[t]||{};if(e.isSetting(n)&&!s)return a(new Error(""))}return s&&o.a.email.pattern.test(s)?void a():a(new Error(""))},message:this.$t("sysrelation.emailErrorTip"),trigger:"blur"}},passwordValidator:function(t){var e=this;return{validator:function(i,s,a){if("number"==typeof t){var n=e.form.emailList[t]||{};if(e.isSetting(n)&&!s)return a(new Error(""))}if(!s)return a(new Error(""));if(!/^[\S]{6,30}$/.test(s))return a(new Error(""));a()},message:this.$t("sysrelation.passwordErrorTip"),trigger:"blur"}},emailPlatformValidator:function(t){var e=this;return{validator:function(i,s,a){if("number"==typeof t){var n=e.form.emailList[t]||{};if(e.isSetting(n)&&!s)return a(new Error(""))}return s&&o.a.hostName.pattern.test(s)?void a():a(new Error(""))},message:this.$t("sysrelation.emailPlatformTip"),trigger:"blur"}},serverAddressValidator:function(t){var e=this;return{validator:function(i,s,a){if("number"==typeof t){var n=e.form.emailList[t]||{};if(e.isSetting(n)&&!s)return a(new Error(""))}return s&&o.a.hostName.pattern.test(s)?void a():a(new Error(""))},message:this.$t("sysrelation.hostNameTip"),trigger:"blur"}},smtpPortValidator:function(t){var e=this;return{validator:function(i,s,a){if("number"==typeof t){var n=e.form.emailList[t]||{};if(e.isSetting(n)&&!s)return a(new Error(""))}return s?s<0||s>65535?a(new Error("")):void a():a(new Error(""))},message:this.$t("sysrelation.smtpPortTip"),trigger:"change"}},maxSendLimitValidator:function(t){var e=this;return{validator:function(i,s,a){if("number"==typeof t){var n=e.form.emailList[t]||{};if(e.isSetting(n)&&!s)return a(new Error(e.$t("sysrelation.setPointsErrorTip")));if(n.maxSendLimit<n.currentSendLimit)return a(new Error(e.$t("sysrelation.maxSendLimitErrorTip")))}return s?s<0||s>2e3?a(new Error(e.$t("sysrelation.setPointsErrorTip"))):void a():a(new Error(e.$t("sysrelation.setPointsErrorTip")))},message:this.validator,trigger:"change"}},testBefore:function(t){var e=this;return Object(s.a)(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=e.$refs.emails,a=["emailAddress","password","emailPlatform","serverAddress","smtpPort","maxSendLimit"].map((function(e){return new Promise((function(i,a){var n="emailList.".concat(t,".").concat(e);s.validateField(n,(function(t){return t?a(t):i()}))}))})),i.prev=2,i.next=5,Promise.all(a);case 5:e.testItem=e.form.emailList[t],i.next=11;break;case 8:i.prev=8,i.t0=i.catch(2);case 11:case"end":return i.stop()}}),i,null,[[2,8]])})))()}},computed:{showEmail:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{value:function(t){t?(this.getEmailList(),this.$refs.emails.resetFields()):(this.form=this.$options.data.call(this).form,this.emailAddressText="",this.page=1,this.size=20)}},mounted:function(){}},f=p,h=(i("a75d"),Object(c.a)(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Drawer",{attrs:{width:"100%",title:t.$t("sysrelation.setEmail"),closable:!0,placement:"right"},model:{value:t.showEmail,callback:function(e){t.showEmail=e},expression:"showEmail"}},[i("div",{staticClass:"contain"},[t.loading?i("Spin",{attrs:{fix:""}}):t._e(),i("div",[i("Input",{staticClass:"m-r-20 width-200",attrs:{type:"text",clearable:"",placeholder:t.$t("sysrelation.emailAddress")},model:{value:t.emailAddressText,callback:function(e){t.emailAddressText="string"==typeof e?e.trim():e},expression:"emailAddressText"}}),i("Button",{staticClass:"m-r-20",attrs:{type:"primary",icon:"md-search"},on:{click:t.search}},[t._v(t._s(t.$t("search")))]),i("Button",{staticClass:"m-r-20",attrs:{type:"primary"},on:{click:function(e){return t.resetBatchEmailList(0)}}},[t._v(t._s(t.$t("sysrelation.batchReset")))]),t.pageauthoritys.add?i("Button",{attrs:{type:"primary",icon:"md-add"}},[t._v(t._s(t.tFn("addNewAnnouncement")))]):t._e(),i("Button",{staticClass:"m-r-20",staticStyle:{float:"right"},attrs:{type:"primary",loading:t.emailLoading},on:{click:function(e){return t.updateBatchEmailList()}}},[t._v(t._s(t.$t("save")))]),i("Button",{staticClass:"m-r-20",staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.showAddModel=!0}}},[t._v(t._s(t.$t("grabSet.new")))])],1),i("div",{staticClass:"list m-t-20"},[i("Form",{ref:"emails",staticClass:"form",attrs:{model:t.form}},[i("Table",{attrs:{width:"100%",border:"",columns:t.columns,data:t.form.emailList},on:{"on-selection-change":t.selectionChange},scopedSlots:t._u([{key:"emailAddress",fn:function(e){e.row;var s=e.index;return[i("FormItem",{attrs:{prop:"emailList."+s+".emailAddress",rules:t.emailAddressValidator(s)}},[i("Input",{attrs:{placeholder:t.$t("sysrelation.googleOrOutlook"),autocomplete:"new-password",disabled:0==t.form.emailList[s].isDisabled},model:{value:t.form.emailList[s].emailAddress,callback:function(e){t.$set(t.form.emailList[s],"emailAddress","string"==typeof e?e.trim():e)},expression:"form.emailList[index].emailAddress"}})],1)]}},{key:"password",fn:function(e){e.row;var s=e.index;return[i("FormItem",{attrs:{prop:"emailList."+s+".password",rules:t.passwordValidator(s)}},[i("Input",{attrs:{type:"password",maxlength:"30",placeholder:t.$t("home.password"),autocomplete:"new-password",disabled:0==t.form.emailList[s].isDisabled},model:{value:t.form.emailList[s].password,callback:function(e){t.$set(t.form.emailList[s],"password","string"==typeof e?e.trim():e)},expression:"form.emailList[index].password"}})],1)]}},{key:"emailPlatform",fn:function(e){e.row;var s=e.index;return[i("FormItem",{attrs:{prop:"emailList."+s+".emailPlatform",rules:t.emailPlatformValidator(s)}},[i("Input",{attrs:{placeholder:t.$t("sysrelation.emailPlatform"),disabled:0==t.form.emailList[s].isDisabled},model:{value:t.form.emailList[s].emailPlatform,callback:function(e){t.$set(t.form.emailList[s],"emailPlatform","string"==typeof e?e.trim():e)},expression:"form.emailList[index].emailPlatform"}})],1)]}},{key:"serverAddress",fn:function(e){e.row;var s=e.index;return[i("FormItem",{attrs:{prop:"emailList."+s+".serverAddress",rules:t.serverAddressValidator(s)}},[i("Input",{attrs:{placeholder:t.$t("sysrelation.hostName"),disabled:0==t.form.emailList[s].isDisabled},model:{value:t.form.emailList[s].serverAddress,callback:function(e){t.$set(t.form.emailList[s],"serverAddress","string"==typeof e?e.trim():e)},expression:"form.emailList[index].serverAddress"}})],1)]}},{key:"smtpPort",fn:function(e){e.row;var s=e.index;return[i("FormItem",{attrs:{prop:"emailList."+s+".smtpPort",rules:t.smtpPortValidator(s)}},[i("InputNumber",{attrs:{min:0,max:65535,placeholder:t.$t("sysrelation.smtpPort"),disabled:0==t.form.emailList[s].isDisabled},model:{value:t.form.emailList[s].smtpPort,callback:function(e){t.$set(t.form.emailList[s],"smtpPort","string"==typeof e?e.trim():e)},expression:"form.emailList[index].smtpPort"}})],1)]}},{key:"maxSendLimit",fn:function(e){e.row;var s=e.index;return[i("FormItem",{attrs:{prop:"emailList."+s+".maxSendLimit",rules:t.maxSendLimitValidator(s)}},[i("InputNumber",{attrs:{min:1,max:2e3,placeholder:t.$t("sysrelation.sendMaxQuantity"),disabled:0==t.form.emailList[s].isDisabled},model:{value:t.form.emailList[s].maxSendLimit,callback:function(e){t.$set(t.form.emailList[s],"maxSendLimit","string"==typeof e?e.trim():e)},expression:"form.emailList[index].maxSendLimit"}})],1)]}},{key:"operation",fn:function(e){e.row;var s=e.index;return[i("div",{staticClass:"operationBtn-group"},[0==t.form.emailList[s].isDisabled?i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.changeDisabled(t.form.emailList[s])}}},[t._v(t._s(t.$t("enabled")))]):i("Button",{attrs:{type:"error"},on:{click:function(e){return t.changeDisabled(t.form.emailList[s])}}},[t._v(t._s(t.$t("disabled")))]),i("Button",{attrs:{disabled:0==t.form.emailList[s].isDisabled,type:"primary"},on:{click:function(e){return t.resetBatchEmailList(1,t.form.emailList[s].id)}}},[t._v(t._s(t.$t("reset")))]),i("Button",{attrs:{disabled:0==t.form.emailList[s].isDisabled||t.checkTestDisabled(t.form.emailList[s]),type:"primary"},on:{click:function(e){return t.testBefore(s)}}},[t._v(t._s(t.$t("sysrelation.emailTest")))]),i("Button",{attrs:{disabled:0==t.form.emailList[s].isDisabled,type:"error"},on:{click:function(e){return t.deleteHandler(t.form.emailList[s])}}},[t._v(t._s(t.$t("delete")))])],1)]}}])})],1)],1),i("div",{staticClass:"tip"},[i("h3",[t._v(t._s(t.$t("rechargeAddressQuery.warmTips")))]),i("p",[t._v(t._s(t.$t("sysrelation.currentSendingQuantityTip")))])]),i("m-page",{attrs:{total:t.totalElements,pageSize:t.size,pageSizeOpts:[20,30,50,100,250]},on:{"on-change":t.getEmailList,"on-page-size-change":t.pageSizeChange},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),i("Modal",{attrs:{title:t.$t("grabSet.new")},on:{"on-cancel":t.closeAddEmailModel},model:{value:t.showAddModel,callback:function(e){t.showAddModel=e},expression:"showAddModel"}},[i("Form",{ref:"addEmailRef",attrs:{"label-width":100,model:t.form}},[i("FormItem",{attrs:{label:t.$t("sysrelation.emailAddress"),prop:"addEmail.emailAddress",rules:t.emailAddressValidator(t.form.addEmail.emailAddress)}},[i("Input",{attrs:{typr:"text",placeholder:t.$t("sysrelation.googleOrOutlook"),autocomplete:"new-password"},model:{value:t.form.addEmail.emailAddress,callback:function(e){t.$set(t.form.addEmail,"emailAddress","string"==typeof e?e.trim():e)},expression:"form.addEmail.emailAddress"}})],1),i("FormItem",{attrs:{label:t.$t("home.password"),prop:"addEmail.password",rules:t.passwordValidator(t.form.addEmail.password)}},[i("Input",{attrs:{type:"password",maxlength:"30",placeholder:t.$t("home.password"),autocomplete:"new-password"},model:{value:t.form.addEmail.password,callback:function(e){t.$set(t.form.addEmail,"password","string"==typeof e?e.trim():e)},expression:"form.addEmail.password"}})],1),i("FormItem",{attrs:{label:t.$t("sysrelation.emailPlatform"),prop:"addEmail.emailPlatform",rules:t.emailPlatformValidator(t.form.addEmail.emailPlatform)}},[i("Input",{attrs:{placeholder:t.$t("sysrelation.emailPlatform")},model:{value:t.form.addEmail.emailPlatform,callback:function(e){t.$set(t.form.addEmail,"emailPlatform","string"==typeof e?e.trim():e)},expression:"form.addEmail.emailPlatform"}})],1),i("FormItem",{attrs:{label:t.$t("sysrelation.hostName"),prop:"addEmail.serverAddress",rules:t.serverAddressValidator(t.form.addEmail.serverAddress)}},[i("Input",{attrs:{placeholder:t.$t("sysrelation.hostName")},model:{value:t.form.addEmail.serverAddress,callback:function(e){t.$set(t.form.addEmail,"serverAddress","string"==typeof e?e.trim():e)},expression:"form.addEmail.serverAddress"}})],1),i("FormItem",{attrs:{label:t.$t("sysrelation.smtpPort"),prop:"addEmail.smtpPort",rules:t.smtpPortValidator(t.form.addEmail.smtpPort)}},[i("InputNumber",{attrs:{min:0,max:65535,placeholder:t.$t("sysrelation.smtpPort")},model:{value:t.form.addEmail.smtpPort,callback:function(e){t.$set(t.form.addEmail,"smtpPort","string"==typeof e?e.trim():e)},expression:"form.addEmail.smtpPort"}})],1),i("FormItem",{attrs:{label:t.$t("sysrelation.sendMaxQuantity"),prop:"addEmail.maxSendLimit",rules:t.maxSendLimitValidator(t.form.addEmail.maxSendLimit)}},[i("InputNumber",{attrs:{min:0,max:2e3,placeholder:t.$t("sysrelation.sendMaxQuantity")},model:{value:t.form.addEmail.maxSendLimit,callback:function(e){t.$set(t.form.addEmail,"maxSendLimit","string"==typeof e?e.trim():e)},expression:"form.addEmail.maxSendLimit"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.closeAddEmailModel}},[t._v(t._s(t.$t("cancel")))]),i("Button",{attrs:{type:"primary"},on:{click:t.addHandler}},[t._v(t._s(t.$t("confirm")))])],1)],1),i("TestInbox",{on:{getEmailList:function(e){return t.getEmailList(t.page)}},model:{value:t.testItem,callback:function(e){t.testItem=e},expression:"testItem"}})],1)}),[],!1,null,"ab157c5c",null)),y=h.exports,g=i("2f62"),v={name:"BusinessEmail-list",props:{value:Boolean},data:function(){return{testForm:{id:null,toEmail:""},testRuleValidate:{toEmail:[{required:!0,type:"string",pattern:o.a.email.pattern,message:this.$t("sysrelation.emailErrorTip"),trigger:"blur"}]},showTestModal:!1,platform:null,showValid:null,form:{emailPlatform:null,domainName:null,emailName:null,email:null,apiKey:null,enable:1},formValidate:{emailPlatform:[{required:!0,type:"string",message:this.$t("activeConfiguration.requireTips"),trigger:"change"}],domainName:[{required:!0,type:"string",message:this.$t("activeConfiguration.requireTips"),trigger:"blur"}],emailName:[{required:!0,type:"string",message:this.$t("activeConfiguration.requireTips"),trigger:"blur"}],email:[{required:!0,type:"string",pattern:o.a.email.pattern,message:this.$t("sysrelation.emailErrorTip"),trigger:"blur"}],apiKey:[{required:!1,type:"string",message:this.$t("activeConfiguration.requireTips"),trigger:"blur"}]},formTitle:"",opType:null,dataList:[],columns:[{title:this.$t("sysrelation.emailPlatform"),key:"emailPlatform"},{title:this.$t("sysrelation.domainName"),key:"domainName"},{title:this.$t("sysrelation.sender"),key:"emailName"},{title:this.$t("sysrelation.emailOfsender"),key:"email"},{title:this.$t("sysrelation.sendCount"),slot:"sendCount"},{title:this.$t("status"),slot:"enable"},{title:this.$t("operation"),slot:"operation"}],loading:!1,showAddModal:!1}},methods:Object(a.a)(Object(a.a)({},Object(g.b)("user",["getNoMd5PublicKey"])),{},{showdictKey:function(t){var e="";return this.platform.map((function(i){i.dictValue!=t||(e=i.dictKey)})),e},queryPlatform:function(){var t=this;this.$get("/platform/keyValue/tob/findByDictCode",{dictCode:"MAIL_CONFIG"}).then((function(e){t.platform=e})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},getData:function(){var t=this;this.loading=!0,this.$get("/platform/enterprise/email/tob/search").then((function(e){t.dataList=e,t.dataList.forEach((function(t){var e=t.enable?1:0;t.enable=e}))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},submit:function(){var t=this;this.$refs.form.validate((function(e){if(e){if("add"==t.opType&&!t.form.apiKey)return void t.$Message.error(t.$t("sysrelation.setApiKeyTip"));if("edit"==t.opType&&!t.form.apiKey)return void t.submitNoKey();t.getNoMd5PublicKey().then((function(e){var i=Object(a.a)({},t.form);t.form.apiKey&&(i.apiKey=e(t.form.apiKey)),i.enable=Boolean(t.form.enable),i.emailPlatform=t.showdictKey(t.form.emailPlatform),t.loading=!0;var s="add"==t.opType?"/platform/enterprise/email/tob/create":"/platform/enterprise/email/tob/update";t.$post(s,i,{"Content-type":"application/json"}).then((function(){t.$Message.success(t.$t("success")),t.showAddModal=!1,t.getData()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))})).catch((function(e){t.$Message.error(e.message)}))}}))},submitNoKey:function(){var t=this,e=Object(a.a)({},this.form);delete e.apiKey,e.enable=Boolean(this.form.enable),e.emailPlatform=this.showdictKey(this.form.emailPlatform),this.loading=!0,this.$post("/platform/enterprise/email/tob/update",e,{"Content-type":"application/json"}).then((function(){t.$Message.success(t.$t("success")),t.showAddModal=!1,t.getData()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},search:function(){this.getData()},handleBeforeDelete:function(t){var e=this;return new Promise((function(){e.$Modal.confirm({title:e.$t("siteConfig.warmtipsTitle"),content:e.$t("deleteTip"),onOk:function(){e.handleDelete(t)}})}))},handleBeforeChange:function(){var t=this;return new Promise((function(e){t.$Modal.confirm({title:t.$t("event.toggle"),content:t.$t("event.confirmToggle"),onOk:function(){e()}})}))},handleEdit:function(t){this.formTitle=this.$t("edit"),this.form=JSON.parse(JSON.stringify(t)),this.opType="edit",this.showAddModal=!0,this.showValid=!1},handleAdd:function(){this.$refs.form.resetFields(),this.formTitle=this.$t("grabSet.new"),this.opType="add",this.showAddModal=!0,this.showValid=!0},enableSwitch:function(t,e){var i=this,s={id:t,enable:Boolean(e)};this.loading=!0,this.$post("/platform/enterprise/email/tob/enable",s,{"Content-type":"application/json"}).then((function(){i.$Message.success(i.$t("success")),i.getData()})).catch((function(t){i.$Message.error(t.message)})).finally((function(){i.loading=!1}))},handleDelete:function(t){var e=this;this.loading=!0,this.$post("/platform/enterprise/email/tob/delete",{id:t},{"Content-type":"application/json"}).then((function(){e.$Message.success(e.$t("success")),e.getData()})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading=!1}))},handleTest:function(t){this.$refs.testForm.resetFields(),this.showTestModal=!0,this.testForm.id=t},closeTestModal:function(){this.showTestModal=!1,this.$refs.testForm.resetFields()},closeAddModal:function(){this.showAddModal=!1,this.$refs.form.resetFields()},submitTest:function(){var t=this;this.$refs.testForm.validate((function(e){if(e){var i=Object(a.a)({},t.testForm);t.loading=!0,t.$get("/platform/enterprise/email/tob/test",i).then((function(){t.$Message.success(t.$t("success")),t.showTestModal=!1,t.getData()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))}}))}}),computed:{showBusinessEmail:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{showBusinessEmail:{handler:function(t){t&&(this.getData(),this.queryPlatform())},immediate:!0}}},b=v,$=(i("89d5"),Object(c.a)(b,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Drawer",{attrs:{width:"100%",title:t.$t("sysrelation.setCorporateEmail"),closable:!0,placement:"right"},model:{value:t.showBusinessEmail,callback:function(e){t.showBusinessEmail=e},expression:"showBusinessEmail"}},[i("div",{staticClass:"contain"},[t.loading?i("Spin",{attrs:{fix:""}}):t._e(),i("div",{staticClass:"btnGroup"},[i("Button",{staticClass:"m-r-20",attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v(t._s(t.$t("search")))]),i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd()}}},[t._v(t._s(t.$t("grabSet.new")))])],1),i("div",{staticClass:"list m-t-20"},[i("Table",{attrs:{width:"100%",border:"",columns:t.columns,data:t.dataList},scopedSlots:t._u([{key:"sendCount",fn:function(e){var s=e.row;return[i("div",[t._v(" "+t._s(s.sendCount||0)+" ")])]}},{key:"enable",fn:function(e){var s=e.row;return[i("i-switch",{attrs:{size:"large","before-change":t.handleBeforeChange,trueValue:1,falseValue:0},on:{"on-change":function(e){return t.enableSwitch(s.id,s.enable)}},model:{value:s.enable,callback:function(e){t.$set(s,"enable",e)},expression:"row.enable"}},[i("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("enabled")))]),i("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("disabled")))])])]}},{key:"operation",fn:function(e){var s=e.row;return[i("div",{staticClass:"operationBtn-group"},[i("Button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:function(e){return t.handleEdit(s)}}},[t._v(t._s(t.$t("edit")))]),i("Button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"error"},on:{click:function(e){return t.handleBeforeDelete(s.id)}}},[t._v(t._s(t.$t("delete")))]),i("Button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"warning"},on:{click:function(e){return t.handleTest(s.id)}}},[t._v(t._s(t.$t("test")))])],1)]}}])})],1)],1),i("Modal",{attrs:{title:t.formTitle,"mask-closable":!1,closable:!1},model:{value:t.showAddModal,callback:function(e){t.showAddModal=e},expression:"showAddModal"}},[i("Form",{ref:"form",attrs:{"label-width":140,model:t.form,rules:t.formValidate}},[i("FormItem",{attrs:{label:t.$t("sysrelation.emailPlatform")+":",prop:"emailPlatform"}},[i("Select",{staticStyle:{width:"240px"},attrs:{disabled:t.form.emailPlatform&&"edit"==t.opType},model:{value:t.form.emailPlatform,callback:function(e){t.$set(t.form,"emailPlatform",e)},expression:"form.emailPlatform"}},t._l(t.platform,(function(e,s){return i("Option",{key:s,attrs:{value:e.dictValue}},[t._v(t._s(e.dictValue))])})),1)],1),i("FormItem",{attrs:{label:t.$t("sysrelation.domainName")+":",prop:"domainName"}},[i("Input",{staticStyle:{width:"240px"},model:{value:t.form.domainName,callback:function(e){t.$set(t.form,"domainName",e)},expression:"form.domainName"}})],1),i("FormItem",{attrs:{label:t.$t("sysrelation.sender")+":",prop:"emailName"}},[i("Input",{staticStyle:{width:"240px"},model:{value:t.form.emailName,callback:function(e){t.$set(t.form,"emailName",e)},expression:"form.emailName"}})],1),i("FormItem",{attrs:{label:t.$t("sysrelation.emailOfsender")+":",prop:"email"}},[i("Input",{staticStyle:{width:"240px"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),i("FormItem",{class:{validKey:t.showValid},attrs:{label:t.$t("fund.payKey")+":",prop:"apiKey"}},[t.showValid?i("span",{staticClass:"dot"},[t._v("*")]):t._e(),i("Input",{staticStyle:{width:"240px"},model:{value:t.form.apiKey,callback:function(e){t.$set(t.form,"apiKey",e)},expression:"form.apiKey"}})],1),i("FormItem",{attrs:{label:t.$t("event.status")+":",prop:"enable"}},[i("RadioGroup",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.enable,callback:function(e){t.$set(t.form,"enable",e)},expression:"form.enable"}},[i("Radio",{attrs:{label:1}},[t._v(t._s(t.$t("videoconfig.open")))]),i("Radio",{attrs:{label:0}},[t._v(t._s(t.$t("videoconfig.close")))])],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(e){return t.closeAddModal()}}},[t._v(t._s(t.$t("cancel")))]),i("Button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v(t._s(t.$t("confirm")))])],1)],1),i("Modal",{attrs:{width:"450",title:t.$t("sysrelation.emailTest"),"mask-closable":!1,closable:!1},model:{value:t.showTestModal,callback:function(e){t.showTestModal=e},expression:"showTestModal"}},[[i("Form",{ref:"testForm",attrs:{"label-width":100,model:t.testForm,rules:t.testRuleValidate}},[i("FormItem",{attrs:{label:t.$t("sysrelation.email"),prop:"toEmail"}},[i("Input",{staticStyle:{width:"250px"},attrs:{type:"text"},model:{value:t.testForm.toEmail,callback:function(e){t.$set(t.testForm,"toEmail",e)},expression:"testForm.toEmail"}})],1)],1)],i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(e){return t.closeTestModal()}}},[t._v(t._s(t.$t("cancel")))]),i("Button",{attrs:{type:"primary"},on:{click:t.submitTest}},[t._v(t._s(t.$t("confirm")))])],1)],2)],1)}),[],!1,null,"2f8d8140",null)),w=$.exports,_="APP_INTERFACE_DOMAIN",k="APP_UPDATE",E="APP_ONLINE_UPDATE",x="EMAIL_VERIFICATION",S="GOOGLE_VERIFICATION",I="ENTERPRISE_EMAIL",L="SMS_VERIFICATION",P="INVITE_REWARD_SCORE",T={components:{modal:r.a,EmailList:y,businessEmail:w},name:"sysrelation",data:function(){var t;return{loading:!1,dataList:[],showQuikmoney:!1,showtimespan:!1,showtimespan3:!1,timespan:0,withdrawTimeObj:{},showSetwithdraw:!1,timespan2:["",""],showSetCheckInPoints:!1,setCheckInPointsList:[],listObj:(t={OFFLINE_DEPOSIT_TIME_INTERVAL:this.$t("sysrelation.Issetwithdrawtime"),WITHDRAW_TIME:this.$t("sysrelation.IssetTimespan")},Object(n.a)(t,L,this.$t("sysrelation.SMSTips")),Object(n.a)(t,"INCR_STATUS",this.$t("sysrelation.Financialfunctions")),Object(n.a)(t,"IS_SHOW_INVITATION_CODE",this.$t("sysrelation.invitationTips")),Object(n.a)(t,_,this.$t("sysrelation.appInterfaceDomain")),Object(n.a)(t,k,this.$t("sysrelation.appUpgrade")),Object(n.a)(t,E,this.$t("sysrelation.onlineUpdate")),Object(n.a)(t,"BONUS_SAFE_TIME",this.$t("sysrelation.safeTime")),Object(n.a)(t,"CUMULATIVE_REWARD",this.$t("sysrelation.reward")),Object(n.a)(t,"TAX_SWITCH",this.$t("sysrelation.taxSwitch")),Object(n.a)(t,x,this.$t("sysrelation.checkEmailVerification")),Object(n.a)(t,I,this.$t("sysrelation.checkcCorporateEmail")),Object(n.a)(t,"CHECK_IN_REWARD_SCORE",this.$t("sysrelation.checkInPoints")),Object(n.a)(t,P,this.$t("sysrelation.invitationPoints")),Object(n.a)(t,"ROULETTE_SWITCH",this.$t("sysrelation.ROULETTE_ACTIVITY_SWITCH")),Object(n.a)(t,"DOWNLOAD_SWITCH",this.$t("sysrelation.DOWNLOAD_SWITCH")),Object(n.a)(t,"INVITATION_ARROW_SWITCH",this.$t("sysrelation.INVITATION_ARROW_SWITCH")),Object(n.a)(t,"PDD_ROULETTE_ACTIVITY",this.$t("sysrelation.PDD_ROULETTE_ACTIVITY")),Object(n.a)(t,"TEAM_REWARD_SWITCH",this.$t("sysrelation.TEAM_REWARD_SWITCH")),Object(n.a)(t,S,this.$t("sysrelation.checkGoogleVerification")),t),interfaceForm:{loading:!1,isModalShow:!1,ref:_,rules:{validator:function(t,e){var i=e.value;return!i||/^http[s]?:\/\/\w+/.test(i)},message:this.$t("sysrelation.interfaceTip"),trigger:"blur"},items:[{value:""}]},appUpgradeData:{loading:!1,ref:k,isModalShow:!1,activeKey:"",upgradeUrl:"",version:0,rules:{version:[{pattern:/\d/,message:this.$t("sysrelation.versionErrorTip"),trigger:"blur"}],upgradeUrl:[{pattern:/^http[s]?:\/\/\w+/,message:this.$t("sysrelation.appUrlErrorTip"),trigger:"blur"}]}},showEmail:!1,showBusinessEmail:!1,emailStr:"",emailLoading:!1,showSetInvitationPoint:!1,invitationPoints:{pointsUsersGet:0,pointsByInvitee:.01,points:0},keyId:"",pointsRules:{pointsUsersGet:[{required:!0,pattern:/^[0-9]{0,8}$/,message:this.$t("sysrelation.setPointsTip"),trigger:"blur"}],pointsByInvitee:[{required:!0,pattern:/^[0-9]{0,8}$|(^[0-9]{0,8}\.[0-9]{0,2}$)|100000000/,message:this.$t("sysrelation.setPointsRechargeTip"),trigger:"blur"}],points:[{required:!0,pattern:/^[0-9]{0,8}$/,message:this.$t("sysrelation.setPointsTip"),trigger:"blur"}]}}},computed:Object(a.a)({},Object(g.c)("site",["mailLimit","smsLimit"])),methods:{beforeChange:function(t){var e,i=this,s=t.isEnable,a=t.setKey,r=(e={},Object(n.a)(e,L,L),Object(n.a)(e,x,x),Object(n.a)(e,S,S),e);if(r[a]&&!s){var o=Object.keys(r).filter((function(t){return t!=r[a]})),l=this.dataList.find((function(t){return t.setKey==o[0]})),m=this.dataList.find((function(t){return t.setKey==o[1]}));if(l&&l.isEnable||m&&m.isEnable)return new Promise((function(t,e){i.$Modal.confirm({title:i.$t("tips"),content:i.$t("sysrelation.emailSmSTip"),onOk:function(){l.isEnable=0,m.isEnable=0,t()},onCancel:e})}))}return a==I&&0===Number(s)?new Promise((function(t,e){i.$Modal.confirm({title:i.$t("tips"),content:i.$t("sysrelation.CorporateEmailTip"),onOk:function(){t()},onCancel:e})})):Promise.resolve()},upEmailList:function(t){var e=this;if(!this.emailLoading){this.emailLoading=!0;var i=this.dataList.find((function(t){return t.setKey===x}));this.setHandler({id:i.id,setValue:t}).then((function(){e.emailStr=t,e.showEmail=!1})).finally((function(){e.emailLoading=!1}))}},getData:function(){var t=this;this.$get("/platform/config/tob/getSystemRelated").then((function(e){t.dataList=e.map((function(e){return t.listObj[e.setKey]===t.$t("sysrelation.Issetwithdrawtime")?e.button={name:t.$t("sysrelation.setwithdrawtime"),fn:t.setTimespan}:t.listObj[e.setKey]===t.$t("sysrelation.IssetTimespan")?e.button={name:t.$t("sysrelation.setTimespan"),fn:t.setwithdrawtime}:e.setKey===_?e.button={name:t.$t("sysrelation.set"),fn:t.setAppInterface}:e.setKey===k?e.button={name:t.$t("sysrelation.set"),fn:function(){return t.showAppUpgrade(k)}}:e.setKey===E?e.button={name:t.$t("sysrelation.set"),fn:function(){return t.showAppUpgrade(E)}}:t.listObj[e.setKey]===t.$t("sysrelation.safeTime")?e.button={name:t.$t("sysrelation.safeTimeSet"),fn:t.setSafeTime}:e.setKey===x?(t.emailStr=e.setValue,e.button={name:t.$t("sysrelation.setEmail"),fn:function(){t.showEmail=!0}}):e.setKey===I?e.button={name:t.$t("sysrelation.setCorporateEmail"),fn:function(){t.showBusinessEmail=!0}}:"CHECK_IN_REWARD_SCORE"===e.setKey?e.button={name:t.$t("sysrelation.detailedConfiguration"),fn:t.setCheckInPoints}:e.setKey===P&&(e.button={name:t.$t("sysrelation.detailedConfiguration"),fn:function(){t.showSetInvitationPoint=!0,t.setInvitationPoints(e.setValue)}}),e}))})).catch((function(){t.$Message.error("页面初始化失败, 请刷新重试")}))},showQuik:function(){this.showQuikmoney=!0},setSafeTime:function(t){this.showtimespan3=!0,this.timespan=+t.setValue},setTimespan:function(t){this.showtimespan=!0,this.timespan=+t.setValue},setwithdrawtime:function(t){this.showSetwithdraw=!0,this.timespan2=t.setValue.split("-")},setCheckInPoints:function(t){this.showSetCheckInPoints=!0,this.setCheckInPointsList=t.setValue.split(",").map(Number)},setInvitationPoints:function(t){var e=t.split("-");this.invitationPoints={pointsUsersGet:Number(e[0])||0,pointsByInvitee:Number(e[1])||.01,points:Number(e[2])||0},this.keyId=Math.random().toString(16).slice(2,8)},setHandler:function(t){var e=this;return new Promise((function(i,s){e.$post("/platform/config/tob/updateSetValue",t).then((function(t){e.$Message.success(e.$t("changeSuccess")),i(t)})).catch((function(t){e.$Message.error(t.message),s(t)}))}))},confirmtimespan:function(){var t=this,e=this.dataList.find((function(e){return t.listObj[e.setKey]===t.$t("sysrelation.Issetwithdrawtime")}));this.setHandler({id:e.id,setValue:this.timespan}).then((function(){e.setValue=t.timespan}))},confirmtimespan3:function(){var t=this,e=this.dataList.find((function(e){return t.listObj[e.setKey]===t.$t("sysrelation.safeTime")}));this.setHandler({id:e.id,setValue:this.timespan}).then((function(){e.setValue=t.timespan}))},confirmSetwithdraw:function(){var t=this,e=this.dataList.find((function(e){return t.listObj[e.setKey]===t.$t("sysrelation.IssetTimespan")})),i=this.timespan2.join("-");this.setHandler({id:e.id,setValue:i}).then((function(){e.setValue=i}))},confirmSetInvitationPoints:function(t){var e=this;this.$refs[t].validate((function(t){if(t){var i=e.dataList.find((function(t){return e.listObj[t.setKey]===e.$t("sysrelation.invitationPoints")})),s=Object.values(e.invitationPoints).join("-");e.setHandler({id:i.id,setValue:s}).then((function(){i.setValue=s}))}else e.$Message.error(e.$t("sysrelation.setPointsErrorTip"))})),this.showSetInvitationPoint=!1},confirmSetCheckInPoints:function(){var t=this,e=this.setCheckInPointsList.some((function(t){return t<0||t>99999999||null===t}));if(e)return this.$Notice.error({title:this.$t("tips"),desc:this.$t("sysrelation.checkInPointsErrorTip")}),!1;var i=this.dataList.find((function(e){return t.listObj[e.setKey]===t.$t("sysrelation.checkInPoints")})),s=String(this.setCheckInPointsList);this.setHandler({id:i.id,setValue:s}).then((function(){i.setValue=s,t.showSetCheckInPoints=!1}))},confirm:function(){var t=this;this.loading=!0;var e=this.dataList.filter((function(t){return t.isEnable})).map((function(t){return t.id}));this.$post("/platform/config/tob/updateSysOnOff",{isOpen:e},{formatway:"repeat"}).then((function(){t.$Message.success(t.$t("changeSuccess"))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},setAppInterface:function(){this.resetFormHandler(_);var t=this.dataList.find((function(t){return t.setKey===_}))||{};this.interfaceForm.items=t.setValue.split(";").map((function(t){return{value:t}})),this.interfaceForm.isModalShow=!0},interfaceCancel:function(){var t=this.dataList.find((function(t){return t.setKey===_}))||{};this.interfaceForm.items=t.setValue.split(";").map((function(t){return{value:t}})),this.interfaceForm.isModalShow=!1},setInterface:function(){var t=this;return Object(s.a)(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.interfaceForm.loading){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.validateFormHandler(_);case 4:t.interfaceForm.loading=!0,i=t.dataList.find((function(t){return t.setKey===_}))||{},s=t.interfaceForm.items.map((function(t){return t.value})).filter((function(t){return t})).join(";"),t.setHandler({id:i.id,setValue:s}).then((function(){i.setValue=s,t.interfaceForm.isModalShow=!1})).finally((function(){t.interfaceForm.loading=!1}));case 8:case"end":return e.stop()}}),e)})))()},showAppUpgrade:function(t){this.appUpgradeData.activeKey=t;var e=this.dataList.find((function(e){return e.setKey===t}))||{},i=[];e.setValue&&(i=e.setValue.split(";")),this.appUpgradeData.version=/^[0-9]*$/.test(i[0])?Number(i[0]):null,this.appUpgradeData.upgradeUrl=i[1],this.appUpgradeData.isModalShow=!0},onAppUpgradeCancel:function(){this.appUpgradeData.version=null,this.appUpgradeData.upgradeUrl="",this.appUpgradeData.isModalShow=!1},onAppUpgradeHandler:function(){var t=this;return Object(s.a)(regeneratorRuntime.mark((function e(){var i,s,a,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.appUpgradeData.loading){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.validateFormHandler(k);case 4:t.appUpgradeData.loading=!0,i=t.dataList.find((function(e){return e.setKey===t.appUpgradeData.activeKey}))||{},s=t.appUpgradeData,a=s.version,n=s.upgradeUrl,r=[a,n].join(";"),t.setHandler({id:i.id,setValue:r}).then((function(){i.setValue=r,t.appUpgradeData.isModalShow=!1})).finally((function(){t.appUpgradeData.loading=!1}));case 9:case"end":return e.stop()}}),e)})))()},resetFormHandler:function(t){this.$refs[t].resetFields()},validateFormHandler:function(t){var e=this;return new Promise((function(i,s){var a=e.$refs[t];if(a&&a.validate)return a.validate((function(t){t?i(t):s(t)}));s(!1)}))},interfaceAddHandler:function(){this.interfaceForm.items.push({value:""})},interfaceDeleteHandler:function(t){this.interfaceForm.items=this.interfaceForm.items.filter((function(e,i){return i!==t}))}},mounted:function(){this.getData()}},F=T,M=(i("b986"),Object(c.a)(F,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sysrelation"},[t.loading?i("Spin",{attrs:{fix:""}}):t._e(),i("table",{staticClass:"cmtable"},[i("tr",[i("th",[t._v(t._s(t.$t("sysrelation.Setcategory")))]),i("th",[t._v(t._s(t.$t("sysrelation.whetherTurnon")))]),i("th",[t._v(t._s(t.$t("sysrelation.operate")))])]),t._l(t.dataList,(function(e,s){return i("tr",{key:s},[i("td",[t._v(t._s(t.listObj[e.setKey])+" "),"SMS_VERIFICATION"==e.setKey||"EMAIL_VERIFICATION"==e.setKey?i("m-poptip",{staticStyle:{color:"red"},attrs:{title:t.$t("fund.warmTips"),placement:"right"}},[i("Icon",{staticClass:"department-remark",staticStyle:{color:"red"},attrs:{type:"ios-information-circle"}}),i("div",{attrs:{slot:"content"},slot:"content"},["SMS_VERIFICATION"==e.setKey?i("p",[t._v(t._s(t.$t("sysrelation.phoneSendLimitTip",{num:t.smsLimit})))]):i("p",[t._v(t._s(t.$t("sysrelation.emailSendLimitTip",{num:t.mailLimit})))])])],1):t._e()],1),i("td",[i("i-switch",{attrs:{size:"large","before-change":function(){return t.beforeChange(e)},"true-value":1,"false-value":0},model:{value:e.isEnable,callback:function(i){t.$set(e,"isEnable",i)},expression:"item.isEnable"}},[i("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("sysrelation.open")))]),i("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("sysrelation.close")))])])],1),i("td",[e.button?i("Button",{attrs:{type:"primary"},on:{click:function(t){return e.button.fn(e)}}},[t._v(" "+t._s(e.button.name)+" ")]):t._e()],1)])}))],2),i("div",{staticStyle:{"text-align":"center",margin:"20px 0"}},[i("Button",{attrs:{size:"large",type:"primary",disabled:!t.pageauthoritys.save},on:{click:t.confirm}},[t._v(t._s(t.$t("confirm")))])],1),i("Modal",{attrs:{title:t.$t("sysrelation.Presetintervaltime"),width:"600"},on:{"on-ok":t.confirmtimespan,"on-cancel":function(e){t.showtimespan=!1}},model:{value:t.showtimespan,callback:function(e){t.showtimespan=e},expression:"showtimespan"}},[i("Form",{attrs:{"label-width":180}},[i("FormItem",{attrs:{label:t.$t("sysrelation.timetowSet")}},[i("InputNumber",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{min:1,max:99999,precision:0,step:10,"active-change":!1},model:{value:t.timespan,callback:function(e){t.timespan=e},expression:"timespan"}}),t._v(" "+t._s(t.$t("sysrelation.seconds"))+" ")],1),i("div",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.$t("sysrelation.notieTips"))+" ")])],1)],1),i("Modal",{attrs:{title:t.$t("sysrelation.safeTimeSet2"),width:"600"},on:{"on-ok":t.confirmtimespan3,"on-cancel":function(e){t.showtimespan3=!1}},model:{value:t.showtimespan3,callback:function(e){t.showtimespan3=e},expression:"showtimespan3"}},[i("Form",{attrs:{"label-width":180}},[i("FormItem",{attrs:{label:t.$t("sysrelation.safeTimeSet2")}},[i("InputNumber",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{min:1,max:99999,precision:0,"active-change":!1},model:{value:t.timespan,callback:function(e){t.timespan=e},expression:"timespan"}}),t._v(" "+t._s(t.$t("sysrelation.hour"))+" ")],1),i("div",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.$t("sysrelation.safeTimeTips"))+" ")])],1)],1),i("Modal",{attrs:{title:t.$t("sysrelation.setwithdrawtime"),width:"600"},on:{"on-ok":t.confirmSetwithdraw,"on-cancel":function(e){t.showSetwithdraw=!1}},model:{value:t.showSetwithdraw,callback:function(e){t.showSetwithdraw=e},expression:"showSetwithdraw"}},[i("Form",{attrs:{"label-width":180}},[i("FormItem",{attrs:{label:t.$t("sysrelation.Starttime")}},[i("TimePicker",{staticStyle:{width:"150px"},attrs:{clearable:!1,format:"HH:mm",type:"time",placement:"bottom-start",placeholder:"Select time"},model:{value:t.timespan2[0],callback:function(e){t.$set(t.timespan2,0,e)},expression:"timespan2[0]"}})],1),i("FormItem",{attrs:{label:t.$t("sysrelation.endTime")}},[i("TimePicker",{staticStyle:{width:"150px"},attrs:{clearable:!1,format:"HH:mm",type:"time",placement:"bottom-start",placeholder:"Select time"},model:{value:t.timespan2[1],callback:function(e){t.$set(t.timespan2,1,e)},expression:"timespan2[1]"}})],1)],1)],1),i("Modal",{ref:"setCheckInPointsRef",attrs:{title:t.$t("sysrelation.checkInPointsSettings"),width:"750"},model:{value:t.showSetCheckInPoints,callback:function(e){t.showSetCheckInPoints=e},expression:"showSetCheckInPoints"}},[i("Form",{staticClass:"setCheckInPointsModal"},t._l(t.setCheckInPointsList,(function(e,s){return i("FormItem",{key:s,attrs:{label:t.$t("sysrelation.week_"+s)}},[i("InputNumber",{staticStyle:{width:"150px","margin-right":"20px"},attrs:{min:0,max:99999999,precision:0},model:{value:t.setCheckInPointsList[s],callback:function(e){t.$set(t.setCheckInPointsList,s,e)},expression:"setCheckInPointsList[index]"}})],1)})),1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.showSetCheckInPoints=!1}}},[t._v("取消")]),i("Button",{attrs:{type:"primary",size:"large"},on:{click:t.confirmSetCheckInPoints}},[t._v("确定")])],1)],1),i("Modal",{attrs:{title:t.$t("sysrelation.appInterfaceDomain")},model:{value:t.interfaceForm.isModalShow,callback:function(e){t.$set(t.interfaceForm,"isModalShow",e)},expression:"interfaceForm.isModalShow"}},[i("Form",{ref:t.interfaceForm.ref,attrs:{model:t.interfaceForm}},t._l(t.interfaceForm.items,(function(e,s){return i("FormItem",{key:s,attrs:{rules:t.interfaceForm.rules,prop:"items."+s}},[i("Row",[i("Col",{attrs:{span:"18"}},[i("Input",{attrs:{placeholder:t.$t("sysrelation.interfaceTip")},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1),i("Col",{attrs:{span:"4",offset:"1"}},[i("Button",{on:{click:function(e){return t.interfaceDeleteHandler(s)}}},[t._v(t._s(t._f("lang")("delete")))])],1)],1)],1)})),1),i("Row",[i("Col",{attrs:{span:"18"}},[i("Button",{attrs:{type:"dashed",long:"",icon:"md-add"},on:{click:t.interfaceAddHandler}},[t._v(t._s(t._f("lang")("add")))])],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.interfaceCancel}},[t._v(t._s(t._f("lang")("cancel")))]),i("Button",{attrs:{type:"primary",loading:t.interfaceForm.loading},on:{click:t.setInterface}},[t._v(t._s(t._f("lang")("confirm")))])],1)],1),i("Modal",{attrs:{title:t.listObj[t.appUpgradeData.activeKey]},model:{value:t.appUpgradeData.isModalShow,callback:function(e){t.$set(t.appUpgradeData,"isModalShow",e)},expression:"appUpgradeData.isModalShow"}},[i("Form",{ref:t.appUpgradeData.ref,attrs:{"label-width":100,rules:t.appUpgradeData.rules,model:t.appUpgradeData}},[i("FormItem",{attrs:{label:t.$t("sysrelation.version"),prop:"version"}},[i("InputNumber",{staticStyle:{width:"200px"},model:{value:t.appUpgradeData.version,callback:function(e){t.$set(t.appUpgradeData,"version",e)},expression:"appUpgradeData.version"}})],1),i("FormItem",{attrs:{label:t.$t("sysrelation.resourceUrl"),prop:"upgradeUrl"}},[i("Input",{attrs:{placeholder:t.$t("sysrelation.appUrlErrorTip"),type:"textarea",rows:3},model:{value:t.appUpgradeData.upgradeUrl,callback:function(e){t.$set(t.appUpgradeData,"upgradeUrl",e)},expression:"appUpgradeData.upgradeUrl"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.onAppUpgradeCancel}},[t._v(t._s(t._f("lang")("cancel")))]),i("Button",{attrs:{type:"primary",loading:t.appUpgradeData.loading},on:{click:t.onAppUpgradeHandler}},[t._v(t._s(t._f("lang")("confirm")))])],1)],1),i("Modal",{attrs:{title:t.$t("sysrelation.invitationPointsSettings"),width:"620"},on:{"on-ok":function(e){return t.confirmSetInvitationPoints("points")},"on-cancel":function(e){t.showSetInvitationPoint=!1}},model:{value:t.showSetInvitationPoint,callback:function(e){t.showSetInvitationPoint=e},expression:"showSetInvitationPoint"}},[i("Form",{key:t.keyId,ref:"points",staticClass:"setInvitationPoint",attrs:{model:t.invitationPoints,"label-width":180,rules:t.pointsRules}},[i("FormItem",{attrs:{label:t.$t("sysrelation.InviteUsersGet"),prop:"pointsUsersGet"}},[i("InputNumber",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{min:0},model:{value:t.invitationPoints.pointsUsersGet,callback:function(e){t.$set(t.invitationPoints,"pointsUsersGet",e)},expression:"invitationPoints.pointsUsersGet"}}),t._v(" "+t._s(t.$t("sysrelation.points"))+" ")],1),i("div",{staticClass:"invitee"},[i("FormItem",{attrs:{label:t.$t("sysrelation.pointsByInvitee"),prop:"pointsByInvitee"}},[i("InputNumber",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{min:.01},model:{value:t.invitationPoints.pointsByInvitee,callback:function(e){t.$set(t.invitationPoints,"pointsByInvitee",e)},expression:"invitationPoints.pointsByInvitee"}}),i("p",[t._v(t._s(t.$t("sysrelation.give")))])],1),i("FormItem",{staticClass:"points",attrs:{prop:"points"}},[i("InputNumber",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{min:0},model:{value:t.invitationPoints.points,callback:function(e){t.$set(t.invitationPoints,"points",e)},expression:"invitationPoints.points"}}),t._v(" "+t._s(t.$t("sysrelation.points"))+" ")],1)],1)],1)],1),i("EmailList",{attrs:{emailLoading:t.emailLoading},model:{value:t.showEmail,callback:function(e){t.showEmail=e},expression:"showEmail"}}),i("businessEmail",{model:{value:t.showBusinessEmail,callback:function(e){t.showBusinessEmail=e},expression:"showBusinessEmail"}})],1)}),[],!1,null,null,null));e.default=M.exports},"87e7":function(t,e,i){},"89d5":function(t,e,i){"use strict";i("1457")},a75d:function(t,e,i){"use strict";i("b02c")},b02c:function(t,e,i){},b986:function(t,e,i){"use strict";i("87e7")},de28:function(t,e,i){"use strict";i("01f0")}}]);