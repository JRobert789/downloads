(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7e0ac858"],{"5a56":function(t,e,n){"use strict";n("d08e")},7912:function(t,e,n){},"9de7":function(t,e,n){"use strict";n("7912")},d08e:function(t,e,n){},f909:function(t,e,n){"use strict";n.r(e);var i=(n("b680"),n("d3b7"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Drawer",{attrs:{title:t.tfn("firstDepositRewardSettings"),width:"550","mask-closable":!1},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[n("Form",{ref:"form",attrs:{model:t.form,rules:t.rule,"label-width":220}},[n("FormItem",{attrs:{label:t.tfn("completeTheFirstCharge"),prop:"firstReward"}},[n("InputNumber",{staticClass:"rl_input",attrs:{min:1,max:9999999},model:{value:t.form.firstReward,callback:function(e){t.$set(t.form,"firstReward",e)},expression:"form.firstReward"}})],1),n("FormItem",{attrs:{label:t.tfn("usersNeedToCharge"),prop:"firstCondition"}},[n("InputNumber",{staticClass:"rl_input",attrs:{min:1,max:9999999,precision:2,"active-change":!1},model:{value:t.form.firstCondition,callback:function(e){t.$set(t.form,"firstCondition",e)},expression:"form.firstCondition"}}),t._v(" "+t._s(t.tfn("andAboveForTheFirstTime"))+" ")],1),n("FormItem",{attrs:{label:t.tfn("advancedLevelNeedsToReachLevel"),prop:"rankLevel"}},[n("InputNumber",{staticClass:"rl_input",attrs:{min:0,max:t.maxLevel,precision:0,"active-change":!1},model:{value:t.form.rankLevel,callback:function(e){t.$set(t.form,"rankLevel",e)},expression:"form.rankLevel"}}),t._v(" "+t._s(t.tfn("level"))+" "),n("p",{staticStyle:{color:"#999999"}},[t._v(t._s(t.tfn("noLevel")))])],1),n("FormItem",{attrs:{label:t.$t("status")}},[n("i-switch",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v(t._s(t._f("lang")("confirm")))]),n("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.close()}}},[t._v(t._s(t._f("lang")("cancel")))])],1)],1),t.loading?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)}),s=(n("a9e3"),{props:{value:{default:!1,type:Boolean},detail:{default:null,type:Object},maxLevel:{default:0,type:Number}},data:function(){return{loading:!1,form:{firstReward:null,firstCondition:null,rankLevel:null,status:!1},showSpin:!1,rule:{firstReward:[{type:"number",required:!0,message:this.tfn("pleaseEnterTheAmount"),trigger:"blur"}],firstCondition:[{type:"number",required:!0,message:this.tfn("pleaseEnterTheAmount"),trigger:"blur"}],rankLevel:[{type:"number",required:!1,message:this.tfn("pleaseEnterLevel"),trigger:"blur"}]}}},methods:{tfn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$t("firstDepositReward.".concat(t),e)},init:function(){if(this.form={firstReward:null,firstCondition:null,rankLevel:null,status:!1},this.$refs.form.resetFields(),this.detail){var t=this.detail,e=t.firstCondition,n=t.firstReward,i=t.status,s=t.rankLevel;this.form={status:!!i,firstReward:+(n/100).toFixed(2),firstCondition:+(e/100).toFixed(2),rankLevel:s||null}}},close:function(){this.clear(),this.$emit("input",!1)},clear:function(){this.form={firstReward:null,firstCondition:null,rankLevel:null,status:!1}},save:function(){var t=this;this.$refs.form.validate((function(e){if(e){if(t.loading)return;t.loading=!0;var n=Boolean(t.detail),i=t.form,s=i.firstCondition,r=i.firstReward,a=i.status,o={rankLevel:i.rankLevel};o.firstReward=(100*r).toFixed(),o.firstCondition=(100*s).toFixed(),o.status=a?"1":"0",n&&(o.id=t.detail.id),t.$post("/first/reward/tob/save",o).then((function(){t.$Message.success(n?t.$t("rebate.editSucceeded"):t.$t("rebate.addSucceeded")),t.$emit("save"),t.$emit("input",!1)})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))}}))}},computed:{},watch:{value:function(t){t?this.init():this.clear()}}}),r=s,a=(n("9de7"),n("2877")),o={data:function(){return{detail:null,showDrawer:!1,rewardSwitch:{isEnable:!1},excelloading:!1,dateOptions:this.$utils.genDateConfig(90),columns:[{title:this.tfn("serialNumber"),slot:"key",width:80,align:"center"},{title:this.tfn("higherLevel"),key:"rankLevel",align:"center"},{title:this.tfn("firstChargeCondition"),key:"firstCondition",count:function(t){return(t/100).toFixed(2)},align:"center"},{title:this.tfn("firstDepositReward"),key:"firstReward",count:function(t){return(t/100).toFixed(2)},align:"center"},{title:this.$t("status"),slot:"status",align:"center"},{title:this.$t("operation"),slot:"operation",align:"center"}],gameList:[],dataList:[],bonus:0,levelPath:[],levelMap:{},form:{date:[null,null],userType:"0",userName:""},gameType:"",toUserId:"",proxyName:"",showSpin:!1,pageNo:1,pageSize:9999,totalElements:0,lastDate:[null,null],maxLevel:0}},components:{drawer:Object(a.a)(r,i,[],!1,null,null,null).exports},methods:{cancel:function(){},tfn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$t("firstDepositReward.".concat(t),e)},edit:function(t){this.detail=t,this.showDrawer=!0},save:function(){this.query()},query:function(){var t=this;this.showSpin=!0;var e={number:this.pageNo,size:this.pageSize};this.$post("/first/reward/tob/queryPage",e).then((function(e){var n=e.content,i=e.page,s=e.totalElements;n.forEach((function(t){t.status=!!t.status})),t.pageNo=i,t.dataList=n,t.totalElements=+s})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.showSpin=!1}))},statusChange:function(t){var e=this;if(!this.showSpin){this.showSpin=!0;var n={isEnable:t.status?"1":"0",id:t.id};this.$post("/first/reward/tob/enable",n).then((function(){e.$Message.success(e.$t("opSuccess"))})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.showSpin=!1,e.query()}))}},changeRewardSwitch:function(t){var e=this;this.showSpin=!0,this.$post("/first/reward/tob/changeRewardSwitch",{id:t.id,isEnable:t.isEnable?1:0}).then((function(){e.$Message.success(e.$t("opSuccess"))})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.showSpin=!1,e.query()}))},del:function(t){var e=this;this.showSpin=!0,this.$post("/first/reward/tob/del",{id:t}).then((function(){e.$Message.success(e.$t("deleteSuccess"))})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.showSpin=!1,e.query()}))},getRewardSwitch:function(){var t=this;this.$get("/first/reward/tob/getRewardSwitch").then((function(e){t.rewardSwitch=e,t.rewardSwitch.isEnable=!!t.rewardSwitch.isEnable})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.showSpin=!1}))},getUserRankMax:function(){var t=this;this.$get("/user/rank/tob/getUserRankMax").then((function(e){t.maxLevel=e||0}))}},watch:{showDrawer:function(t){t||(this.detail=null)}},mounted:function(){this.getRewardSwitch(),this.getUserRankMax(),this.query()}},l=o,c=(n("5a56"),Object(a.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reward__settings"},[n("Form",{staticClass:"rs_form",attrs:{inline:""}},[n("FormItem",[t.pageauthoritys.addedFirstDepositSettings?n("Button",{attrs:{type:"primary"},on:{click:function(e){t.showDrawer=!t.showDrawer}}},[t._v(t._s(t.tfn("addedFirstDepositSettings")))]):t._e()],1),t.pageauthoritys.changeRewardSwitch?n("FormItem",{attrs:{label:t.tfn("firstDepositRewardSwitch"),"label-width":100}},[n("i-switch",{on:{"on-change":function(e){return t.changeRewardSwitch(t.rewardSwitch)}},model:{value:t.rewardSwitch.isEnable,callback:function(e){t.$set(t.rewardSwitch,"isEnable",e)},expression:"rewardSwitch.isEnable"}})],1):t._e()],1),n("m-table",{ref:"selection",attrs:{border:"",columns:t.columns,data:t.dataList,"no-data-text":t.$t("rebate.noData")},scopedSlots:t._u([{key:"key",fn:function(e){var i=e.index;return[n("span",[t._v(t._s(i+1))])]}},{key:"status",fn:function(e){var i=e.row;return t.pageauthoritys.changeRewardSwitch?[n("i-switch",{on:{"on-change":function(e){return t.statusChange(i)}},model:{value:i.status,callback:function(e){t.$set(i,"status",e)},expression:"row.status"}})]:void 0}},{key:"operation",fn:function(e){var i=e.row;return t.pageauthoritys.operationAuthority?[n("Button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"md-create"},on:{click:function(e){return t.edit(i)}}}),n("Poptip",{attrs:{transfer:"",confirm:"",title:t.$t("deleteTip")},on:{"on-ok":function(e){return t.del(i.id)},"on-cancel":t.cancel}},[n("Button",{attrs:{icon:"ios-trash"}})],1)]:void 0}}],null,!0)}),t.showSpin?n("Spin",{attrs:{size:"large",fix:""}}):t._e(),n("drawer",{attrs:{maxLevel:t.maxLevel,detail:t.detail},on:{save:function(e){return t.save()}},model:{value:t.showDrawer,callback:function(e){t.showDrawer=e},expression:"showDrawer"}})],1)}),[],!1,null,null,null));e.default=c.exports}}]);