(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b78ec0c6"],{3272:function(t,e,a){"use strict";a.r(e);var o=(a("d3b7"),a("d81d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Drawer",{attrs:{title:t.title+t.$t("userGroupManag.usergroupmanag"),width:576},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[a("div",{staticClass:"usergroupmanag-detail"},[a("Form",{ref:"formDetail",attrs:{model:t.form,rules:t.rules,"label-width":110}},[a("FormItem",{attrs:{label:t.$t("userGroupManag.groupName"),prop:"groupName"}},[a("Input",{model:{value:t.form.groupName,callback:function(e){t.$set(t.form,"groupName",e)},expression:"form.groupName"}})],1),a("FormItem",{attrs:{label:t.$t("userGroupManag.remark"),prop:"remark"}},[a("Input",{attrs:{type:"textarea",rows:6},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),a("FormItem",[a("div",{staticClass:"operation-btn-group "},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v(t._s(t._f("lang")("userGroupManag.confirm")))]),a("Button",{on:{click:function(e){return t.$emit("input",!1)}}},[t._v(t._s(t._f("lang")("userGroupManag.cancel")))])],1)])],1),t.showSpin?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)])}),r=(a("498a"),a("ac1f"),a("5319"),{props:{value:{default:!1,type:Boolean},detail:{default:function(){},type:Object}},data:function(){return{showSpin:!1,form:{groupName:"",remark:""},rules:{groupName:[{required:!0,message:this.$t("userGroupManag.groupNameTips")}]}}},methods:{add:function(){var t=this;this.$refs.formDetail.validate((function(e){if(e){if(!t.form.groupName.trim())return void t.$Message.error(t.$t("userGroupManag.groupNameTips"));t.form.groupName=t.form.groupName.replace(/\s*/g,""),t.showSpin=!0,t.detail?t.$post("/user/group/tob/updateUserGroup",{id:t.form.groupId,groupName:t.form.groupName,remark:t.form.remark}).then((function(){t.$Message.success(t.title+t.$t("userGroupManag.success")),t.$emit("add"),t.$emit("input",!1)})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.showSpin=!1})):t.$post("/user/group/tob/saveUserGroup",{groupName:t.form.groupName,remark:t.form.remark}).then((function(){t.$Message.success(t.title+t.$t("userGroupManag.success")),t.$emit("add"),t.$emit("input",!1)})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.showSpin=!1}))}}))}},computed:{title:function(){return this.detail?this.$t("edit"):this.$t("add")},value2:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{value:function(){if(this.detail){var t=this.detail,e=t.id,a=t.groupName,o=t.remark;Object.assign(this.form,{groupId:e,groupName:a,remark:o})}this.value||this.$refs.formDetail.resetFields()}}}),s=r,n=(a("ce0b"),a("2877")),u=Object(n.a)(s,o,[],!1,null,null,null).exports,i=(a("4de4"),a("b680"),a("841c"),a("159b"),a("99af"),a("a15b"),{props:{value:{default:!1,type:Boolean}},data:function(){var t=this;return{columns:[{title:this.$t("userGroupManag.lockuserName"),key:"userName"},{title:this.$t("userGroupManag.lockType"),key:"isPorxy",count:function(e){return e?t.$t("userGroupManag.proxy"):t.$t("userGroupManag.user")}},{title:this.$t("userGroupManag.group"),slot:"group"},{title:this.$t("userGroupManag.lock"),thslot:"thIsLock",slot:"isLock"}],searchList:{0:{text:this.$t("userGroupManag.lockuserName"),val:""}},groupMap:[],type:0,groupId:"all",time:["",""],pageNo:1,pageSize:10,dataList:[],totalElements:0,isLoad:!1,changeMap:[],keyword:"",value2:!1}},watch:{value:function(){this.value?(this.changeMap=[],this.query()):(this.dataList=[],this.clear(!1)),this.value2=this.value},value2:function(){this.$emit("input",this.value2)}},methods:{lockAll:function(t){var e=this;this.dataList.map((function(a){return a.isLock=t?1:0,e.changeMap=e.changeMap.filter((function(t){return t.id!==a.id})),e.changeMap.push(a),a}))},isLockAll:function(){return this.dataList.every((function(t){return 1==t.isLock}))},tofixed:function(t){return(t/100).toFixed(2)},query:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoad=!0;var a={groupId:"all"===this.groupId?"":this.groupId,pageNo:e,type:this.type};a.startTime=this.time[0]?this.$utils.formatDate(this.time[0],"YYYY-MM-DD"):"",a.endTime=this.time[1]?this.$utils.formatDate(this.time[1],"YYYY-MM-DD"):"",a.pageSize=this.pageSize,this.type?this.searchList[this.type].val?a.searchText=(100*this.searchList[this.type].val).toFixed()+"-"+(100*this.searchList[this.type].val2).toFixed():a.searchText="":a.searchText=this.searchList[this.type].val||"",this.$get("/user/group/relation/tob/UserGrouping",{startTime:a.startTime,pageNo:a.pageNo,groupId:a.groupId,endTime:a.endTime,pageSize:a.pageSize,keyword:this.keyword}).then((function(e){var a=e||{},o=a.page,r=a.groupNames,s=o||{},n=s.content,u=s.totalElements;t.groupMap=r||[],t.dataList=n,t.totalElements=+u,t.changeMap=[]})).catch((function(e){t.dataList=[],t.totalElements=0,t.$Message.error(e.message)})).finally((function(){t.isLoad=!1}))},search:function(){this.pageNo=1,this.query(1)},clear:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.searchList={0:{text:this.$t("userGroupManag.lockuserName"),val:""}},this.type=0,this.groupId="all",this.time=["",""],this.keyword="",t&&this.search()},pageSizeChange:function(t){this.pageSize=t,this.query(1)},update:function(){var t=this;this.isLoad=!0;var e=[],a=[],o=[];this.dataList.forEach((function(t){+t.isLock?e.push(t.id):a.push(t.id)})),this.changeMap.forEach((function(t){o.push('{ id: "'.concat(t.id,'", groupId:"').concat(t.groupId,'" }'))}));var r={checked:"",unChecked:""};e.length&&(r.lockIds=e.join()+","),a.length&&(r.unLockIds=a.join()+","),o.length&&(r.selectJson="[".concat(o.join(),"]")),this.$post("/user/group/relation/tob/manualGrouping",r).then((function(){t.$Message.success(t.$t("success"))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.query(),t.isLoad=!1}))},change:function(t){this.changeMap=this.changeMap.filter((function(e){return e.id!==t.id})),this.changeMap.push(t)}}}),l=i,c=(a("f55d"),Object(n.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Drawer",{attrs:{title:t.$t("userGroupManag.batchUpdate"),width:1060},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[a("div",{staticClass:"usersgroupmanually"},[a("Form",{attrs:{inline:""}},[a("FormItem",[t._v(" "+t._s(t.$t("userGroupManag.groupName"))+" "),a("Select",{staticClass:"select",model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},[a("Option",{attrs:{value:"all"}},[t._v(t._s(t._f("lang")("userGroupManag.AllGroup")))]),t._l(t.groupMap,(function(e,o){return a("Option",{key:o,attrs:{value:e.id}},[t._v(t._s(e.groupName))])}))],2)],1),a("FormItem",{attrs:{prop:"time"}},[t._v(" "+t._s(t.$t("userGroupManag.operationTime"))+" "),a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"datetimerange",format:"yyyy-MM-dd",placeholder:t.$t("userGroupManag.operationTime")},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),a("FormItem",[t._v(" "+t._s(t.$t("userGroupManag.lockuserName"))+" "),a("Input",{staticClass:"input",model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary",icon:"md-search"},on:{click:function(e){return t.search()}}},[t._v(t._s(t._f("lang")("search")))])],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.clear()}}},[t._v(t._s(t._f("lang")("clearSearch")))])],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.update()}}},[t._v(t._s(t._f("lang")("save")))])],1)],1),a("m-table",{attrs:{size:"small",border:"",columns:t.columns,data:t.dataList},scopedSlots:t._u([{key:"group",fn:function(e){var o=e.row;return[a("Select",{staticClass:"select",attrs:{filterable:""},on:{"on-change":function(e){return t.change(o)}},model:{value:o.groupId,callback:function(e){t.$set(o,"groupId",e)},expression:"row.groupId"}},t._l(t.groupMap,(function(e,o){return a("Option",{key:o,attrs:{value:e.id}},[t._v(t._s(e.groupName))])})),1)]}},{key:"thIsLock",fn:function(){return[a("Checkbox",{attrs:{value:t.isLockAll()},on:{"on-change":t.lockAll}},[t._v(" "+t._s(t._f("lang")("userGroupManag.lock")))])]},proxy:!0},{key:"isLock",fn:function(e){var o=e.row;return[a("Checkbox",{attrs:{"true-value":1,"false-value":0},on:{"on-change":function(e){return t.change(o)}},model:{value:o.isLock,callback:function(e){t.$set(o,"isLock",e)},expression:"row.isLock"}},[a("span")])]}}])}),a("p",{staticClass:"alert"},[t._v(t._s(t._f("lang")("userGroupManag.lockGroupTips")))]),a("m-page",{attrs:{total:t.totalElements,pageSize:t.pageSize},on:{"on-change":t.query,"on-page-size-change":t.pageSizeChange},model:{value:t.pageNo,callback:function(e){t.pageNo=e},expression:"pageNo"}}),t.isLoad?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)])}),[],!1,null,null,null)),p=c.exports,g={props:{value:{default:!1,type:Boolean},groupId:{default:"",type:String},groupName:{default:"",type:String}},data:function(){var t=this;return{columns:[{title:this.$t("userGroupManag.lockuserName"),key:"userName"},{title:this.$t("userGroupManag.lockType"),key:"isPorxy",count:function(e){return e?t.$t("userGroupManag.proxy"):t.$t("userGroupManag.user")}},{title:this.$t("userGroupManag.group"),slot:"group"},{title:this.$t("userGroupManag.lock"),thslot:"thIsLock",slot:"isLock"}],pageNo:1,pageSize:20,dataList:[],totalElements:0,isLoad:!1}},computed:{value2:{get:function(){return this.value&&this.query(),this.value},set:function(t){this.$emit("input",t)}},isLockAll:{get:function(){return this.dataList.every((function(t){return 1==t.isLock}))},set:function(t){this.lockAll(t)}}},methods:{lockAll:function(t){this.dataList.map((function(e){return e.isLock=t?1:0,e}))},tofixed:function(t){return(t/100).toFixed(2)},query:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoad=!0,this.$get("/user/group/relation/tob/getUserByGroupId",{groupId:this.groupId,pageNo:e,pageSize:this.pageSize}).then((function(e){var a=e.content,o=e.totalElements;t.dataList=a,t.totalElements=+o})).catch((function(e){t.dataList=[],t.totalElements=0,t.$Message.error(e.message)})).finally((function(){t.isLoad=!1}))},pageSizeChange:function(t){this.pageSize=t,this.query(1)},lockAllPage:function(){var t=this;this.isLoad=!0,this.$post("/user/group/relation/tob/lockUserByGroupId",{isLock:1,groupId:this.groupId}).then((function(){t.$Message.success(t.$t("success")),t.query()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.isLoad=!1}))},update:function(){var t=this;this.isLoad=!0;var e=[],a=[];this.dataList.forEach((function(t){+t.isLock?e.push(t.id):a.push(t.id)})),this.$post("/user/group/relation/tob/lockUser",{lockIds:e.join(),unLockIds:a.join()}).then((function(){t.$Message.success(t.$t("success"))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.isLoad=!1}))}}},h=g,d=Object(n.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Drawer",{attrs:{title:t.$t("userGroupManag.changeLock"),width:1060},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[a("Form",{nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.update()}}},[t._v(t._s(t._f("lang")("save")))]),a("Button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.lockAllPage()}}},[t._v(t._s(t._f("lang")("userGroupManag.lockAll")))])],1)],1),a("div",{staticClass:"relative"},[a("m-table",{attrs:{size:"small",border:"",columns:t.columns,data:t.dataList},scopedSlots:t._u([{key:"group",fn:function(){return[t._v(" "+t._s(t.groupName)+" ")]},proxy:!0},{key:"thIsLock",fn:function(){return[a("Checkbox",{model:{value:t.isLockAll,callback:function(e){t.isLockAll=e},expression:"isLockAll"}},[t._v(" "+t._s(t._f("lang")("userGroupManag.lock")))])]},proxy:!0},{key:"isLock",fn:function(e){var o=e.row;return[a("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:o.isLock,callback:function(e){t.$set(o,"isLock",e)},expression:"row.isLock"}},[a("span")])]}}])}),a("m-page",{attrs:{total:t.totalElements,pageSize:t.pageSize},on:{"on-change":t.query,"on-page-size-change":t.pageSizeChange},model:{value:t.pageNo,callback:function(e){t.pageNo=e},expression:"pageNo"}}),t.isLoad?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)}),[],!1,null,null,null),f=d.exports,m={props:{value:{default:!1,type:Boolean},groupId:{default:"",type:String},groupName:{default:"",type:String}},data:function(){return{checkedGroupId:[],groupList:[],showSpin:!1}},methods:{query:function(){var t=this;this.showSpin=!0,this.$get("/user/group/tob/getUserGroup",{ignoreId:this.groupId}).then((function(e){t.groupList=e||[]})).catch((function(e){t.$Message.error(e.message),t.groupList=[]})).finally((function(){t.showSpin=!1}))},save:function(){var t=this;this.showSpin=!0,this.$post("/user/group/relation/tob/transfer",{targetGroupId:this.groupId,chooseGroupId:this.checkedGroupId.join()}).then((function(){t.$Message.success(t.$t("success")),t.$emit("save")})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.showSpin=!1}))}},computed:{value2:{get:function(){return this.value?this.query():this.checkedGroupId=[],this.value},set:function(t){this.$emit("input",t)}}}},v=m,k=Object(n.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:t.$t("userGroupManag.userTransferTitle",{groupName:t.groupName})},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[a("Form",{attrs:{"label-width":126}},[a("FormItem",{attrs:{label:t.$t("userGroupManag.chooseGroup")}},[a("Select",{attrs:{filterable:"",multiple:""},model:{value:t.checkedGroupId,callback:function(e){t.checkedGroupId=e},expression:"checkedGroupId"}},t._l(t.groupList,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.groupName))])})),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(e){return t.$emit("input",!1)}}},[t._v(t._s(t._f("lang")("cancel")))]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v(t._s(t._f("lang")("confirm")))])],1),t.showSpin?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)}),[],!1,null,null,null),y=k.exports,M={props:{value:{default:!1,type:Boolean},groupId:{default:"",type:String},groupName:{default:"",type:String}},data:function(){return{columns:[{title:this.$t("userGroupManag.sortIndex"),count:function(t,e,a){return a+1}},{title:this.$t("userGroupManag.loginAccount"),key:"userName"}],pageNo:1,pageSize:20,dataList:[],totalElements:0,isLoad:!1,userName:"",value2:!1}},watch:{value:function(){this.value?this.query():this.userName="",this.value2=this.value},value2:function(){this.$emit("input",this.value2)}},methods:{query:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoad=!0,this.$get("/user/group/relation/tob/getUserByGroupId",{groupId:this.groupId,pageNo:e,pageSize:this.pageSize,keyword:this.userName}).then((function(e){var a=e||{},o=a.content,r=a.totalElements;t.dataList=o,t.totalElements=+r})).catch((function(e){t.dataList=[],t.totalElements=0,t.$Message.error(e.message)})).finally((function(){t.isLoad=!1}))},pageSizeChange:function(t){this.pageSize=t,this.query(1)},search:function(){this.pageNo=1,this.query(1)}}},$=M,G=Object(n.a)($,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Drawer",{attrs:{title:t.$t("userGroupManag.userListTitle",{groupName:t.groupName}),width:900},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[a("div",{staticClass:"relative"},[a("Form",{attrs:{inline:""}},[a("FormItem",{attrs:{label:t.$t("userGroupManag.loginAccount"),"label-width":70}},[a("Input",{model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary",icon:"md-search"},on:{click:function(e){return t.search()}}},[t._v(t._s(t._f("lang")("search")))])],1)],1),a("m-table",{attrs:{border:"",columns:t.columns,data:t.dataList}}),a("m-page",{attrs:{total:t.totalElements,pageSize:t.pageSize},on:{"on-change":t.query,"on-page-size-change":t.pageSizeChange},model:{value:t.pageNo,callback:function(e){t.pageNo=e},expression:"pageNo"}}),t.isLoad?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)])}),[],!1,null,null,null),_=G.exports,b=(a("b64b"),a("b0c0"),{props:{value:{default:!1,type:Boolean}},data:function(){return{game:{},formModal:{groupId:"",dictCode:null},file:{},downloadIng:!1,showSpin:!1}},methods:{queryGame:function(){var t=this;this.$get("/user/group/tob/getUserGroupAll").then((function(e){t.game=e;var a=Object.keys(e);a.length&&(t.formModal.groupId=a[0])}))},download:function(){var t=this;this.downloadIng=!0,this.$download("/user/group/relation/tob/downloadTemplate",this.formModal).then((function(){t.$Message.success(t.$t("userGroupManag.success"))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.downloadIng=!1}))},change:function(t){this.file=t.target.files[0]},upload:function(){var t=this;if(this.file.name)if(this.formModal.dictCode){this.showSpin=!0;var e=new FormData;e.append("excelFile",this.file),e.append("groupId",this.formModal.groupId),e.append("dictCode",this.formModal.dictCode),this.$post("/user/group/relation/tob/batchAutoGroup",e,{"Content-type":"multipart/form-data"}).then((function(){t.$Message.success(t.$t("userGroupManag.batchAutoGroupTips")),t.$refs.upload.value="",t.file={}})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.showSpin=!1,t.formModal.dictCode=null}))}else this.$Message.error(this.$t("userGroupManag.upLoadTips2"));else this.$Message.error(this.$t("userGroupManag.upLoadTips1"))}},watch:{value:function(){this.value||(this.file={},this.formModal.dictCode=null)}},computed:{value2:{get:function(){return this.value&&this.queryGame(),this.value},set:function(t){this.$emit("input",t)}}}}),w=b,I=Object(n.a)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:t.$t("userGroupManag.batchChangeTransfer"),width:500},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[a("Form",{ref:"formModal",attrs:{model:t.formModal,"label-width":82}},[a("FormItem",{attrs:{label:t.$t("userGroupManag.downLoadM"),prop:"groupId"}},[a("Button",{attrs:{loading:t.downloadIng},on:{click:function(e){return t.download()}}},[t._v(t._s(t._f("lang")("userGroupManag.downLoadM")))])],1),a("FormItem",{attrs:{label:t.$t("userGroupManag.chooseGroup"),prop:"groupId"}},[a("Select",{staticClass:"game-select",attrs:{filterable:""},model:{value:t.formModal.groupId,callback:function(e){t.$set(t.formModal,"groupId",e)},expression:"formModal.groupId"}},t._l(t.game,(function(e,o){return a("Option",{key:o,attrs:{value:e.id}},[t._v(t._s(e.groupName))])})),1)],1),a("FormItem",{attrs:{label:t.$t("userGroupManag.getFile"),prop:"roleId"}},[a("input",{ref:"upload",staticStyle:{display:"none"},attrs:{id:"upload",type:"file",accept:".xls,.xlsx"},on:{change:t.change}}),a("label",{staticClass:"ivu-btn ivu-btn-default",attrs:{for:"upload"}},[a("Icon",{attrs:{type:"ios-cloud-upload-outline",size:"19"}}),a("span",[t._v(t._s(t._f("lang")("userGroupManag.getFile")))])],1),a("p",[t._v(t._s(t.file.name))])]),a("FormItem",{attrs:{label:t.$t("userGroupManag.googleTest"),prop:"dictCode"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("userGroupManag.googleTestTips")},model:{value:t.formModal.dictCode,callback:function(e){t.$set(t.formModal,"dictCode",e)},expression:"formModal.dictCode"}})],1),a("FormItem",[a("p",{staticStyle:{color:"red"}},[t._v(t._s(t._f("lang")("userGroupManag.batchGroupTips")))])])],1),a("div",{staticClass:"operation-btn-group",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){return t.$emit("input",!1)}}},[t._v(t._s(t._f("lang")("userGroupManag.cancel")))]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.upload()}}},[t._v(t._s(t._f("lang")("userGroupManag.confirm")))])],1),t.showSpin?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)}),[],!1,null,null,null),L={data:function(){return{showSpin:!1,columns:[{title:this.$t("userGroupManag.groupNo"),key:"groupNo"},{title:this.$t("userGroupManag.groupName"),slot:"groupName"},{title:this.$t("userGroupManag.peopleSum"),slot:"peopleSum"},{title:this.$t("userGroupManag.remark"),slot:"remark"},{title:this.$t("userGroupManag.operation"),slot:"operation"}],dataList:[],totalElements:0,pageNum:1,pageSize:20,showDetail:!1,detailInfo:null,showUsersGroupManually:!1,autoGroupLoading:!1,showLockUser:!1,showUserTransfer:!1,showUserList:!1,groupId:"",groupName:"",showBatchGrouping:!1}},watch:{showUsersGroupManually:function(t,e){e&&!t&&this.query()}},methods:{query:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.showSpin=!0,this.$get("/user/group/tob/getUserGroupList",{pageSize:this.pageSize,pageNo:e}).then((function(e){var a=e||{},o=a.totalElements,r=a.content,s=a.page;t.dataList=r.map((function(t){return t.isRestore=!1,t.isDownload=!1,t.isDel=!1,t})),t.totalElements=+o,t.pageNum=+s})).catch((function(e){t.dataList=[],t.totalElements=0,t.pageNum=1,t.$Message.error(e.message)})).finally((function(){t.showSpin=!1}))},pageSizeChange:function(t){this.pageSize=t,this.query()},add:function(){this.detailInfo=null,this.showDetail=!0},edit:function(t){this.detailInfo=t,this.showDetail=!0},autoGroup:function(){var t=this;this.$Modal.confirm({title:this.$t("userGroupManag.autoGroup"),content:this.$t("userGroupManag.autoGroupTips"),cancelText:this.$t("userGroupManag.cancel"),onOk:function(){t.autoGroupLoading=!0,t.$post("/user/group/relation/tob/autoGroup").then((function(){t.$Message.success(t.$t("userGroupManag.success")),t.query()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.autoGroupLoading=!1}))}})},open:function(t,e){var a=t.id,o=t.groupName;this.groupId=a,this.groupName=o,this[e]=!0},restore:function(t){var e=this;this.$Modal.confirm({title:this.$t("userGroupManag.batchChageReturn"),content:this.$t("userGroupManag.batchChageReturnTips"),cancelText:this.$t("userGroupManag.cancel"),onOk:function(){t.isRestore=!0,e.$post("/user/group/relation/tob/back",{chooseGroupId:t.id}).then((function(){e.query(),e.$Message.success(e.$t("userGroupManag.success"))})).catch((function(t){e.$Message.error(t.message)})).finally((function(){t.isRestore=!1}))}})},excel:function(t){var e=this;t.isDownload=!0,this.$download("/user/group/relation/tob/exportUserGroup",{groupId:t.id}).then((function(){e.$Message.success(e.$t("userGroupManag.success"))})).catch((function(t){e.$Message.error(t.message)})).finally((function(){t.isDownload=!1}))},del:function(t){var e=this;t.isDel=!0,this.$post("/user/group/tob/deleteUserGroup",{ids:t.id}).then((function(){e.$Message.success(e.$t("userGroupManag.success")),e.query()})).catch((function(t){e.$Message.error(t.message)})).finally((function(){t.isDel=!1}))}},mounted:function(){this.query()},components:{detail:u,usersGroupManually:p,lockUser:f,userTransfer:y,userList:_,batchGrouping:I.exports}},N=L,S=(a("a9dc"),Object(n.a)(N,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-layout",{staticClass:"usergroupmanag",attrs:{nav:[{path:"/userGroupManag",name:t.nowpagetitle}]}},[a("Form",{ref:"formInline",attrs:{inline:""}},[t.pageauthoritys.add?a("FormItem",[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(e){return t.add()}}},[t._v(t._s(t._f("lang")("userGroupManag.addGrounp")))])],1):t._e(),t.pageauthoritys.batchUpdate?a("FormItem",[a("Button",{attrs:{type:"primary",icon:"md-person"},on:{click:function(e){t.showUsersGroupManually=!0}}},[t._v(t._s(t._f("lang")("userGroupManag.batchUpdate")))])],1):t._e(),t.pageauthoritys.changeAutoGroup?a("FormItem",[a("Button",{attrs:{loading:t.autoGroupLoading,type:"primary",icon:"ios-apps"},on:{click:function(e){return t.autoGroup()}}},[t._v(t._s(t._f("lang")("userGroupManag.changeAutoGroup")))])],1):t._e(),t.pageauthoritys.batchChangeTransfer?a("FormItem",[a("Button",{attrs:{type:"primary",icon:"md-person"},on:{click:function(e){t.showBatchGrouping=!0}}},[t._v(t._s(t._f("lang")("userGroupManag.batchChangeTransfer")))])],1):t._e()],1),a("m-table",{attrs:{columns:t.columns,data:t.dataList,size:"small"},scopedSlots:t._u([{key:"groupName",fn:function(e){var a=e.row;return[t._v(" "+t._s(1===a.isDefault?t.$t("userGroupManag.defaultGroup"):a.groupName)+" ")]}},{key:"peopleSum",fn:function(e){var o=e.row;return[o.userCount?a("span",{staticClass:"blue",on:{click:function(e){return t.open(o,"showUserList")}}},[t._v(t._s(o.userCount))]):[t._v(t._s(o.userCount))]]}},{key:"remark",fn:function(e){var o=e.row;return[a("Poptip",{attrs:{content:o.remark,title:t.$t("userGroupManag.remark"),width:"400","word-wrap":""}},[a("Icon",{staticClass:"blue",attrs:{type:"ios-information-circle"}})],1)]}},{key:"operation",fn:function(e){var o=e.row;return[a("div",{staticClass:"operation-btn-group"},[t.pageauthoritys.update&&!+o.isDefault?a("Tooltip",{attrs:{content:t.$t("userGroupManag.update"),placement:"top"}},[a("Button",{attrs:{size:"small",icon:"md-create"},on:{click:function(e){return t.edit(o)}}})],1):t._e(),t.pageauthoritys.changeLock?a("Tooltip",{attrs:{content:t.$t("userGroupManag.changeLock"),placement:"top"}},[a("Button",{attrs:{size:"small",icon:"md-lock"},on:{click:function(e){return t.open(o,"showLockUser")}}})],1):t._e(),t.pageauthoritys.changeGroup?a("Tooltip",{attrs:{content:t.$t("userGroupManag.changeGroup"),placement:"top"}},[a("Button",{attrs:{size:"small",icon:"md-repeat"},on:{click:function(e){return t.open(o,"showUserTransfer")}}})],1):t._e(),t.pageauthoritys.batchChageReturn&&!+o.isDefault?a("Tooltip",{attrs:{content:t.$t("userGroupManag.batchChageReturn"),placement:"top"}},[a("Button",{attrs:{size:"small",loading:o.isRestore,icon:"md-refresh"},on:{click:function(e){return t.restore(o)}}})],1):t._e(),t.pageauthoritys.batchCheckOutExcel&&+o.userCount?a("Tooltip",{attrs:{content:t.$t("userGroupManag.batchCheckOutExcel"),placement:"top"}},[a("Button",{attrs:{size:"small",loading:o.isDownload,icon:"md-arrow-round-down"},on:{click:function(e){return t.excel(o)}}})],1):t._e(),t.pageauthoritys.delete&&!+o.isDefault&&0>=+o.userCount?a("Poptip",{attrs:{confirm:"",title:""+t.$t("userGroupManag.delete")+o.groupName+"？"},on:{"on-ok":function(e){return t.del(o)}}},[a("Button",{attrs:{size:"small",loading:o.isDel,icon:"md-trash"}})],1):t._e()],1)]}}])}),t.showSpin?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),a("m-page",{attrs:{total:t.totalElements,pageSizeOpts:[20,30,50],pageSize:t.pageSize},on:{"on-change":t.query,"on-page-size-change":t.pageSizeChange},model:{value:t.pageNum,callback:function(e){t.pageNum=e},expression:"pageNum"}}),a("userList",{attrs:{groupId:t.groupId,groupName:t.groupName},model:{value:t.showUserList,callback:function(e){t.showUserList=e},expression:"showUserList"}}),a("detail",{attrs:{detail:t.detailInfo},on:{add:function(e){return t.query(t.pageNum)}},model:{value:t.showDetail,callback:function(e){t.showDetail=e},expression:"showDetail"}}),a("users-group-manually",{model:{value:t.showUsersGroupManually,callback:function(e){t.showUsersGroupManually=e},expression:"showUsersGroupManually"}}),a("lock-user",{attrs:{groupId:t.groupId,groupName:t.groupName},model:{value:t.showLockUser,callback:function(e){t.showLockUser=e},expression:"showLockUser"}}),a("user-transfer",{attrs:{groupId:t.groupId,groupName:t.groupName},on:{save:function(e){return t.query()}},model:{value:t.showUserTransfer,callback:function(e){t.showUserTransfer=e},expression:"showUserTransfer"}}),a("batch-grouping",{model:{value:t.showBatchGrouping,callback:function(e){t.showBatchGrouping=e},expression:"showBatchGrouping"}})],1)}),[],!1,null,null,null));e.default=S.exports},"83c8":function(t,e,a){},a9dc:function(t,e,a){"use strict";a("f9a0")},c439:function(t,e,a){},ce0b:function(t,e,a){"use strict";a("83c8")},f55d:function(t,e,a){"use strict";a("c439")},f9a0:function(t,e,a){}}]);