(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d229b7c"],{df48:function(t,e,a){"use strict";a.r(e);var s=a("5530"),n=(a("d3b7"),a("d81d"),a("a9e3"),a("159b"),{name:"salaryRecord",data:function(){return{date:new Date,userName:"",salaryStatus:3,dateOption:{disabledDate:function(t){return new Date(t)>new Date}},records:[],loading:!1,page:1,size:10,totalElements:0,selectedList:[],columns:[{type:"selection",width:60,align:"center"},{title:this.$t("date"),key:"date"},{title:this.$t("roomManage.proxyAccount"),key:"userName"},{title:this.$t("proxyMark.directUnderAmount"),key:"directUnderAmount"},{title:this.$t("proxyMark.monthlySalary"),key:"formatSalary"},{title:this.$t("roomManage.status"),slot:"status"}],SALARY_STATUS:{1:this.$t("proxyMark.unaccalimed"),2:this.$t("proxyMark.received"),3:this.$t("proxyMark.pendingApproval"),4:this.$t("proxyMark.refuseToCollect")},SALARY_STATUS_SELECT_LIST:[{id:1,name:this.$t("proxyMark.unaccalimed")},{id:2,name:this.$t("proxyMark.received")},{id:3,name:this.$t("proxyMark.pendingApproval")},{id:4,name:this.$t("proxyMark.refuseToCollect")}]}},methods:{pageSizeChange:function(t){this.size=t,this.getRecords(1)},resetHandler:function(){this.userName="",this.date=new Date},getRecords:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading||(this.loading=!0,this.$get("/activity/proxyFlag/tob/salaryRecordPage",{date:this.$utils.formatDate(this.date,"YYYY-MM"),userName:this.userName,salaryStatus:this.salaryStatus,page:this.page=e,size:this.size}).then((function(e){var a=e.content,n=void 0===a?[]:a,r=e.totalElements,o=void 0===r?0:r;0===n.length&&t.page>1&&(t.loading=!1,t.page=t.page-1,t.getRecords(t.page)),t.records=n.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{formatSalary:t.$utils.toYuan(e.monthlySalary),formatStatus:t.SALARY_STATUS[e.salaryStatus],_disabled:Boolean(3!==e.salaryStatus)})})),t.totalElements=Number(o)})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1})))},batchSalaryStatus:function(t,e,a){var s=this;if(0!=t||0!==this.selectedList.length){if(!this.loading){var n=0==a.length?this.selectedList:a;this.loading=!0,this.$post("/activity/proxyFlag/tob/salaryStatus",{salaryRecordIds:n,salaryStatus:e},{"Content-type":"application/json;charset=UTF-8"}).then((function(){s.$Message.success(s.$t("success")),s.selectedList=[],s.$refs.selection.selectAll(!1),setTimeout((function(){s.getRecords(s.page)}),500)})).catch((function(t){s.$Message.error(t.message)})).finally((function(){s.loading=!1}))}}else this.$Message.error(this.$t("grabSet.checkOptionTips"))},selectionChange:function(t){var e=[];t.forEach((function(t){return e.push(t.id)})),this.selectedList=e}},mounted:function(){this.getRecords(1)}}),r=n,o=a("2877"),i=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loading?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),a("Form",{attrs:{inline:""}},[a("FormItem",[a("span",[t._v(t._s(t.$t("date"))+" ")]),a("DatePicker",{staticStyle:{width:"150px"},attrs:{options:t.dateOption,clearable:!1,type:"month",placeholder:t.$t("date")},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("FormItem",[a("span",[t._v(t._s(t.$t("roomManage.proxyAccount")))]),a("Input",{staticStyle:{width:"150px"},attrs:{placeholder:t.$t("roomManage.proxyAccount")},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),a("FormItem",[a("span",[t._v(t._s(t.$t("roomManage.status"))+" ")]),a("Select",{staticStyle:{width:"120px","margin-left":"6px"},model:{value:t.salaryStatus,callback:function(e){t.salaryStatus=e},expression:"salaryStatus"}},t._l(t.SALARY_STATUS_SELECT_LIST,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),a("FormItem",[a("Button",{attrs:{type:"primary",icon:"md-search"},on:{click:function(e){return t.getRecords(1)}}},[t._v(t._s(t._f("lang")("rebate.search")))])],1),a("FormItem",[a("Button",{on:{click:function(e){return t.resetHandler()}}},[t._v(t._s(t.$t("reset")))])],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.batchSalaryStatus(0,1,[])}}},[t._v(t._s(t._f("lang")("firstDepositReward.batchPass")))])],1),a("FormItem",[a("Button",{attrs:{type:"error"},on:{click:function(e){return t.batchSalaryStatus(0,4,[])}}},[t._v(t._s(t._f("lang")("firstDepositReward.bulkRejection")))])],1)],1),a("Table",{ref:"selection",attrs:{border:"",columns:t.columns,data:t.records,"no-data-text":t.$t("rebate.noData")},on:{"on-selection-change":t.selectionChange},scopedSlots:t._u([{key:"status",fn:function(e){var s=e.row;return[3!==s.salaryStatus?[a("span",[t._v(t._s(s.formatStatus))])]:[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.batchSalaryStatus(1,1,[s.id])}}},[t._v(t._s(t.$t("activeConfiguration.pass")))]),a("Button",{attrs:{type:"error"},on:{click:function(e){return t.batchSalaryStatus(1,4,[s.id])}}},[t._v(t._s(t.$t("activeConfiguration.reject")))])]]}}])}),a("m-page",{attrs:{total:t.totalElements,pageSize:t.size,pageSizeOpts:[10,20,50,100,200,300]},on:{"on-change":t.getRecords,"on-page-size-change":t.pageSizeChange},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)}),[],!1,null,null,null);e.default=i.exports}}]);