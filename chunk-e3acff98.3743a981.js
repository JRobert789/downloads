(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e3acff98"],{4475:function(t,e,a){"use strict";a("54db")},4810:function(t,e,a){"use strict";a.r(e);var n=a("3835"),s=a("2909"),r=a("5530"),i=(a("159b"),a("b64b"),a("a9e3"),a("99af"),a("caad"),a("2532"),a("4de4"),a("d3b7"),a("4e82"),a("c740"),a("a434"),a("d81d"),a("b680"),a("7db0"),a("a8e2")),o={name:"ProxyReport",components:{Nav:a("3d01").a},data:function(){return{showSpin:!1,dateOptions:this.$utils.genDateConfig(180),date:this.$utils.getTodayArr(),teamUsername:"",highUsername:"",orderField:"rechargeAmount",desc:"0",userId:"",userIds:[],orderField_DateObj:{key:"formatDate",name:this.$t("date")},orderField_s:[{key:"rechargeAmount",name:this.tfn("rechargeAmount")},{key:"withdrawAmount",name:this.tfn("withdrawalAmount")}],desc_s:i.b,proxyList:[],pageNo:1,pageSize:20,total:0,showTeamUsername:!1,totalData:null}},methods:{dateChange:function(t){if(Object(i.c)(t)){var e=t[0],a=this.$utils.formatDate(new Date(new Date(e).getTime()+2592e6),"YYYY-MM-DD");this.date=[e,a],this.$Message.info(this.tfn("timeSpan"))}},tfn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$t("report.".concat(t),e)},formatTotal:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t||!t.length)return null;var n={};return n=t.reduce((function(t,e){return Object.keys(e).forEach((function(a){!isNaN(+e[a])&&(t[a]||(t[a]=0),t[a]+=Number(e[a]))})),t}),{}),Object.keys(n).forEach((function(t){(/Amount$/.test(t)||"rechargeWithdrawDiff"===t)&&(n[t]=e.$utils.toYuan(n[t]))})),Object(r.a)(Object(r.a)({colspan:a?1:3},n),{},{newPerson:"".concat(n.teamUserCount||0," (").concat(n.registerUserCount||0,")")})},searchHandler:function(){this.userId="",this.getReportList()},join:function(t){this.highUsername="",this.userId=t,t&&this.userIds.push(t),this.getReportList()},getReportList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.showSpin){this.showSpin=!0;var a={beginTime:this.$utils.formatDate(this.date[0],"YYYY-MM-DD 00:00:00"),endTime:this.$utils.formatDate(this.date[1],"YYYY-MM-DD 23:59:59"),page:this.page=e,size:this.pageSize};this.userId?a.userId=this.userId:this.highUsername&&(a.highUsername=this.highUsername),this.teamUsername&&(a.teamUsername=this.teamUsername),this.showTeamUsername=!!a.teamUsername,this.showTeamUsername?this.orderField_s.includes(this.orderField_DateObj)||(this.orderField_s.unshift(this.orderField_DateObj),this.orderField=this.orderField_DateObj.key,this.desc="0"):this.orderField_s.includes(this.orderField_DateObj)&&(this.orderField_s=this.orderField_s.filter((function(e){return e!==t.orderField_DateObj})),this.orderField===this.orderField_DateObj.key&&(this.orderField=this.orderField_s[0].key));var n=0==+this.desc?"desc":"asc";a[n]=this.orderField,this.$get("/report/tob/pageProxyReport",a).then((function(e){var r=e.content,i=void 0===r?[]:r,o=e.totalElements;if(t.showTeamUsername)t.totalData=t.formatTotal(e,!0),t.proxyList=t.formatData(e),t.proxyList.sort((function(t,e){var s=a[n];return"asc"===n?Number(t[s])-Number(e[s]):Number(e[s])-Number(t[s])}));else{var u=i.findIndex((function(t){return t.userId===a.userId}));if(u>-1){var d=i.splice(u,1);i=[].concat(Object(s.a)(d),Object(s.a)(i))}t.totalData=t.formatTotal(i),t.proxyList=t.formatData(i)}t.total=Number(o)||0})).catch((function(e){t.proxyList=[],t.totalData=null,t.total=0,t.$Message.error(e.message)})).finally((function(){t.showSpin=!1}))}},formatData:function(t){var e=this;return t&&t.length?t.map((function(t){var a=t.registerUserCount,n=t.teamUserCount;a=Number(a)||0,n=Number(n)||0;var s="".concat(n," (").concat(a,")");return Object.keys(t).forEach((function(a){(/Amount$/.test(a)||"rechargeWithdrawDiff"===a)&&(t[a]=e.$utils.toYuan(t[a]))})),Object.assign({},{formatDate:new Date(t.date),newPerson:s},t)})):t},pageSizeChange:function(t){this.pageSize=t,this.getReportList(1)},counted:function(t,e){switch(e){case"betRebate":return(100*((+t.winAmount+ +t.rebateMoney-+t.betMoney)/+t.betMoney||0)).toFixed(2);case"activeWin":return((+t.winAmount+ +t.rebateMoney+ +t.earnWaterMoney+ +t.activeMoney-+t.betMoney)/100).toFixed(2)}},goUpTable:function(){var t=this.userId,e=null;this.proxyList.length&&(e=(this.proxyList.find((function(e){return e.highUserId!==t}))||{}).highUserId),this.userId=e,this.teamUsername="",this.highUsername="",this.getReportList()}},mounted:function(){this.getReportList()},computed:{tableHeads:function(){var t=[],e=[this.$t("date")],a=[[this.tfn("accountName"),this.tfn("accountNameTip")],this.tfn("grade"),this.tfn("immediateSuperior"),[this.tfn("newTeamCount"),this.tfn("newTeamCountTip")],[this.tfn("playerBalance"),this.tfn("playerBalanceTip")]];return[].concat(Object(s.a)(this.showTeamUsername?e:a),[[this.tfn("rechargeCount"),this.tfn("rechargeCountTip")],[this.tfn("withdrawalCount"),this.tfn("withdrawalCountTip")],this.$t("fund.memberTax"),this.$t("fund.platformTax"),this.tfn("rechargeWithdrawalDifference"),this.tfn("orderAmountCount"),this.tfn("orderCount"),this.tfn("commission"),this.tfn("teamCommission"),this.tfn("activityCash")]).forEach((function(e){var a=e,s="";if(Array.isArray(e)){var r=Object(n.a)(e,2);a=r[0],s=r[1]}t.push({title:a,exp:s})})),t}}},u=o,d=(a("4475"),a("2877")),c=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"report"},[a("Nav",{attrs:{nav:[{path:"/proxyreport",name:t.nowpagetitle}]}}),a("div",{staticClass:"report__content"},[a("div",{staticClass:"search__list"},[a("div",{staticClass:"search__item"},[a("span",[t._v(t._s(t.tfn("dateRange"))+" ")]),a("DatePicker",{attrs:{type:"daterange",confirm:"",options:t.dateOptions,clearable:!1},on:{"on-change":t.dateChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("div",{staticClass:"search__item"},[a("span",[t._v(t._s(t.tfn("teamQuery"))+" ")]),a("Input",{staticClass:"input__style",attrs:{clearable:!1,placeholder:t.tfn("inputTip")},on:{"on-keyup":function(e){t.teamUsername=t.teamUsername.replace(/[, ]/g,"")}},model:{value:t.teamUsername,callback:function(e){t.teamUsername=e},expression:"teamUsername"}})],1),a("div",{staticClass:"search__item"},[a("span",[t._v(t._s(t.tfn("superiorAgent"))+" ")]),a("Input",{staticClass:"input__style",attrs:{clearable:!1,placeholder:t.tfn("inputTip")},on:{"on-keyup":function(e){t.highUsername=t.highUsername.replace(/[, ]/g,"")}},model:{value:t.highUsername,callback:function(e){t.highUsername=e},expression:"highUsername"}})],1),a("div",{staticClass:"search__item"},[a("span",[t._v(t._s(t.tfn("sortType"))+" ")]),a("Select",{staticStyle:{width:"100px"},model:{value:t.orderField,callback:function(e){t.orderField=e},expression:"orderField"}},t._l(t.orderField_s,(function(e){return a("Option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.name))])})),1)],1),a("div",{staticClass:"search__item"},[a("span",[t._v(t._s(t.tfn("sortRule"))+" ")]),a("Select",{staticStyle:{width:"100px"},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}},t._l(t.desc_s,(function(e){return a("Option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.name))])})),1)],1),a("div",{staticClass:"search__item"},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.searchHandler}},[t._v(t._s(t._f("lang")("query")))])],1),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.goUpTable()}}},[t._v(t._s(t._f("lang")("backToPre")))])],1),a("table",[a("tr",t._l(t.tableHeads,(function(e,n){return a("th",{key:n},[e.exp?[a("Poptip",{staticClass:"head_item",attrs:{trigger:"hover",placement:n<5?"top-start":"top-end"}},[t._v(" "+t._s(e.title)+" "),a("p",{staticClass:"common_tip",attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(e.exp)+" ")])])]:[t._v(" "+t._s(e.title)+" ")]],2)})),0),t.proxyList&&t.proxyList.length?t._l(t.proxyList,(function(e){return a("tr",{key:e.userusernameName},[t.showTeamUsername?[a("td",[t._v(t._s(e.date))])]:[e.hasChild?a("td",[a("a",{on:{click:function(a){return t.join(e.userId)}}},[t._v(t._s("厅主"===e.username?t.$t("proxy.Tingzhu"):e.username))])]):a("td",[t._v(t._s("厅主"===e.username?t.$t("proxy.Tingzhu"):e.username))]),a("td",[t._v(t._s("0"!==e.userId?e.level:""))]),a("td",[t._v(t._s("default"===e.highUsername?t.tfn("default"):e.highUsername))]),a("td",[t._v(t._s(e.newPerson))]),a("td",[t._v(t._s(e.balanceAmount+"("+t.tfn("nPeople",{n:e.balanceUserCount})+")"))])],a("td",[t._v(t._s(e.rechargeAmount)+" ("+t._s(t.tfn("nPeople",{n:e.rechargeUserCount}))+")")]),a("td",[t._v(t._s(e.withdrawAmount)+" ("+t._s(t.tfn("nPeople",{n:e.withdrawUserCount}))+")")]),a("td",[t._v(t._s((e.memberTax/100).toFixed(2)))]),a("td",[t._v(t._s((e.platformTax/100).toFixed(2)))]),a("td",[t._v(t._s(e.rechargeWithdrawDiff))]),a("td",[t._v(t._s(e.orderAmount)+" ("+t._s(t.tfn("nPeople",{n:e.grabUserCount}))+")")]),a("td",[t._v(t._s(e.orderCount))]),a("td",[t._v(t._s(e.commissionAmount))]),a("td",[t._v(t._s(e.teamCommissionAmount))]),a("td",[t._v(t._s(e.activeBonusAmount))])],2)})):t._e(),t.totalData?a("tr",[a("td",{attrs:{colspan:t.totalData.colspan}},[t._v(t._s(t.tfn("subtotal")))]),t.showTeamUsername?t._e():[a("td",[t._v(t._s(t.totalData.newPerson))]),a("td",[t._v(t._s(t.totalData.balanceAmount+"("+t.tfn("nPeople",{n:t.totalData.balanceUserCount})+")"))])],a("td",[t._v(t._s(t.totalData.rechargeAmount)+" ("+t._s(t.tfn("nPeople",{n:t.totalData.rechargeUserCount}))+")")]),a("td",[t._v(t._s(t.totalData.withdrawAmount)+" ("+t._s(t.tfn("nPeople",{n:t.totalData.withdrawUserCount}))+")")]),a("td",[t._v(t._s((t.totalData.memberTax/100).toFixed(2)))]),a("td",[t._v(t._s((t.totalData.platformTax/100).toFixed(2)))]),a("td",[t._v(t._s(t.totalData.rechargeWithdrawDiff))]),a("td",[t._v(t._s(t.totalData.orderAmount)+" ("+t._s(t.tfn("nPeople",{n:t.totalData.grabUserCount}))+")")]),a("td",[t._v(t._s(t.totalData.orderCount))]),a("td",[t._v(t._s(t.totalData.commissionAmount))]),a("td",[t._v(t._s(t.totalData.teamCommissionAmount))]),a("td",[t._v(t._s(t.totalData.activeBonusAmount))])],2):[a("tr",[a("td",{attrs:{colspan:16}},[t._v(t._s(t.$t("Nodata")))])])]],2),t.total?a("m-page",{attrs:{total:t.total,page:t.pageNo,pageSize:t.pageSize,pageSizeOpts:[10,20,50,100]},on:{"on-change":t.getReportList,"on-page-size-change":t.pageSizeChange},model:{value:t.pageNo,callback:function(e){t.pageNo=e},expression:"pageNo"}}):t._e(),t._m(0),t.showSpin?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tips"},[a("p",[t._v("注:")]),a("p",[t._v("1. 数据未统计取消的订单")])])}],!1,null,null,null);e.default=c.exports},"54db":function(t,e,a){},a8e2:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return u}));var n=a("3835"),s=(a("b680"),a("d36b")),r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.a.t("report.".concat(t),e)},i={shortcuts:[{ttext:s.a.t("fund.today"),code:"today",value:function(){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0);var e=new Date;return e.setHours(23),e.setMinutes(59),e.setSeconds(59),[new Date(t),e]}},{text:s.a.t("fund.yesterday"),code:"yesterday",value:function(){var t=new Date;t.setTime(t.getTime()-864e5),t.setHours(0),t.setMinutes(0),t.setSeconds(0);var e=new Date(t);return e.setHours(23),e.setMinutes(59),e.setSeconds(59),[t,e]}},{text:s.a.t("fund.thisweek"),code:"week",value:function(){var t=new Date,e=t.getDay()||7,a=new Date(t-864e5*(e-1));return a.setHours(0),a.setMinutes(0),a.setSeconds(0),[a,new Date]}},{text:s.a.t("fund.lastweek"),code:"lastWeek",value:function(){var t=new Date,e=t.getDay()||7,a=864e5,n=new Date(t-e*a),s=new Date(t-(e+6)*a);return s.setHours(0),s.setMinutes(0),s.setSeconds(0),n.setHours(23),n.setMinutes(59),n.setSeconds(59),[s,n]}},{text:s.a.t("fund.thismonth"),code:"month",value:function(){var t=new Date;t.setDate(1);var e=new Date(t);e.setHours(0),e.setMinutes(0),e.setSeconds(0);var a=new Date;return a.setHours(23),a.setMinutes(59),a.setSeconds(59),[e,a]}},{text:s.a.t("nearlySevenDays"),value:function(){var t=new Date,e=new Date;return t.setHours(23),t.setMinutes(59),t.setSeconds(59),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setTime(e.getTime()-5184e5),[e,t]}},{text:s.a.t("nearly15Days"),value:function(){var t=new Date,e=new Date;return t.setHours(23),t.setMinutes(59),t.setSeconds(59),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setTime(e.getTime()-12096e5),[e,t]}},{text:s.a.t("nearly30Days"),value:function(){var t=new Date,e=new Date;return t.setHours(23),t.setMinutes(59),t.setSeconds(59),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setTime(e.getTime()-25056e5),[e,t]}}],disabledDate:function(t){return t&&t.valueOf()>Date.now()||t.valueOf()<Date.now()-15552e6}},o=(s.a.t("fund.today"),s.a.t("fund.yesterday"),s.a.t("fund.lastweek"),s.a.t("fund.thismonth"),s.a.t("fund.lastmonth"),s.a.t("nearlySevenDays"),s.a.t("nearly15Days"),s.a.t("nearly30Days"),s.a.t("fund.today"),s.a.t("fund.yesterday"),s.a.t("fund.last7"),s.a.t("fund.thismonth"),s.a.t("fund.lastmonth"),[{key:"0",name:r("decrease")},{key:"1",name:r("increase")}]);function u(t){var e,a=Object(n.a)(t,2),s=a[0],r=a[1];return s=Date.parse(s),e=(r=Date.parse(r))-s,e=Math.abs(e),Math.floor(e/864e5)>30}}}]);