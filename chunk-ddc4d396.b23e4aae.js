(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ddc4d396"],{"602b":function(t,e,s){},"86bc":function(t,e,s){"use strict";s.r(e);var n=(s("d3b7"),s("d81d"),s("a15b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Drawer",{attrs:{width:"700"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},[t.loading?s("Spin",{attrs:{fix:""}}):t._e(),s("Form",{ref:"form",attrs:{model:t.form,"label-width":180,rules:t.rule}},[s("FormItem",[t._v(" "+t._s(t._f("lang")("fm.newDepositPlan"))+" ")]),s("FormItem",{attrs:{label:t.$t("fm.name"),prop:"regName"}},[s("Input",{staticClass:"width-200",model:{value:t.form.regName,callback:function(e){t.$set(t.form,"regName",e)},expression:"form.regName"}})],1),s("FormItem",{attrs:{label:t.$t("fm.days"),prop:"dayNum"}},[s("InputNumber",{staticClass:"width-200",attrs:{min:1,max:365},model:{value:t.form.dayNum,callback:function(e){t.$set(t.form,"dayNum",e)},expression:"form.dayNum"}})],1),s("FormItem",{attrs:{label:t.$t("fm.earningsYield"),prop:"rate"}},[s("InputNumber",{staticClass:"width-200",attrs:{"active-change":!1,min:.01,max:99999999.99,precision:2},model:{value:t.form.rate,callback:function(e){t.$set(t.form,"rate",e)},expression:"form.rate"}})],1),s("FormItem",{attrs:{prop:"firstRewardEnable"},scopedSlots:t._u([{key:"label",fn:function(){return[s("Checkbox",{attrs:{"true-value":1,"false-value":0},on:{"on-change":t.firstRewardEnableChange},model:{value:t.form.firstRewardEnable,callback:function(e){t.$set(t.form,"firstRewardEnable",e)},expression:"form.firstRewardEnable"}},[t._v("  "+t._s(t._f("lang")("fm.firstDepositReward")))])]},proxy:!0}])},[s("div",{staticClass:"first_active"},[s("Input",{staticClass:"width-200 left_i",attrs:{disabled:!t.form.firstRewardEnable},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("span",[t._v(t._s(t._f("lang")("fm.firstDeposit")))])]},proxy:!0}]),model:{value:t.form.firstCondition,callback:function(e){t.$set(t.form,"firstCondition",e)},expression:"form.firstCondition"}}),s("Input",{staticClass:"width-200 right_i",attrs:{disabled:!t.form.firstRewardEnable},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("span",[t._v(t._s(t._f("lang")("fm.reward")))])]},proxy:!0}]),model:{value:t.form.firstReward,callback:function(e){t.$set(t.form,"firstReward",e)},expression:"form.firstReward"}})],1)]),s("FormItem",{attrs:{label:t.$t("fm.regular"),prop:"reg"}},[s("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.form.reg,callback:function(e){t.$set(t.form,"reg",e)},expression:"form.reg"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t._f("lang")("fm.turnOn")))]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t._f("lang")("fm.close")))])])],1),s("FormItem",{attrs:{label:t.$t("fm.state"),prop:"status"}},[s("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t._f("lang")("fm.turnOn")))]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t._f("lang")("fm.disabled")))])])],1),s("FormItem",{staticClass:"m-b-20"},[s("Button",{staticStyle:{"margin-right":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.handleConfirm(!0)}}},[t._v(t._s(t._f("lang")("confirm")))]),s("Button",{on:{click:function(e){t.value2=!1}}},[t._v(t._s(t._f("lang")("cancel")))])],1)],1)],1)}),a=(s("b680"),{props:{value:{default:!1,type:Boolean},item:{default:null,type:Object},type:{default:"",type:String}},data:function(){var t=this;return{loading:!1,form:{firstRewardEnable:0},rule:{regName:[{type:"string",required:!0,min:0,max:50,message:this.$t("fm.pleaseFillInTheName"),trigger:"blur"}],dayNum:[{type:"number",required:!0,message:this.$t("fm.pleaseFillInTheNumberOfDays"),trigger:"blur"}],rate:[{type:"number",required:!0,message:this.$t("fm.pleaseFillInTheRateOfReturn"),trigger:"blur"}],firstRewardEnable:[{required:!1,validator:function(e,s,n){var a=/^(([1-9]{1}\d{0,8})|(0{1}))(\.\d{0,2})?$/;s?t.form.firstCondition?t.form.firstReward?a.test(t.form.firstCondition)&&a.test(t.form.firstReward)?n():n(new Error(t.$t("fm.enterNumber"))):n(new Error(t.$t("fm.pleaseEnterReward"))):n(new Error(t.$t("fm.pleaseEnterTheFirstDepositConditionAmount"))):n()},trigger:"blur"}]}}},mounted:function(){},methods:{firstRewardEnableChange:function(t){t||(this.form.firstCondition=null,this.form.firstReward=null,this.$refs.form.validateField("firstRewardEnable"))},handleConfirm:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.loading=!0,t.form.firstCondition=(100*(+t.form.firstCondition||0)).toFixed(),t.form.firstReward=(100*(+t.form.firstReward||0)).toFixed(),"edit"==t.type?t.$post("/incr/setting/tob/updateSetting",t.form).then((function(){t.$Message.success(t.$t("opSuccess")),t.$emit("onSuccess")})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1,t.value2=!1})):t.$post("/incr/setting/tob/saveSetting",t.form).then((function(){t.$Message.success(t.$t("opSuccess")),t.$emit("onSuccess")})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1,t.value2=!1})))}))}},watch:{value:function(t){t&&("add"==this.type?this.form={dayNum:null,rate:null,reg:0,firstRewardEnable:0,status:0}:(this.form=JSON.parse(JSON.stringify(this.item)),this.form.dayNum=+this.form.dayNum,this.form.rate=+this.form.rate,this.form.firstCondition=((+this.form.firstCondition||0)/100).toFixed(2),this.form.firstReward=((+this.form.firstReward||0)/100).toFixed(2)))}},computed:{value2:{get:function(){return this.value},set:function(t){this.$emit("input",t),this.showList=!1,this.username=""}}}}),i=a,r=(s("f202"),s("2877")),o={name:"regularConfig",data:function(){return{showAddConfig:!1,totalElements:0,pageNum:1,pageSize:20,columns:[{type:"selection",width:60,align:"center"},{title:this.$t("fm.name"),key:"regName"},{title:this.$t("fm.days"),key:"dayNum"},{title:this.$t("fm.earningsYield"),key:"rate"},{title:this.$t("fm.numberOfDeposits"),key:"transferTimes"},{title:this.$t("fm.firstDepositReward"),slot:"firstDepositReward"},{title:this.$t("fm.createTime"),key:"createTime"},{title:this.$t("fm.regular"),slot:"reg"},{title:this.$t("fm.state"),slot:"status"},{title:this.$t("rebate.operate"),key:"operation",slot:"action"}],dataList:[],tabList:[],editItem:{},editType:""}},components:{addConfig:Object(r.a)(i,n,[],!1,null,null,null).exports},mounted:function(){this.query()},methods:{handleBeforeChange:function(){var t=this;return new Promise((function(e){t.$Modal.confirm({title:t.$t("fm.switchConfirmation"),content:t.$t("fm.areYouSureYouWantToChangeTheSwitchState"),onOk:function(){e()}})}))},handleChangeStatus:function(t,e){var s=this;"status"==e?(this.loading=!0,this.$post("/incr/setting/tob/updateStatus",{id:[t.id],status:t.status},{formatway:"repeat"}).then((function(){s.$Message.success(s.$t("opSuccess")),s.query()})).catch((function(t){s.$Message.error(t.message)})).finally((function(){s.loading=!1}))):(this.loading=!0,this.$post("/incr/setting/tob/batchUpdateReg",{ids:[t.id],reg:t.reg},{formatway:"repeat"}).then((function(){s.$Message.success(s.$t("opSuccess")),s.query()})).catch((function(t){s.$Message.error(t.message)})).finally((function(){s.loading=!1})))},handleAdd:function(){this.editType="add",this.showAddConfig=!0},handleDel:function(t){var e=this;return new Promise((function(s){e.$Modal.confirm({title:e.$t("deleteTip"),content:e.$t("fm.areYouSureToDeleteThisProduct"),onOk:function(){e.loading=!0,e.$post("/incr/setting/tob/deleteSetting",{id:t.id}).then((function(){e.$Message.success(e.$t("opSuccess")),e.query()})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading=!1}))}})}))},handleEdit:function(t){this.editType="edit",this.showAddConfig=!0,this.editItem=JSON.parse(JSON.stringify(t))},pageSizeChange:function(t){this.pageSize=t,this.pageNum=1,this.query()},query:function(){var t=this;this.$post("/incr/setting/tob/findSettingByPage",{number:this.pageNum,size:this.pageSize}).then((function(e){t.dataList=e.content,t.totalElements=+e.totalElements})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},selectHandle:function(t){this.tabList=t},muilteOp:function(t){var e=this;if(this.tabList.length){var s=[];return this.tabList.map((function(t,e){s.push(t.id)})),"delete"==t?new Promise((function(t){e.$Modal.confirm({title:e.$t("fm.toggleDelete"),content:e.$t("fm.areYouSureToDeleteInBulk"),onOk:function(){e.loading=!0,e.$delete("/incr/setting/tob/batchDeleteSetting",{ids:s.join(",")}).then((function(){e.$Message.success(e.$t("opSuccess")),e.query()})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading=!1}))}})})):"open"==t?new Promise((function(t){e.$Modal.confirm({title:e.$t("fm.toggleOn"),content:e.$t("fm.areYouSureToOpenInBulk"),onOk:function(){e.loading=!0,e.$post("/incr/setting/tob/batchUpdateStatus",{ids:s.join(","),status:1}).then((function(){e.$Message.success(e.$t("opSuccess")),e.query()})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading=!1}))}})})):"close"==t?new Promise((function(t){e.$Modal.confirm({title:e.$t("fm.toggleOff"),content:e.$t("fm.areYouSureToCloseInBulk"),onOk:function(){e.loading=!0,e.$post("/incr/setting/tob/batchUpdateStatus",{ids:s.join(","),status:0}).then((function(){e.$Message.success(e.$t("opSuccess")),e.query()})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading=!1}))}})})):void 0}this.$Message.info(this.$t("fm.pleaseSelectAtLeastOneItem"))}}},l=o,f=(s("f34b"),Object(r.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.pageauthoritys.batchUpdateStatus?s("Button",{staticClass:"m-r-10",attrs:{type:"primary"},on:{click:function(e){return t.muilteOp("open")}}},[t._v(t._s(t._f("lang")("fm.turnOn")))]):t._e(),t.pageauthoritys.batchUpdateStatus?s("Button",{staticClass:"m-r-10",attrs:{type:"primary"},on:{click:function(e){return t.muilteOp("close")}}},[t._v(t._s(t._f("lang")("fm.close")))]):t._e(),t.pageauthoritys.batchDeleteSetting?s("Button",{staticClass:"m-r-10",attrs:{type:"primary"},on:{click:function(e){return t.muilteOp("delete")}}},[t._v(t._s(t._f("lang")("fm.delete")))]):t._e(),t.pageauthoritys.save?s("Button",{staticClass:"m-r-10",attrs:{type:"primary",icon:"md-add"},on:{click:t.handleAdd}},[t._v(t._s(t._f("lang")("fm.add")))]):t._e(),s("Table",{ref:"selection",staticClass:"m-t-20 m-b-20 fm_table",attrs:{border:"",columns:t.columns,data:t.dataList},on:{"on-selection-change":t.selectHandle},scopedSlots:t._u([{key:"firstDepositReward",fn:function(e){var n=e.row;return[n.firstRewardEnable?s("span",[t._v(t._s(t._f("lang")("fm.firstDepositRewardNum",{d:(+n.firstCondition/100).toFixed(2),r:(+n.firstReward/100).toFixed(2)})))]):t._e()]}},{key:"reg",fn:function(e){var n=e.row;return[t.pageauthoritys.batchUpdateReg?s("div",{staticClass:"td-cell"},[s("i-switch",{attrs:{"before-change":t.handleBeforeChange,size:"large","true-value":1,"false-value":0},on:{"on-change":function(e){return t.handleChangeStatus(n,"regular")}},model:{value:n.reg,callback:function(e){t.$set(n,"reg",e)},expression:"row.reg"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t._f("lang")("fm.turnOn")))]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t._f("lang")("fm.disabled")))])])],1):t._e()]}},{key:"status",fn:function(e){var n=e.row;return[t.pageauthoritys.batchUpdateStatus?s("div",{staticClass:"td-cell"},[s("i-switch",{attrs:{"before-change":t.handleBeforeChange,size:"large","true-value":1,"false-value":0},on:{"on-change":function(e){return t.handleChangeStatus(n,"status")}},model:{value:n.status,callback:function(e){t.$set(n,"status",e)},expression:"row.status"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t._f("lang")("fm.turnOn")))]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t._f("lang")("fm.disabled")))])])],1):t._e()]}},{key:"action",fn:function(e){var n=e.row;return[s("div",{staticClass:"td-cell"},[t.pageauthoritys.update?s("Button",{attrs:{size:"small"},on:{click:function(e){return t.handleEdit(n)}}},[t._v(t._s(t._f("lang")("fm.edit")))]):t._e(),t.pageauthoritys.delete?s("Button",{attrs:{type:"warning",size:"small"},on:{click:function(e){return t.handleDel(n)}}},[t._v(t._s(t._f("lang")("fm.delete")))]):t._e()],1)]}}])}),s("div",{domProps:{innerHTML:t._s(t.$t("fm.instruction"))}}),s("m-page",{ref:"pageRef",attrs:{total:t.totalElements,transfer:!0,pageSize:t.pageSize,pageSizeOpts:[20,30,50,100,500]},on:{"on-change":t.query,"on-page-size-change":t.pageSizeChange},model:{value:t.pageNum,callback:function(e){t.pageNum=e},expression:"pageNum"}}),s("addConfig",{attrs:{item:t.editItem,type:t.editType},on:{onSuccess:t.query},model:{value:t.showAddConfig,callback:function(e){t.showAddConfig=e},expression:"showAddConfig"}})],1)}),[],!1,null,null,null));e.default=f.exports},b906:function(t,e,s){},f202:function(t,e,s){"use strict";s("602b")},f34b:function(t,e,s){"use strict";s("b906")}}]);