(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-46c839af"],{"3d0e":function(t,e,s){},c8d7:function(t,e,s){"use strict";s("3d0e")},cc80:function(t,e,s){"use strict";s.r(e);var r=s("3835"),a=s("2909"),o=(s("d3b7"),s("159b"),s("b64b"),s("99af"),s("b680"),s("3d01")),n={methods:{exportHandler:function(t){this.$emit("onExportHandler",t)}}},i=s("2877"),l=Object(i.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Poptip",{attrs:{confirm:"",title:t.$t("userReport.areYouSureYouNeedToExportTheDataOnThisPage")},on:{"on-ok":function(e){return t.exportHandler(!1)}}},[s("Button",{attrs:{type:"primary"}},[t._v(t._s(t._f("lang")("userReport.exportThisPage")))])],1),s("Dropdown",{staticStyle:{"margin-left":"-10px"}},[s("Button",{attrs:{type:"primary"}},[s("Icon",{attrs:{type:"md-arrow-dropdown"}})],1),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[s("DropdownItem",{nativeOn:{click:function(e){return t.exportHandler(!0)}}},[t._v(t._s(t._f("lang")("userReport.exportAll")))])],1)],1)],1)}),[],!1,null,null,null),p=l.exports,u={name:"UserReport",components:{Nav:o.a,exportBtn:p},data:function(){return{showSpin:!1,date:this.$utils.getTodayArr(),dateOptions:this.$utils.genDateConfig(180),userName:"",orderField:"rechargeAmount",desc:"desc",orderField_s:[{key:"rechargeAmount",name:this.$t("userReport.depositAmount")},{key:"withdrawAmount",name:this.$t("userReport.withdrawalAmount")},{key:"completedOrderAmount",name:this.$t("userReport.orderAmount")},{key:"commissionAmount",name:this.$t("userReport.commission")},{key:"rechargeWithdrawDiff",name:this.$t("userReport.depositAndWithdrawalDifference")}],desc_s:[{key:"desc",name:this.$t("userReport.decrease")},{key:"asc",name:this.$t("userReport.increase")}],userList:[],pageNo:1,pageSize:20,total:0,modal1:!1,excelIng:!1}},methods:{handledoExcel:function(){this.$router.push("/exportRecord")},getReportList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.showSpin=!0,e&&(this.pageNo=1),s&&(this.highLevelName="");var r={page:this.pageNo,size:this.pageSize,username:this.userName,beginTime:this.$utils.formatDate(this.date[0],"YYYY-MM-DD")+" 00:00:00",endTime:this.$utils.formatDate(this.date[1],"YYYY-MM-DD")+" 23:59:59"};r[this.desc]=this.orderField,this.$get("/report/tob/pageUserReport",r).then((function(e){var s=e.content,r=e.totalElements;if(s&&s.length){var o={};Object.keys(s[0]).forEach((function(t){if(t.indexOf(-1!==["rankLevel","username","highUsername","balance","rechargeAmount","withdrawAmount","orderAmount","withdrawUserCount","teamCommissionAmount","rechargeWithdrawDiff"])){var e=0;s.forEach((function(s){e+=+s[t]})),o[t]=e}})),o.username=t.$t("userReport.subtotal"),t.userList=[].concat(Object(a.a)(s),[o]),t.total=+r}else t.userList=[],t.total=0})).catch((function(e){t.userList=[],t.total=0,t.$Message.error(e.message)})).finally((function(){t.showSpin=!1}))},loadexcel:function(t){var e=this;if(this.userList.length){var s={page:this.pageNo,size:this.pageSize,username:this.userName,beginTime:this.$utils.formatDate(this.date[0],"YYYY-MM-DD")+" 00:00:00",endTime:this.$utils.formatDate(this.date[1],"YYYY-MM-DD")+" 23:59:59",exportType:t};s[this.desc]=this.orderField,this.showSpin=!0,this.$download("/report/tob/exportUserReport",s).then((function(){e.modal1=!0})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.showSpin=!1}))}},pageChange:function(t){this.pageNo=t,this.getReportList()},pageSizeChange:function(t){this.pageSize=t,this.getReportList(!0)},counted:function(t,e){switch(e){case"betRebate":return(100*((+t.winAmount+ +t.rebateMoney-+t.betMoney)/+t.betMoney||0)).toFixed(2);case"activeWin":return((+t.winAmount+ +t.rebateMoney+ +t.earnWaterMoney+ +t.activeMoney-+t.betMoney)/100).toFixed(2)}}},mounted:function(){this.getReportList()},computed:{tableHeads:function(){var t=[];return[[this.$t("userReport.playerUsername"),this.$t("userReport.playerUsernameHint")],this.$t("userReport.levels"),this.$t("userReport.immediateSuperior"),[this.$t("userReport.playerBalance"),this.$t("userReport.playerBalanceHint")],[this.$t("userReport.depositAmount"),this.$t("userReport.depositAmountHint")],[this.$t("userReport.withdrawalAmount"),this.$t("userReport.withdrawalAmountHint")],this.$t("fund.memberTax"),this.$t("fund.platformTax"),this.$t("userReport.orderAmount"),this.$t("userReport.quantityOfOrder"),this.$t("userReport.commission"),this.$t("userReport.depositAndWithdrawalDifference"),this.$t("userReport.activityMoney"),this.$t("userReport.teamCommission")].forEach((function(e){var s=e,a="";if(Array.isArray(e)){var o=Object(r.a)(e,2);s=o[0],a=o[1]}t.push({title:s,exp:a})})),t}}},c=u,d=(s("c8d7"),Object(i.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"report"},[s("Nav",{attrs:{nav:[{path:"/userreport",name:t.nowpagetitle}]}}),s("div",{staticClass:"report__content"},[s("div",{staticClass:"search__list"},[s("div",{staticClass:"search__item"},[s("span",[t._v(t._s(t._f("lang")("userReport.dateRange"))+" ")]),s("DatePicker",{attrs:{type:"daterange",options:t.dateOptions,clearable:!1},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),s("div",{staticClass:"search__item"},[s("span",[t._v(t._s(t._f("lang")("accountReport.playerQuery"))+" ")]),s("Input",{staticClass:"input__style",attrs:{clearable:!1,placeholder:t.$t("userReport.pleaseEnter")},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),s("div",{staticClass:"search__item"},[s("span",[t._v(t._s(t._f("lang")("userReport.sortType"))+" ")]),s("Select",{staticStyle:{width:"260px"},model:{value:t.orderField,callback:function(e){t.orderField=e},expression:"orderField"}},t._l(t.orderField_s,(function(e){return s("Option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.name))])})),1)],1),s("div",{staticClass:"search__item"},[s("span",[t._v(t._s(t._f("lang")("userReport.sortRule"))+" ")]),s("Select",{staticStyle:{width:"100px"},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}},t._l(t.desc_s,(function(e){return s("Option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.name))])})),1)],1),s("div",{staticClass:"search__item"},[s("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.getReportList}},[t._v(t._s(t._f("lang")("search")))])],1),s("div",{staticClass:"search__item"},[s("Dropdown",{attrs:{placement:"bottom-start"},on:{"on-click":t.loadexcel}},[s("Button",{attrs:{type:"primary",loading:t.excelIng},on:{"on-click":function(e){return t.loadexcel(0)}}},[t._v(" "+t._s(t.$t("fundManager.exportExcel"))+" "),s("Icon",{attrs:{type:"ios-arrow-down"}})],1),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[s("DropdownItem",{attrs:{name:"2",disabled:t.excelIng}},[t._v(t._s(t.$t("fundManager.currentPageData")))]),s("DropdownItem",{attrs:{name:"1",disabled:t.excelIng}},[t._v(t._s(t.$t("fundManager.allData")))])],1)],1)],1)]),s("table",[s("tr",t._l(t.tableHeads,(function(e,r){return s("th",{key:r},[e.exp?[s("Poptip",{staticClass:"head_item",attrs:{trigger:"hover",placement:r<8?"top-start":"top-end"}},[t._v(" "+t._s(e.title)+" "),s("p",{staticClass:"common_tip",attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(e.exp)+" ")])])]:[t._v(" "+t._s(e.title)+" ")]],2)})),0),t.userList.length?t._l(t.userList,(function(e,r){return s("tr",{key:r},[e.username!==t.$t("userReport.subtotal")&&e.username!==t.$t("userReport.total")?[s("td",[t._v(t._s(e.username))]),s("td",[t._v(t._s(e.rankLevel))]),s("td",[t._v(t._s(e.highUsername))])]:[s("td",{attrs:{colspan:"3"}},[t._v(t._s(e.username))])],s("td",[t._v(t._s((e.balance/100).toFixed(2)))]),s("td",[t._v(t._s((e.rechargeAmount/100).toFixed(2)))]),s("td",[t._v(t._s((e.withdrawAmount/100).toFixed(2)))]),s("td",[t._v(t._s((e.memberTax/100).toFixed(2)))]),s("td",[t._v(t._s((e.platformTax/100).toFixed(2)))]),s("td",[t._v(t._s((e.orderAmount/100).toFixed(2)))]),s("td",[t._v(t._s(e.orderCount))]),s("td",[t._v(t._s((e.commissionAmount/100).toFixed(2)))]),s("td",[t._v(t._s((e.rechargeWithdrawDiff/100).toFixed(2)))]),s("td",[t._v(t._s((e.activeBonusAmount/100).toFixed(2)))]),s("td",[t._v(t._s((e.teamCommissionAmount/100).toFixed(2)))])],2)})):[s("tr",[s("td",{attrs:{colspan:14}},[t._v(t._s(t.$t("noData")))])])]],2),s("m-page",{attrs:{total:t.total,page:t.pageNo,pageSize:t.pageSize,pageSizeOpts:[10,20,50,100]},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange},model:{value:t.pageNo,callback:function(e){t.pageNo=e},expression:"pageNo"}}),s("div",{staticClass:"tips"},[s("p",[t._v(t._s(t._f("lang")("userReport.tip"))+":")]),s("p",[t._v("1. "+t._s(t._f("lang")("userReport.cancelledOrdersAreNotCounted")))]),s("p",[t._v(t._s(t._f("lang")("userReport.depositAndWithdrawalDifference"))+" = "+t._s(t._f("lang")("userReport.depositAmount"))+" - "+t._s(t._f("lang")("userReport.withdrawalAmount")))])]),t.showSpin?s("Spin",{attrs:{size:"large",fix:""}}):t._e(),s("Modal",{attrs:{title:t.$t("proxy.warnTips"),"ok-text":t.$t("proxy.goNow"),"cancel-text":t.$t("proxy.stayPage")},on:{"on-ok":t.handledoExcel},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[s("p",[t._v(t._s(t.$t("proxy.exportingTip")))])])],1)],1)}),[],!1,null,null,null));e.default=d.exports}}]);