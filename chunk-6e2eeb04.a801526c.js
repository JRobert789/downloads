(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6e2eeb04"],{"0f56":function(t,e,a){},"28af":function(t,e,a){"use strict";a.r(e);var s=(a("a9e3"),a("d81d"),a("159b"),a("b0c0"),a("d3b7"),a("a8e2")),n=a("3d01"),o=a("5530"),r=(a("99af"),a("4de4"),a("07ac"),{101:"入款",102:"人工存入",104:"人工存入_负数归零",105:"人工存入_取消出款",106:"人工存入_其他",107:"团队佣金",108:"余额增值账户转出到余额",111:"抢单完成佣金收入",112:"抢单完成金额返回",113:"抢单取消金额返回",114:"重新结算派发代理佣金",115:"充值优惠",116:"活动礼金",117:"线上入款"}),i={201:"人工提出",202:"用户提现",203:"手续费",205:"人工提现_重复出款",206:"人工提现_入款误存",207:"人工提现_会员负数回充",208:"人工提现_其他",209:"拒绝出款",211:"余额转入余额增值账户",212:"抢单",213:"拒绝出款_手续费",214:"手动申请出款",215:"其他扣除的手续费",216:"重新结算扣除已派发的代理佣金"},u={props:{value:Boolean,detail:{type:Object,default:function(){return{}}}},data:function(){return{tradeTypeMap:Object(o.a)(Object(o.a)({},r),i)}},methods:{clickHandler:function(t){this.$emit("showDrawerDetail",t.subTradeType)}},computed:{showModal:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},title:function(){if(!this.value)return"";var t=this.detail||{},e=t.activeCode,a=t.date;return"".concat(this.$t("tradeTypes."+e),"(").concat(a,")").concat(this.$t("accountReport.details"))},dataByActiveCode:function(){if(!this.value)return[];var t=this.detail||{},e=t.activeCode,a=t.data[e];return a.codes?Object.values(a.originDatas).filter((function(t){return+t.tradeAmount||+t.number})):[a]}}},c=u,d=(a("9e43"),a("2877")),l=Object(d.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"report_lineitem",attrs:{width:"600",title:t.$t("accountReport.Details"),"footer-hide":""},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.detail?a("div",{staticClass:"mtable"},[a("table",{staticClass:"cmtable"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"},attrs:{colspan:"2"}},[t._v(t._s(t.title))])])]),a("tbody",[a("tr",[a("td",[t._v(t._s(t.$t("accountReport.project")))]),a("td",[t._v(t._s(t.$t("accountReport.amount")))])]),t._l(t.dataByActiveCode,(function(e,s){return a("tr",{key:s},[a("td",[t._v(" "+t._s(t._f("lang")("tradeTypes."+e.subTradeType))+" ")]),a("td",[a("span",{staticClass:"active",on:{click:function(a){return t.clickHandler(e)}}},[t._v(t._s(e.tradeAmount)+" ("+t._s(1===e.number?e.number+t.$t("accountReport.person"):e.number+t.$t("accountReport.people"))+")")])])])}))],2)])]):t._e()])}),[],!1,null,null,null),p=l.exports,h=(a("a15b"),{props:{value:Boolean,username:String,detail:{type:Object,default:function(){return{}}}},data:function(){return{total:0,pageNo:1,pageSize:20,tradeTypeMap:Object(o.a)(Object(o.a)({},r),i),columns:[{title:this.$t("accountReport.userName"),key:"username"},{title:this.$t("accountReport.project"),key:"subTradeTypeName"},{title:this.$t("accountReport.amount"),key:"amount"},{title:this.$t("accountReport.orderNumber"),key:"batchNo"},{title:this.$t("remark"),key:"remark"},{title:this.$t("time"),key:"createTime"}],dataList:[],showSpin:!1}},methods:{pageSizeChange:function(t){this.pageSize=t,this.getData()},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.showSpin){this.dataList=[],this.showSpin=!0;var a={endTime:this.$utils.formatDate(this.detail.date[1],"YYYY-MM-DD")+" 23:59:59",startTime:this.$utils.formatDate(this.detail.date[0],"YYYY-MM-DD")+" 00:00:00",page:this.pageNo=e,size:this.pageSize,subTradeType:this.subTradeType,orderType:this.detail.orderType};this.username&&(a.userName=this.username),this.$get("/funds/log/tob/queryPageComplex",a).then((function(e){var a=e.userFundsLog,s=a.content,n=a.totalElements;t.dataList=s.map((function(e){return e.subTradeTypeName=t.$t("tradeTypes.".concat(e.subTradeType)),e.amount=t.$utils.toYuan(e.amount),e})),t.total=Number(n)})).finally((function(){t.showSpin=!1}))}}},computed:{subTradeType:function(){var t=this.detail,e=t.codes,a=t.activeCode;return t.subTradeType||(e&&e.length?e.join(","):a)},show:{get:function(){return!!this.value},set:function(t){this.$emit("input",t)}}},watch:{value:function(t){this.dataList=[],t&&this.getData(1)}}}),f=h,m=(a("bdbd"),Object(d.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.detail?a("Drawer",{attrs:{width:"1000",title:t.detail.title},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"detail_wrap"},[a("m-table",{staticClass:"list",attrs:{columns:t.columns,data:t.dataList}}),a("div",{staticClass:"page_wrap"},[a("m-page",{attrs:{total:t.total,page:t.pageNo,pageSize:t.pageSize,pageSizeOpts:[20,30,50,100,300,500]},on:{"on-change":t.getData,"on-page-size-change":t.pageSizeChange},model:{value:t.pageNo,callback:function(e){t.pageNo=e},expression:"pageNo"}})],1),t.showSpin?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)]):t._e()}),[],!1,null,null,null)),v=m.exports,y={name:"AccountReport",data:function(){return{showSpin:!1,dateOptions:s.a,date:this.$utils.getTodayArr(),name:"",accountList:[],showModal:!1,headers:[{code:101,orderType:1,text:this.$t("tradeTypes.101")},{code:102,orderType:2,text:this.$t("tradeTypes.102"),codes:[102,104,105,106]},{code:116,orderType:6,text:this.$t("accountReport.tableHd3"),codes:[115,116,118,119,120,121,122,125,126,127,128]},{code:117,orderType:3,text:this.$t("tradeTypes.117")},{code:201,orderType:5,text:this.$t("tradeTypes.201"),codes:[201,205,206,207,208,214]},{code:202,orderType:4,text:this.$t("tradeTypes.202")},{code:203,orderType:7,text:this.$t("tradeTypes.203")},{code:215,orderType:8,text:this.$t("tradeTypes.215")},{code:217,orderType:9,text:this.$t("report.memberTax")},{code:218,orderType:10,text:this.$t("report.platformTax")}],detail:null,showDrawer:!1,drawerDates:"",searName:""}},components:{Nav:n.a,lineitem:p,drawer:v},methods:{dateChange:function(t){if(Object(s.c)(t)){var e=t[0],a=this.$utils.formatDate(new Date(new Date(e).getTime()+2592e6),"YYYY-MM-DD");this.date=[e,a],this.$Message.info(this.$t("report.timeSpan"))}},showDrawerDetail:function(t){this.detail.subTradeType=t,this.showDrawer=!0,this.showModal=!1},showDetail:function(t,e){var a=e.code,s=e.text,n=e.orderType;if(t.data[a]&&+t.data[a].number>0){var o=JSON.parse(JSON.stringify(t));this.detail=Object.assign({orderType:n,title:s,subTradeType:null},o,{activeCode:a,codes:t.data[a].codes,date:[t.date,t.date]}),this.showModal=!0}},showTotalDrawer:function(t,e,a,s){if(Number(a)||Number(s)){var n=t.code,o=t.codes,r=this.accountList[1].date,i=this.accountList[this.accountList.length-1].date;this.detail={title:e,codes:o||[n],date:[i,r],isTotal:!0,subTradeType:null,orderType:t.orderType},this.showDrawer=!0}},formatDataList:function(t){var e=this;return t.map((function(t){var a={tradeAmount:0,number:0};return e.headers.forEach((function(s){var n=s.code,o=s.codes,r=t.data[n]||{number:0,tradeAmount:0},i=+r.tradeAmount||0,u=+r.number||0,c={};o&&o.length&&(i=0,u=0,o.forEach((function(a){var s=t.data[a];s&&(c[a]=Object.assign({},s,{tradeAmount:e.$utils.toYuan(s.tradeAmount)}),i+=+s.tradeAmount||0,u+=+s.number||0)})),r.codes=o);var d=1;/^2/.test(n)&&(d=-1),a.tradeAmount+=+i*d,a.number+=u,r.tradeAmount=e.$utils.toYuan(i),r.number=u,r.originDatas=c})),a.tradeAmount=e.$utils.toYuan(a.tradeAmount),Object.assign(t,{total:a})}))},getReportList:function(){var t=this;this.showSpin=!0;var e={beginTime:this.$utils.formatDate(this.date[0],"YYYY-MM-DD")+" 00:00:00",endTime:this.$utils.formatDate(this.date[1],"YYYY-MM-DD")+" 23:59:59"};this.name&&(e.username=this.name),this.$get("/report/tob/getTradeTotalReport",e).then((function(a){t.accountList=t.formatDataList(JSON.parse(JSON.stringify(a))),t.searName=e.username})).catch((function(e){t.$Message.error(e.message),t.accountList=[]})).finally((function(){t.showSpin=!1}))}},mounted:function(){this.getReportList()}},w=y,b=(a("2fc2"),Object(d.a)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"totalReport"},[a("Nav",{attrs:{nav:[{path:"/accountreport",name:t.nowpagetitle}]}}),a("div",{staticClass:"report__content"},[a("div",{staticClass:"search__list"},[a("div",{staticClass:"search__item"},[a("span",[t._v(t._s(t._f("lang")("accountReport.dateRange")))]),a("DatePicker",{attrs:{type:"daterange",options:t.dateOptions,clearable:!1},on:{"on-change":t.dateChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("div",{staticClass:"search__item"},[t._v(" "+t._s(t._f("lang")("accountReport.playerQuery"))+" "),a("Input",{staticClass:"input__style",attrs:{clearable:!1,placeholder:t.$t("accountReport.pleaseInput")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){return t.getReportList()}}},[t._v(t._s(t._f("lang")("accountReport.search")))])],1),a("div",{staticClass:"mtable"},[a("table",{staticClass:"cmtable"},[a("thead",[a("tr",[a("th",[t._v(t._s(t._f("lang")("accountReport.date")))]),t._l(t.headers,(function(e,s){return a("th",{key:s},[t._v(t._s(e.text))])})),a("th",[t._v(t._s(t._f("lang")("accountReport.total")))])],2)]),a("tbody",[t._l(t.accountList,(function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s("total"===e.date?t.$t("accountReport.total"):e.date))]),t._l(t.headers,(function(n,o){return a("td",{key:o},[a("p",0===s?{class:{active:+e.data[n.code].number>0},on:{click:function(a){return t.showTotalDrawer(n,n.text,e.data[n.code].tradeAmount,e.data[n.code].number)}}}:{class:{active:+e.data[n.code].number>0},on:{click:function(a){return t.showDetail(e,n)}}},[t._v(" "+t._s(e.data[n.code].tradeAmount)+" "),a("span",[t._v("("+t._s(e.data[n.code].number)+t._s(t._f("lang")("accountReport.people"))+")")])])])})),a("td",[a("p",[t._v(" "+t._s(e.total.tradeAmount)+" "),a("span",[t._v("("+t._s(e.total.number)+t._s(t._f("lang")("accountReport.people"))+")")])])])],2)})),t.accountList.length?t._e():a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:t.headers.length+2}},[t._v(t._s(t.$t("Nodata")))])])],2)])]),t.showSpin?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),a("lineitem",{attrs:{detail:t.detail},on:{showDrawerDetail:t.showDrawerDetail},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}}),a("drawer",{attrs:{detail:t.detail,username:t.searName},model:{value:t.showDrawer,callback:function(e){t.showDrawer=e},expression:"showDrawer"}})],1)],1)}),[],!1,null,null,null));e.default=b.exports},"2fc2":function(t,e,a){"use strict";a("bc55")},"9e43":function(t,e,a){"use strict";a("9fe3")},"9fe3":function(t,e,a){},a8e2:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return u}));var s=a("3835"),n=(a("b680"),a("d36b")),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.a.t("report.".concat(t),e)},r={shortcuts:[{ttext:n.a.t("fund.today"),code:"today",value:function(){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0);var e=new Date;return e.setHours(23),e.setMinutes(59),e.setSeconds(59),[new Date(t),e]}},{text:n.a.t("fund.yesterday"),code:"yesterday",value:function(){var t=new Date;t.setTime(t.getTime()-864e5),t.setHours(0),t.setMinutes(0),t.setSeconds(0);var e=new Date(t);return e.setHours(23),e.setMinutes(59),e.setSeconds(59),[t,e]}},{text:n.a.t("fund.thisweek"),code:"week",value:function(){var t=new Date,e=t.getDay()||7,a=new Date(t-864e5*(e-1));return a.setHours(0),a.setMinutes(0),a.setSeconds(0),[a,new Date]}},{text:n.a.t("fund.lastweek"),code:"lastWeek",value:function(){var t=new Date,e=t.getDay()||7,a=864e5,s=new Date(t-e*a),n=new Date(t-(e+6)*a);return n.setHours(0),n.setMinutes(0),n.setSeconds(0),s.setHours(23),s.setMinutes(59),s.setSeconds(59),[n,s]}},{text:n.a.t("fund.thismonth"),code:"month",value:function(){var t=new Date;t.setDate(1);var e=new Date(t);e.setHours(0),e.setMinutes(0),e.setSeconds(0);var a=new Date;return a.setHours(23),a.setMinutes(59),a.setSeconds(59),[e,a]}},{text:n.a.t("nearlySevenDays"),value:function(){var t=new Date,e=new Date;return t.setHours(23),t.setMinutes(59),t.setSeconds(59),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setTime(e.getTime()-5184e5),[e,t]}},{text:n.a.t("nearly15Days"),value:function(){var t=new Date,e=new Date;return t.setHours(23),t.setMinutes(59),t.setSeconds(59),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setTime(e.getTime()-12096e5),[e,t]}},{text:n.a.t("nearly30Days"),value:function(){var t=new Date,e=new Date;return t.setHours(23),t.setMinutes(59),t.setSeconds(59),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setTime(e.getTime()-25056e5),[e,t]}}],disabledDate:function(t){return t&&t.valueOf()>Date.now()||t.valueOf()<Date.now()-15552e6}},i=(n.a.t("fund.today"),n.a.t("fund.yesterday"),n.a.t("fund.lastweek"),n.a.t("fund.thismonth"),n.a.t("fund.lastmonth"),n.a.t("nearlySevenDays"),n.a.t("nearly15Days"),n.a.t("nearly30Days"),n.a.t("fund.today"),n.a.t("fund.yesterday"),n.a.t("fund.last7"),n.a.t("fund.thismonth"),n.a.t("fund.lastmonth"),[{key:"0",name:o("decrease")},{key:"1",name:o("increase")}]);function u(t){var e,a=Object(s.a)(t,2),n=a[0],o=a[1];return n=Date.parse(n),e=(o=Date.parse(o))-n,e=Math.abs(e),Math.floor(e/864e5)>30}},bc55:function(t,e,a){},bdbd:function(t,e,a){"use strict";a("0f56")}}]);