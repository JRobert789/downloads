(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6692f047"],{"2ed3":function(t,e,a){"use strict";a("7e60")},"7e60":function(t,e,a){},d260:function(t,e,a){"use strict";a.r(e);var i=a("5530"),n=(a("ac1f"),a("5319"),a("d3b7"),a("2f62")),s={name:"limitarea",data:function(){return{areaName:"all",state:-1,pageNum:1,pageSize:10,total:0,loading:!1,dataList:[],countryList:[],ipLimitList:{},showdrawer:!1,detail:null,loading2:!1,provinceList:[],areaMap:[],provinceId:"",editObj:{areaName:"0",limitTime:"",remark:""}}},methods:Object(i.a)(Object(i.a)({},Object(n.b)("site",["queryCountryData"])),{},{outDate:function(t){var e=t.replace(/-/g,"/");return new Date>new Date(e)},del:function(t){var e=this;this.loading2=!0,this.$post("/platform/ipLimit/tob/updateIsDel",{id:t}).then((function(){e.$Message.success(e.$t("deleteSuccess")),e.getData(!0)})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.loading2=!1}))},getArea:function(){var t=this;this.$get("/platform/ipLimit/tob/queryCityList",{provinceId:this.provinceId}).then((function(e){t.areaMap=e||[]}))},confirm:function(){var t=this;if(this.editObj.areaName&&this.editObj.limitTime){this.loading2=!0;var e=this.detail?"/platform/ipLimit/tob/updateInfo":"/platform/ipLimit/tob/addForbiddenRegion",a=this.detail?{id:this.detail.id,limitTime:this.editObj.limitTime,remark:this.editObj.remark}:{ipLocation:this.editObj.areaName,limitTime:this.editObj.limitTime,remark:this.editObj.remark};this.$post(e,a).then((function(){t.$Message.success(t.$t("riskManagement.addedSuccessfully")),t.getData(!0),t.showdrawer=!1})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading2=!1}))}else this.$Message.info(this.$t("riskManagement.pleaseConfirmThatTheInformationIsComplete"))},editnew:function(t){this.showdrawer=!0,t?(this.editObj.areaName=t.countryName,this.editObj.limitTime=t.limitTime,this.editObj.remark=t.remark,this.detail=t):(this.detail=null,this.editObj={areaName:"0",limitTime:"",remark:""})},pageChange:function(t){this.pageNum=t,this.getData()},pageSizeChange:function(t){this.pageSize=t,this.getData(!0)},getConfig:function(){var t=this;this.queryCountryData().then((function(e){t.countryList=e.countryList,t.provinceList=e.provinceList||[],t.ipLimitList=e.ipLimitList.reduce((function(t,e){return t[e.dictKey]=e.dictValue,t}),{})}))},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.pageNum=1),this.loading=!0,this.$get("/platform/ipLimit/tob/queryListByPage",{pageNum:this.pageNum,pageSize:this.pageSize,state:this.state,areaName:"all"===this.areaName?"":this.areaName}).then((function(e){t.dataList=e.page.content,t.total=+e.page.totalElements})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))}}),mounted:function(){this.getConfig(),this.getData()}},r=s,l=(a("2ed3"),a("2877")),o=Object(l.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"limitarea"},[t.loading?a("Spin",{attrs:{fix:""}}):t._e(),a("div",{staticStyle:{margin:"10px 0"}},[t.pageauthoritys.add?a("Button",{attrs:{icon:"md-add",type:"primary"},on:{click:function(e){return t.editnew()}}},[t._v(t._s(t._f("lang")("riskManagement.addNewRestriction")))]):t._e(),a("Select",{staticStyle:{width:"220px",margin:"0 10px"},model:{value:t.areaName,callback:function(e){t.areaName=e},expression:"areaName"}},[a("Option",{attrs:{value:"all"}},[t._v(t._s(t._f("lang")("all")))]),t._l(t.countryList,(function(e){return a("Option",{key:e.chineseName,attrs:{value:e.chineseName}},[t._v(t._s(e.chineseName)+" ")])}))],2),a("Select",{staticStyle:{width:"100px",margin:"0 10px 0 0"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[a("Option",{attrs:{value:-1}},[t._v(t._s(t._f("lang")("all")))]),a("Option",{attrs:{value:0}},[t._v(t._s(t._f("lang")("riskManagement.expired")))]),a("Option",{attrs:{value:-1}},[t._v(t._s(t._f("lang")("riskManagement.using")))])],1),a("Button",{attrs:{icon:"md-add",type:"primary"},on:{click:function(e){return t.getData(!0)}}},[t._v(t._s(t._f("lang")("search")))])],1),a("table",{staticClass:"cmtable tdcenter"},[a("tr",[a("th",[t._v(t._s(t._f("lang")("riskManagement.countryRegion")))]),a("th",[t._v(t._s(t._f("lang")("riskManagement.limitTime")))]),a("th",[t._v(t._s(t._f("lang")("riskManagement.deadline")))]),a("th",[t._v(t._s(t._f("lang")("createTime")))]),a("th",[t._v(t._s(t._f("lang")("remark")))]),a("th",[t._v(t._s(t._f("lang")("status")))]),a("th",[t._v(t._s(t._f("lang")("operation")))])]),t._l(t.dataList,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.countryName))]),a("td",[t._v(t._s(t._f("lang")("riskManagement."+e.limitTime)))]),a("td",[t._v(t._s(e.finalTime))]),a("td",[t._v(t._s(e.createTime))]),a("td",[t._v(t._s(e.remark))]),a("td",{style:{background:t.outDate(e.finalTime)?"#FF4948":"#ADD597",color:"#fff"}},[t._v(" "+t._s(t.outDate(e.finalTime)?t.$t("riskManagement.expired"):t.$t("riskManagement.using")))]),a("td",[t.pageauthoritys.update?a("Button",{attrs:{icon:"ios-cog"},on:{click:function(a){return t.editnew(e)}}}):t._e(),t.pageauthoritys.delete?a("Button",{attrs:{icon:"md-trash"},on:{click:function(a){return t.del(e.id)}}}):t._e()],1)])}))],2),a("div",{staticClass:"tablebottom"},[a("div",{staticClass:"static"},[t._v(t._s(t._f("lang")("pageDate",{total:t.total,page:t.pageNum,allpage:Math.ceil(t.total/t.pageSize)})))]),a("Page",{staticStyle:{float:"right"},attrs:{current:t.pageNum,total:t.total,"show-sizer":"","show-elevator":"","page-size-opts":[10,20,50,100]},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1),a("Drawer",{staticClass:"noctxpad",attrs:{title:t.detail?t.$t("riskManagement.editRestrictedArea"):t.$t("riskManagement.addNewRestrictedArea"),width:"700"},model:{value:t.showdrawer,callback:function(e){t.showdrawer=e},expression:"showdrawer"}},[t.loading2?a("Spin",{attrs:{fix:""}}):t._e(),a("div",{staticStyle:{padding:"20px"}},[a("Form",{attrs:{"label-width":100}},[a("FormItem",{attrs:{label:t.$t("riskManagement.countryRegion")}},[Boolean(t.detail)?[a("Input",{staticStyle:{width:"220px"},attrs:{disabled:"",value:t.editObj.areaName}})]:[a("Select",{staticStyle:{width:"220px"},attrs:{filterable:""},model:{value:t.editObj.areaName,callback:function(e){t.$set(t.editObj,"areaName",e)},expression:"editObj.areaName"}},t._l(t.countryList,(function(e){return a("Option",{key:e.chineseName,attrs:{value:e.chineseName}},[t._v(" "+t._s(e.chineseName))])})),1)]],2),a("FormItem",{attrs:{label:t.$t("riskManagement.limitTime")}},[a("Select",{staticStyle:{width:"220px"},model:{value:t.editObj.limitTime,callback:function(e){t.$set(t.editObj,"limitTime",e)},expression:"editObj.limitTime"}},t._l(t.ipLimitList,(function(e,i){return a("Option",{key:i,attrs:{value:i}},[t._v(t._s(t._f("lang")("riskManagement."+i)))])})),1)],1),a("FormItem",{attrs:{label:t.$t("remark")}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea"},model:{value:t.editObj.remark,callback:function(e){t.$set(t.editObj,"remark",e)},expression:"editObj.remark"}})],1),a("FormItem",[a("div",{staticStyle:{color:"red","font-size":"12px"}},[t._v(" "+t._s(t._f("lang")("riskManagement.onlyIpHint3"))+" ")])])],1)],1),a("div",{staticClass:"drawerbottom"},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){t.showdrawer=!1}}},[t._v(t._s(t._f("lang")("cancel")))]),a("Button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t._f("lang")("confirm")))])],1)],1)],1)}),[],!1,null,null,null);e.default=o.exports}}]);