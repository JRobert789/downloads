(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7f92f12c"],{"0634":function(t,e,a){},"0c76":function(t,e,a){"use strict";a("0634")},b314:function(t,e,a){"use strict";a.r(e);var i=a("3835"),s=a("5530"),n=(a("d3b7"),a("ddb0"),a("ac1f"),a("1276"),a("4de4"),a("07ac"),a("d81d"),a("5319"),a("caad"),a("2532"),a("7db0"),a("3d01")),r=a("d3e5"),o=a("22b7"),l=a("8d37"),c=a("f44b"),u=a("aa08"),h=a("feb9"),p=a("b3f5"),d=a("b885"),g={name:"proxyuser",components:{Nav:n.a,thirdAmount:o.a,operation:l.a,level:c.a,proxytransfer:u.a,userDetail:h.a,addnewuser:p.a,remarkModel:d.a},data:function(){var t={};for(var e in r.c)t[e]=r.c[e][0].key;for(var a in r.b)t[a]=r.b[a][0].key;return{values:t,config:r.c,higher:r.b,dateoptions:r.a,loginName:"",lastLoginIp:"",date:[null,null],showhightsearch:!1,highAccount:"",path:[],page:1,limit:10,total:0,dataList:[],modal1:!1,thirdDetail:null,operationDetail:null,pathDetail:null,proxytransferdetail:null,userdrawerDetail:null,showadduser:!1,remarkUser:null,remark:"",loading:!1,excelloading:!1,lastDate:[null,null],userStatusMap:{10:this.$t("proxy.Using"),11:this.$t("proxy.Deactivate"),21:this.$t("proxy.Pausecrawl"),31:this.$t("proxy.freeze"),41:this.$t("proxy.blacklist")}}},methods:{formatRegisterInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.registerAddress,a=t.registerIp;return(a=a||this.$t("proxy.System"))+(e?"(".concat(e,")"):"")},handledoExcel:function(){this.$router.push("/exportRecord")},toDetail:function(t){var e=Object(s.a)({page:this.page,limit:this.limit},this.values);for(var a in e)"all"===e[a]&&(e[a]="");Object.assign(e,{searchName:this.loginName,lastLoginIp:this.lastLoginIp,beginTime:this.date[0]?this.$utils.formatDate(this.date[0],"YYYY-MM-DD hh:mm:ss"):"",endTime:this.date[1]?this.$utils.formatDate(this.date[1],"YYYY-MM-DD hh:mm:ss"):"",highAccount:this.highAccount}),sessionStorage.proxycachequery=JSON.stringify(e),this.$router.push({path:"/userdetail/baseinfo",query:{userid:t.id,isTest:!0}})},fna:function(t){this.userdrawerDetail=null,this.proxytransferdetail=t},reset:function(){for(var t in this.loginName="",this.lastLoginIp="",this.date=[null,null],r.c)this.values[t]=r.c[t][0].key;for(var e in r.b)this.values[e]=r.b[e][0].key},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(this.page=1),a&&(this.highAccount=""),8==+this.values.searchType){var i=this.loginName.split(/[, ]+/);if(i.length>100)return void this.$Message.error("多账号一次最多搜索100个")}var n=Object(s.a)({page:this.page,limit:this.limit},this.values);for(var r in n)"all"===n[r]&&(n[r]="");return Object.assign(n,{searchName:this.loginName,lastLoginIp:this.lastLoginIp,beginTime:this.date[0]?this.$utils.formatDate(this.date[0],"YYYY-MM-DD hh:mm:ss"):"",endTime:this.date[1]?this.$utils.formatDate(this.date[1],"YYYY-MM-DD hh:mm:ss"):"",highAccount:this.highAccount}),this.loading=!0,this.$post("/user/test/tob/getTestUserTable",n).then((function(e){e.levelPathMap?t.path=(Object.values(e.levelPathMap).reverse()||[]).filter((function(t){return"default"!==t})):t.path=[],t.dataList=e.resultPage.content.map((function(e){return e.status=t.userStatusMap[e.status],e.remarkShow=!1,e})),t.total=+e.resultPage.totalElements})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},pageChange:function(t){this.page=t,this.getData()},pageSizeChange:function(t){this.limit=t,this.getData(!0)},updateRemark:function(t){var e=this;this.$post("/user/tob/updateUserInfo",{id:t.id,dictCode:1,userName:t.loginName,remark:this.remark}).then((function(){t.remark=e.remark,e.$Message.success(e.$t("changeSuccess")),t.remarkShow=!1})).catch((function(t){e.$Message.error(t.message)}))},loadBehaviorExcel:function(){var t=this;this.loading||(this.loading=!0,this.$download("/user/lotUser/exportBehaviorExcel").then((function(){t.modal1=!1})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1})))},loadexcel:function(){var t=this;this.loading=!0;var e=Object(s.a)({excelType:0,page:this.page,limit:this.limit},this.values);for(var a in e)"all"===e[a]&&(e[a]="");Object.assign(e,{searchName:this.loginName,lastLoginIp:this.lastLoginIp,beginTime:this.date[0]?this.$utils.formatDate(this.date[0],"YYYY-MM-DD hh:mm:ss"):"",endTime:this.date[1]?this.$utils.formatDate(this.date[1],"YYYY-MM-DD hh:mm:ss"):"",highAccount:this.highAccount}),e.rankId=e.rankLevel,delete e.rankLevel,this.excelloading=!0;this.$post("/user/lotUser/doExcel",e,{},"post").then((function(){t.modal1=!1})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1,t.excelloading=!1}))},getPageconfig:function(){var t=this;return this.$get("/user/tob/getSelectValue").then((function(e){t.pageConfig=e,t.config.level.length=1;for(var a=1;a<=e.levelMap;a++)t.config.level.push({key:a,name:a});for(var i in t.config.rankLevel.length=1,e.userRankMap)t.config.rankLevel.push({key:i,name:e.userRankMap[i]})}))},clearDate:function(){this.date=this.$utils.getTodayArr()},change:function(t,e){var a=Object(i.a)(t,2),s=a[0],n=a[1],r=this.$utils.formatDate(this.lastDate[0])||"1990-01-01 00:00:00",o=this.$utils.formatDate(this.lastDate[1])||"1990-01-01 23:59:59";"date"===e&&(this.date=[s.replace("00:00:00",r.split(" ")[1]),n.replace("00:00:00",o.split(" ")[1])]),this.lastDate=this.date}},beforeRouteEnter:function(t,e,a){e.path.includes("/userdetail")||sessionStorage.removeItem("proxycachequery"),a()},mounted:function(){var t=this;if(sessionStorage.proxycachequery){var e=JSON.parse(sessionStorage.proxycachequery);for(var a in this.page=e.page,this.limit=e.limit,this.loginName=e.loginName,this.lastLoginIp=e.lastLoginIp,this.date=[e.beginTime,e.endTime],this.highAccount=e.highAccount,this.values)this.values[a]=e[a]||"all";sessionStorage.removeItem("proxycachequery")}this.$route.query.transfer&&(this.loginName=this.$route.query.transfer),this.getPageconfig().then((function(){t.getData().then((function(){if(t.$route.query.transfer){var e=t.dataList.find((function(e){return e.loginName===t.$route.query.transfer}));e&&(t.proxytransferdetail=e)}}))}))}},f=g,m=(a("0c76"),a("2877")),v=Object(m.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"outerbg"},[t.loading?a("Spin",{attrs:{fix:""}}):t._e(),a("Nav",{attrs:{nav:[{path:"/testuser",name:t.nowpagetitle}]}}),a("div",{staticClass:"proxyuser"},[a("nav",[a("div",{staticClass:"searchbar"},[t._l(t.config,(function(e,i){return a("Select",{key:i,style:{width:"searchType"===i?"200px":"150px"},model:{value:t.values[i],callback:function(e){t.$set(t.values,i,e)},expression:"values[key]"}},t._l(e,(function(e){return a("Option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.name))])})),1)})),a("Input",{style:{width:8==+t.values.searchType?"330px":"160px"},attrs:{placeholder:8==+t.values.searchType?t.$t("proxy.loginNameAllTips"):""},model:{value:t.loginName,callback:function(e){t.loginName=e},expression:"loginName"}})],2),t.showhightsearch?a("div",{staticClass:"searchbar"},[a("Select",{staticStyle:{width:"150px"},model:{value:t.values.dateType,callback:function(e){t.$set(t.values,"dateType",e)},expression:"values.dateType"}},t._l(t.higher.dateType,(function(e){return a("Option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.name))])})),1),a("DatePicker",{staticStyle:{width:"330px"},attrs:{type:"datetimerange",editable:!1,options:t.dateoptions,placeholder:t.$t("proxy.gameTimeTips")},on:{"on-change":t.change},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("Button",[t._v(t._s(t.$t("proxy.lastIp")))]),a("Input",{staticStyle:{width:"160px"},model:{value:t.lastLoginIp,callback:function(e){t.lastLoginIp=e},expression:"lastLoginIp"}})],1):t._e(),a("div",{staticClass:"functionbar"},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){return t.getData(!0,!0)}}},[t._v(t._s(t.$t("generalizeUrl.search")))]),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.showhightsearch=!t.showhightsearch}}},[t._v(t._s(t.$t("generalizeUrl.high")))]),a("Button",{attrs:{type:"primary"},on:{click:t.reset}},[t._v(t._s(t.$t("generalizeUrl.cleanSearch")))]),t.pageauthoritys.add?a("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){t.showadduser=!0}}},[t._v(t._s(t.$t("proxy.adduserTest")))]):t._e()],1)]),a("table",[a("caption",{staticClass:"path"},[t._v(" "+t._s(t.$t("proxy.pathUrl"))+"： "),a("span",{on:{click:function(e){t.loginName="",t.getData(!0,!0)}}},[t._v(t._s(t.$t("proxy.Tingzhu")))]),t._l(t.path,(function(e){return[t._v(" / "),a("span",{key:e,on:{click:function(a){t.highAccount=e,t.loginName="",t.getData(!0)}}},[t._v(t._s(e))])]}))],2),a("tr",[t._l(12,(function(e){return a("th",{key:e},[t._v(t._s(t.$t("proxy.proxyTable"+e)))])})),a("th",[t._v(t._s(t.$t("proxy.proxyTable15")))]),a("th",[t._v(t._s(t.$t("proxy.proxyTable16")))]),a("th",[t._v(t._s(t.$t("proxy.proxyTable17")))])],2),t._l(t.dataList,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(i+1))]),a("td",[a("span",{staticClass:"proxyInfo",attrs:{type:"text",size:"small"},on:{click:function(a){t.userdrawerDetail=e}}},[t._v(t._s(e.userName))])]),a("td",[t._v(t._s(t.formatRegisterInfo(e)))]),a("td",{style:{color:e.status===t.$t("proxy.Using")?"green":"red"}},[t._v(t._s(e.status))]),a("td",[t._v(t._s(t.$t("proxy.Agent")))]),a("td",[a("Button",{attrs:{size:"small"},on:{click:function(a){t.thirdDetail=e}}},[t._v(t._s(t.$t("proxy.Check")))])],1),a("td",[t._v(t._s(e.subCount))]),a("td",[t._v(t._s("default"===e.highAccount?t.$t("proxy.Tingzhu"):e.highAccount))]),a("td",[a("Button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.pathDetail=e}}},[t._v(t._s(e.level))])],1),a("td",[t._v(t._s(e.rankLevel))]),a("td",[t._v(" "+t._s(e.loginNum||0)+" ")]),e.loginIp?a("td",[t._v(" "+t._s(e.loginIp)+" ")]):a("td",[t._v(t._s(e.loginIp))]),a("td",[t._v(t._s(e.createTime))]),a("td",[a("Button",{staticClass:"mintext",staticStyle:{width:"100px"},attrs:{type:e.remark?"text":"default",size:"small"},on:{click:function(a){t.remarkUser=e}}},[t._v(t._s(e.remark||t.$t("proxy.AddRemark")))])],1),a("td",[a("Button",{attrs:{title:t.$t("proxy.details"),size:"small",icon:"md-information-circle"},on:{click:function(a){return t.toDetail(e)}}}),t.pageauthoritys.update?a("Button",{attrs:{title:t.$t("proxy.usersettings"),size:"small",icon:"ios-cog"},on:{click:function(a){t.operationDetail=e}}}):t._e(),a("Button",{attrs:{title:t.$t("proxy.cashTransactionRecords"),size:"small",icon:"ios-list-box"},on:{click:function(a){return t.$router.push({path:"/logpayflow",query:{loginName:e.userName}})}}}),e.isProxy?a("Button",{attrs:{title:t.$t("proxy.viewSubordinates"),size:"small",icon:"ios-download"},on:{click:function(a){t.highAccount=e.userName,t.loginName="",t.getData(!0)}}}):t._e()],1)])}))],2),a("div",{staticClass:"bottom"},[a("div",{staticClass:"static"},[t._v(t._s(t._f("lang")("pageDate",{total:t.total,page:t.page,allpage:Math.ceil(t.total/t.limit)})))]),a("Page",{staticStyle:{float:"right"},attrs:{current:t.page,total:t.total,"show-sizer":"","show-elevator":"","page-size-opts":[10,20,50,100]},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1),a("thirdAmount",{model:{value:t.thirdDetail,callback:function(e){t.thirdDetail=e},expression:"thirdDetail"}}),a("operation",{attrs:{isTest:!0},model:{value:t.operationDetail,callback:function(e){t.operationDetail=e},expression:"operationDetail"}}),a("level",{model:{value:t.pathDetail,callback:function(e){t.pathDetail=e},expression:"pathDetail"}}),a("proxytransfer",{on:{reload:function(e){return t.getData(!0,!0)}},model:{value:t.proxytransferdetail,callback:function(e){t.proxytransferdetail=e},expression:"proxytransferdetail"}}),a("userDetail",{attrs:{isTest:!0},on:{showtransfer:t.fna},model:{value:t.userdrawerDetail,callback:function(e){t.userdrawerDetail=e},expression:"userdrawerDetail"}}),a("addnewuser",{attrs:{isTest:!0},on:{upfresh:function(e){return t.getData(!0)}},model:{value:t.showadduser,callback:function(e){t.showadduser=e},expression:"showadduser"}}),a("remarkModel",{model:{value:t.remarkUser,callback:function(e){t.remarkUser=e},expression:"remarkUser"}})],1)],1)}),[],!1,null,null,null);e.default=v.exports}}]);