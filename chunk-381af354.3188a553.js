(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-381af354"],{2862:function(t,e,a){"use strict";a("45b1")},"45b1":function(t,e,a){},e82b:function(t,e,a){"use strict";a.r(e);var s=a("5530"),i=a("1da1"),r=(a("96cf"),a("d3b7"),a("d81d"),a("929a")),n={data:function(){return{activeItem:null,treeData:[{title:this.tfn("resourceManagement"),expand:!0,id:0,children:[]}],editData:{},loading:!1}},watch:{},mounted:function(){this.getResourceList()},methods:{tfn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$t("systemManager.".concat(t),e)},saveHandler:function(){var t=this;if(!this.loading){this.loading=!0;var e=this.editData,a=e.resourceType,s=e.resourceName,i=e.remark,r=e.parentId,n=e.id,o=e.pid,l=1===a,c=n?"/sys/resource/tob/updateResource":"/sys/resource/tob/saveResource",d={resourceType:a,resourceName:s,remark:i,uri:e.uri,pid:r||o||0};n&&(d.id=n);var u=l?{frontModule:e.frontModule,module:e.module,privilege:e.privilege}:{url:e.url,rel:e.rel,sortId:e.sortId,frontPath:e.frontPath,isAutoRefresh:e.isAutoRefresh};this.$post(c,Object.assign(u,d)).then((function(){t.$Message.success(t.$t("success")),t.loading=!1,t.getResourceList()})).catch((function(e){t.$Message.error(e.message),t.loading=!1}))}},deleteHandler:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loading){e.next=2;break}return e.abrupt("return");case 2:a=function(){t.loading=!0,t.$post("/sys/resource/tob/deleteResource",{id:t.activeItem.id}).then((function(){t.getResourceList()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.loading=!1}))},t.$Modal.confirm({content:t.$t("deleteTipByName",{name:t.activeItem.resourceName}),onOk:a});case 4:case"end":return e.stop()}}),e)})))()},getResourceById:function(t){var e=this;this.loading||(this.loading=!0,this.$post("/sys/resource/tob/getResource",{id:t}).then((function(t){e.editData=t,e.editData.isAutoRefresh||(e.editData.isAutoRefresh=0),e.activeItem.parentId&&(e.editData.parentId=e.activeItem.parentId),e.activeItem.parentName&&(e.editData.parentName=e.activeItem.parentName)})).finally((function(){e.loading=!1})))},onSelectChange:function(t){if(t&&t[0]){if(0===t[0].id)return;this.activeItem=t[0],this.getResourceById(this.activeItem.id)}else this.activeItem=null},addHandler:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.activeItem,a=e.id,i=e.resourceName,r=e.parentId,n=e.parentName,o=t?{parentId:a,parentName:i}:{parentId:r,parentName:n};this.editData=Object(s.a)({children:[],resourceType:0,resourceName:"",remark:"",url:"",rel:"",sortId:"",frontPath:"",isAutoRefresh:0,frontModule:"",module:"",privilege:""},o)},formatResourceList:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.map((function(t){return t.children&&t.children.length&&(t.children=e.formatResourceList(t.children,{parentId:t.id,parentName:t.resourceName})),Object.assign({},t,Object(s.a)({title:Object(r.b)({name:t.resourceName,frontPath:t.frontPath})},a))}))},getResourceList:function(){var t=this;this.$post("/sys/resource/tob/findResourceList").then((function(e){e&&e.length&&(t.treeData[0].children=t.formatResourceList(e,{parentId:0,parentName:""}))}))}}},o=n,l=(a("2862"),a("2877")),c=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"resources_wrap"},[a("div",{staticClass:"top_wrap"},[t.pageauthoritys.save?a("Button",{attrs:{type:"primary",icon:"ios-add",disabled:!t.activeItem},on:{click:function(e){return t.addHandler(!1)}}},[t._v(t._s(t.tfn("addSibling")))]):t._e(),t.pageauthoritys.save?a("Button",{attrs:{type:"primary",icon:"ios-add",disabled:!t.activeItem},on:{click:function(e){return t.addHandler(!0)}}},[t._v(t._s(t.tfn("addASubset")))]):t._e()],1),a("div",{staticClass:"content"},[a("div",{staticClass:"left"},[a("Tree",{attrs:{data:t.treeData},on:{"on-select-change":t.onSelectChange}})],1),t.activeItem?a("div",{staticClass:"right"},[a("Row",[a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"label"},[t._v(t._s(t.tfn("resourceType"))+"：")]),a("RadioGroup",{model:{value:t.editData.resourceType,callback:function(e){t.$set(t.editData,"resourceType",e)},expression:"editData.resourceType"}},[a("Radio",{attrs:{label:0}},[a("span",[t._v(t._s(t.tfn("menu")))])]),a("Radio",{attrs:{label:1}},[a("span",[t._v(t._s(t.tfn("button")))])])],1)],1),a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"label"},[t._v(t._s(t.tfn("resourceName"))+"：")]),a("Input",{staticStyle:{width:"150px"},model:{value:t.editData.resourceName,callback:function(e){t.$set(t.editData,"resourceName",e)},expression:"editData.resourceName"}})],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"label"},[t._v(t._s(t.tfn("superiorResources"))+"：")]),a("Input",{staticStyle:{width:"150px"},attrs:{value:t.editData.parentName,disabled:""}})],1),a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"label"},[t._v(t._s(t._f("lang")("remark"))+"：")]),a("Input",{staticStyle:{width:"150px"},model:{value:t.editData.remark,callback:function(e){t.$set(t.editData,"remark",e)},expression:"editData.remark"}})],1)],1),0==+t.editData.resourceType?[a("Row",[a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"label"},[t._v("url：")]),a("Input",{staticStyle:{width:"150px"},model:{value:t.editData.url,callback:function(e){t.$set(t.editData,"url",e)},expression:"editData.url"}})],1),a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"label"},[t._v("rel：")]),a("Input",{staticStyle:{width:"150px"},model:{value:t.editData.rel,callback:function(e){t.$set(t.editData,"rel",e)},expression:"editData.rel"}})],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"label"},[t._v(t._s(t.tfn("sort"))+"ID：")]),a("Input",{staticStyle:{width:"150px"},model:{value:t.editData.sortId,callback:function(e){t.$set(t.editData,"sortId",e)},expression:"editData.sortId"}})],1),a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"label"},[t._v("path：")]),a("Input",{staticStyle:{width:"200px"},model:{value:t.editData.frontPath,callback:function(e){t.$set(t.editData,"frontPath",e)},expression:"editData.frontPath"}})],1)],1),a("Row",[a("Col",{attrs:{span:"18"}},[a("span",{staticClass:"label"},[t._v("uri：")]),a("Input",{staticStyle:{width:"500px"},model:{value:t.editData.uri,callback:function(e){t.$set(t.editData,"uri",e)},expression:"editData.uri"}})],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"label"},[t._v(t._s(t.tfn("autoRefresh"))+"：")]),a("RadioGroup",{model:{value:t.editData.isAutoRefresh,callback:function(e){t.$set(t.editData,"isAutoRefresh",e)},expression:"editData.isAutoRefresh"}},[a("Radio",{attrs:{label:1}},[a("span",[t._v(t._s(t._f("lang")("yes")))])]),a("Radio",{attrs:{label:0}},[a("span",[t._v(t._s(t._f("lang")("no")))])])],1)],1)],1)]:[a("Row",[a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"label"},[t._v(t._s(t.tfn("frontendModule"))+"：")]),a("Input",{staticStyle:{width:"200px"},model:{value:t.editData.frontModule,callback:function(e){t.$set(t.editData,"frontModule",e)},expression:"editData.frontModule"}})],1),a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"label"},[t._v(t._s(t._f("lang")("operation"))+"：")]),a("Input",{staticStyle:{width:"200px"},model:{value:t.editData.privilege,callback:function(e){t.$set(t.editData,"privilege",e)},expression:"editData.privilege"}})],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("span",{staticClass:"label"},[t._v(t._s(t.tfn("module"))+"：")]),a("Input",{staticStyle:{width:"200px"},model:{value:t.editData.module,callback:function(e){t.$set(t.editData,"module",e)},expression:"editData.module"}})],1)],1),a("Row",[a("Col",{attrs:{span:"18"}},[a("span",{staticClass:"label"},[t._v("uri：")]),a("Input",{staticStyle:{width:"500px"},model:{value:t.editData.uri,callback:function(e){t.$set(t.editData,"uri",e)},expression:"editData.uri"}})],1)],1)],a("div",{staticClass:"btns"},[t.pageauthoritys.update?a("Button",{attrs:{type:"primary"},on:{click:t.saveHandler}},[t._v(t._s(t._f("lang")("save")))]):t._e(),t.pageauthoritys.delete?a("Button",{attrs:{type:"primary",disabled:!t.editData.id},on:{click:t.deleteHandler}},[t._v(t._s(t._f("lang")("delete")))]):t._e()],1)],2):t._e()]),t.loading?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)}),[],!1,null,null,null);e.default=c.exports}}]);