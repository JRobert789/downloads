(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3d56c5d4"],{9069:function(t,e,n){},"943b":function(t,e,n){"use strict";n("9069")},dfbc:function(t,e,n){"use strict";n.r(e);var r=n("5530"),a=(n("d3b7"),n("159b"),n("b64b"),n("caad"),{data:function(){var t=this;return{form:{scoreCode:"all",scoreStart:null,scoreEnd:null,userName:"",scoreVal:""},timeStr:[new Date,new Date],dateoptions:{disabledDate:function(t){return t&&t.valueOf()>Date.now()||t.valueOf()<Date.now()-7776e6}},typeList:[],columns:[{title:this.tFn("targetAccount"),key:"userName"},{title:this.$t("type"),key:"isProxy",count:function(e){return t.tFn(e?"proxy":"player")}},{title:this.tFn("directAgent"),key:"highLevelAccount",count:function(e){return"default"===e?t.tFn("owner"):e}},{title:this.tFn("score"),key:"scoreVal"},{title:this.tFn("remainingPoints"),key:"finalScore"},{title:this.tFn("action"),key:"scoreName"},{title:this.tFn("transactionTime"),key:"createTime"},{title:this.$t("remark"),key:"remark"}],dataList:[],totalElements:0,pageNum:1,pageSize:10,showSpin:!1,detail:{userName:"",type:0},level:[]}},methods:{tFn:function(t,e){return this.$t("userScore.".concat(t),e)},search:function(){this.pageNum=1,this.query()},pageSizeChange:function(t){this.pageSize=t,this.query(1)},query:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.showSpin=!0;var n=Object.assign({},this.form);n.scoreCode="all"===n.scoreCode?"":n.scoreCode;var a=this.$utils.formatDate(this.timeStr[0],"YYYY-MM-DD"),o=this.$utils.formatDate(this.timeStr[1],"YYYY-MM-DD");this.$get("/user/score/tob/queryScoreRecordList",Object(r.a)(Object(r.a)({},n),{},{limit:this.pageSize,page:e,beginTime:a,endTime:o})).then((function(e){var n=e.totalElements,r=e.content;t.dataList=r||[],t.totalElements=+n||0})).catch((function(e){t.dataList=[],t.totalElements=0,t.pageNum=1,t.$Message.error(e.message)})).finally((function(){t.showSpin=!1}))},queryType:function(){var t=this;this.$get("/user/score/tob/queryScoreRecordList").then((function(e){var n=e.scoreType;delete n.SIGN;var r=["AGENT_RECHARGE","ORDER","RECHARGE"];Object.keys(n).forEach((function(e){r.includes(e)&&(n[e]=t.tFn(e+"Tip"))})),t.typeList=n}))},clear:function(){this.form={scoreCode:"all",scoreStart:"",scoreEnd:"",userName:"",timeStr:new Date},this.timeStr=[new Date,new Date],this.query()}},mounted:function(){this.$route.params.userName&&(this.form.userName=this.$route.params.userName),this.query()}}),o=a,i=(n("943b"),n("2877")),s=Object(i.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pointsflow"},[n("Form",{ref:"formInline",attrs:{model:t.form,inline:""}},[n("FormItem",{attrs:{label:t.tFn("userAccount"),"label-width":100}},[n("Input",{attrs:{type:"text"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1),n("FormItem",{attrs:{label:t.tFn("pointsChanges"),"label-width":100}},[n("InputNumber",{attrs:{type:"number",min:0,max:1e8},model:{value:t.form.scoreStart,callback:function(e){t.$set(t.form,"scoreStart",e)},expression:"form.scoreStart"}})],1),n("span",{staticClass:"source"},[t._v("~")]),n("FormItem",[n("InputNumber",{attrs:{type:"number",min:0,max:1e8},model:{value:t.form.scoreEnd,callback:function(e){t.$set(t.form,"scoreEnd",e)},expression:"form.scoreEnd"}})],1),n("FormItem",{attrs:{label:t.$t("date"),"label-width":40}},[n("DatePicker",{staticStyle:{width:"200px"},attrs:{format:"yyyy/MM/dd",type:"daterange",options:t.dateoptions},model:{value:t.timeStr,callback:function(e){t.timeStr=e},expression:"timeStr"}})],1),n("FormItem",[n("Button",{attrs:{type:"primary",icon:"md-search"},on:{click:function(e){return t.search()}}},[t._v(t._s(t._f("lang")("search")))])],1),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.clear()}}},[t._v(t._s(t._f("lang")("clearSearch")))])],1)],1),n("m-table",{attrs:{size:"small",columns:t.columns,data:t.dataList},scopedSlots:t._u([{key:"remake",fn:function(e){var r=e.row;return[n("Poptip",{attrs:{content:r.remake,title:t.$t("remarks"),placement:"right"}},[n("Icon",{staticClass:"department-remark",attrs:{type:"ios-information-circle"}})],1)]}},{key:"operation",fn:function(e){var r=e.row;return[n("div",{staticClass:"operation-btn-group"},[n("Tooltip",{attrs:{content:t.tFn("depositPoints"),placement:"top"}},[n("Button",{attrs:{size:"small",icon:"md-exit"},on:{click:function(e){return t.add(r)}}})],1),n("Tooltip",{attrs:{content:t.tFn("takeOutPoints"),placement:"top"}},[n("Button",{attrs:{size:"small",icon:"md-exit"},on:{click:function(e){return t.edit(r)}}})],1),n("Tooltip",{attrs:{content:t.tFn("integralFlow"),placement:"top"}},[n("Button",{attrs:{size:"small",icon:"md-paper"},on:{click:function(e){return t.changeRole(r)}}})],1),n("Tooltip",{attrs:{content:t.tFn("subordinate"),placement:"top"}},[n("Button",{attrs:{size:"small",icon:"md-people"},on:{click:function(e){return t.join(r)}}})],1)],1)]}}])}),n("m-page",{attrs:{total:t.totalElements,pageSize:t.pageSize},on:{"on-change":t.query,"on-page-size-change":t.pageSizeChange},model:{value:t.pageNum,callback:function(e){t.pageNum=e},expression:"pageNum"}}),t.showSpin?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)}),[],!1,null,null,null);e.default=s.exports}}]);